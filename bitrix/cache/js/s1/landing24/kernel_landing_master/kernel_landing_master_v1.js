; /* /bitrix/js/landing/bxdom.js?16322955551560*/
; /* /bitrix/js/landing/typedef.min.js?163229556536*/
; /* /bitrix/js/landing/ui/editor_config.min.js?1632295569316*/
; /* /bitrix/js/landing/ui/style_factory.min.js?16322955842481*/
; /* /bitrix/js/landing/ui/field_factory.min.js?16322955756173*/
; /* /bitrix/js/landing/ui/card/block_preview_card.min.js?16322955671918*/
; /* /bitrix/js/landing/ui/card/field_group.min.js?1632295567774*/
; /* /bitrix/js/landing/ui/card/image_preview_card.min.js?16322955671553*/
; /* /bitrix/js/landing/ui/card/add_your_first_block.js?1632295566770*/
; /* /bitrix/js/landing/ui/card/base_image_library_card.min.js?16322955674143*/
; /* /bitrix/js/landing/ui/card/unsplash_card.min.js?16322955672529*/
; /* /bitrix/js/landing/ui/card/google_images_card.min.js?16322955673828*/
; /* /bitrix/js/landing/ui/card/uploader_card.js?1632295567800*/
; /* /bitrix/js/landing/ui/card/loader.min.js?1632295567617*/
; /* /bitrix/js/landing/ui/card/link_card.js?1632295567771*/
; /* /bitrix/js/landing/ui/card/landing_preview.min.js?1632295567805*/
; /* /bitrix/js/landing/ui/card/block_html_preview.js?1632295567990*/
; /* /bitrix/js/landing/ui/card/icon_preview.min.js?1632295567406*/
; /* /bitrix/js/landing/ui/card/tab_card.min.js?16322955672439*/
; /* /bitrix/js/landing/ui/card/dynamic_fields_group.min.js?1632295567633*/
; /* /bitrix/js/landing/ui/card/add_page_card.min.js?16322955662627*/
; /* /bitrix/js/landing/ui/tool/color_picker.min.js?16322955843313*/
; /* /bitrix/js/landing/ui/tool/auto-font-scale.min.js?16322955841240*/
; /* /bitrix/js/landing/ui/tool/auto-font-scale-entry.min.js?16322955842061*/
; /* /bitrix/js/landing/ui/tool/suggests.min.js?16322955841716*/
; /* /bitrix/js/landing/ui/tool/font-manager.min.js?16322955842545*/
; /* /bitrix/js/landing/ui/adapter/css-property.min.js?1632295565408*/
; /* /bitrix/js/landing/ui/button/action_button.js?1632295565588*/
; /* /bitrix/js/landing/ui/button/plus_button.js?1632295566662*/
; /* /bitrix/js/landing/ui/button/editor_action_button.js?1632295566920*/
; /* /bitrix/js/landing/ui/button/design_button.min.js?1632295566299*/
; /* /bitrix/js/landing/ui/button/color_button.min.js?16322955661132*/
; /* /bitrix/js/landing/ui/button/block_card_action.js?1632295566594*/
; /* /bitrix/js/landing/ui/button/create_link.min.js?1632295566640*/
; /* /bitrix/js/landing/ui/button/font_action.min.js?16322955663200*/
; /* /bitrix/js/landing/ui/button/change_tag.min.js?16322955661933*/
; /* /bitrix/js/landing/ui/button/text_background_color.min.js?16322955661250*/
; /* /bitrix/js/landing/ui/button/create_page.min.js?1632295566560*/
; /* /bitrix/js/landing/ui/panel/base_button_panel.min.js?1632295578874*/
; /* /bitrix/js/landing/ui/panel/editor_panel.min.js?163229557910841*/
; /* /bitrix/js/landing/ui/panel/small_editor_panel.js?16322955831474*/
; /* /bitrix/js/landing/ui/panel/edit_content_panel.min.js?16322955791811*/
; /* /bitrix/js/landing/ui/panel/preview_panel.js?16322955834501*/
; /* /bitrix/js/landing/ui/panel/unsplash_panel.min.js?16322955833305*/
; /* /bitrix/js/landing/ui/panel/image_panel.min.js?16322955833377*/
; /* /bitrix/js/landing/ui/panel/url_list.min.js?163229558410701*/
; /* /bitrix/js/landing/ui/panel/top_panel.min.js?163229558310192*/
; /* /bitrix/js/landing/ui/panel/card_action.min.js?16322955781006*/
; /* /bitrix/js/landing/ui/panel/link_panel.min.js?16322955833994*/
; /* /bitrix/js/landing/ui/panel/google_fonts_panel.min.js?16322955828765*/
; /* /bitrix/js/landing/ui/panel/google_images_settings_panel.min.js?16322955822137*/
; /* /bitrix/js/landing/ui/panel/catalog_panel.min.js?16322955786849*/
; /* /bitrix/js/landing/ui/panel/status_panel.min.js?16322955831345*/
; /* /bitrix/js/landing/ui/panel/detail_page_panel.min.js?16322955794330*/
; /* /bitrix/js/landing/ui/field/image_field.min.js?163229557215024*/
; /* /bitrix/js/landing/ui/field/icon_field.min.js?16322955721574*/
; /* /bitrix/js/landing/ui/field/link_field.min.js?163229557211318*/
; /* /bitrix/js/landing/ui/field/dropdown_field.min.js?16322955713138*/
; /* /bitrix/js/landing/ui/field/dropdown_preview_field.min.js?16322955712746*/
; /* /bitrix/js/landing/ui/field/unit_field.min.js?16322955752463*/
; /* /bitrix/js/landing/ui/field/range_field.min.js?16322955738213*/
; /* /bitrix/js/landing/ui/field/button_group_field.min.js?16322955702679*/
; /* /bitrix/js/landing/ui/field/color_field.min.js?16322955702098*/
; /* /bitrix/js/landing/ui/field/link_url_field.min.js?163229557216049*/
; /* /bitrix/js/landing/ui/field/dropdown_inline.min.js?16322955712126*/
; /* /bitrix/js/landing/ui/field/dnd_list.min.js?16322955719052*/
; /* /bitrix/js/landing/ui/field/sortable_list.min.js?16322955742604*/
; /* /bitrix/js/landing/ui/field/position_field.min.js?16322955721930*/
; /* /bitrix/js/landing/ui/field/checkbox_field.min.js?16322955702717*/
; /* /bitrix/js/landing/ui/field/radio_field.min.js?1632295573469*/
; /* /bitrix/js/landing/ui/field/multiselect_field.min.js?16322955725639*/
; /* /bitrix/js/landing/ui/field/filter_field.min.js?16322955711673*/
; /* /bitrix/js/landing/ui/field/font_field.min.js?16322955723002*/
; /* /bitrix/js/landing/ui/field/html_field.min.js?16322955721233*/
; /* /bitrix/js/landing/ui/field/embed_field.min.js?16322955712482*/
; /* /bitrix/js/landing/ui/field/date_field.min.js?16322955711892*/
; /* /bitrix/js/landing/ui/field/block_source_field.min.js?16322955701559*/
; /* /bitrix/js/landing/ui/field/dynamic_image_field.min.js?16322955711947*/
; /* /bitrix/js/landing/ui/field/dynamic_dropdown_field.min.js?1632295571430*/
; /* /bitrix/js/landing/ui/field/pages_field.min.js?16322955721478*/
; /* /bitrix/js/landing/ui/field/click_action_field.min.js?16322955702334*/
; /* /bitrix/js/landing/ui/style_node.min.js?16322955842990*/
; /* /bitrix/js/landing/events/block_event.min.js?1632295558520*/
; /* /bitrix/js/landing/group.min.js?1632295559576*/
; /* /bitrix/js/landing/block.min.js?163229555573638*/
; /* /bitrix/js/landing/card.min.js?16322955551589*/
; /* /bitrix/js/landing/node.min.js?16322955642183*/
; /* /bitrix/js/landing/node/text.min.js?16322955646515*/
; /* /bitrix/js/landing/node/link.min.js?16322955643822*/
; /* /bitrix/js/landing/node/img.min.js?16322955645852*/
; /* /bitrix/js/landing/node/ul.js?16322955645944*/
; /* /bitrix/js/landing/node/map.min.js?16322955642953*/
; /* /bitrix/js/landing/node/component.min.js?1632295564491*/
; /* /bitrix/js/landing/node/icon.min.js?16322955641743*/
; /* /bitrix/js/landing/node/embed.min.js?16322955641532*/
; /* /bitrix/js/landing/client/unsplash.min.js?16322955551537*/
; /* /bitrix/js/landing/client/google_images.min.js?16322955551041*/
; /* /bitrix/js/landing/client/google_fonts.min.js?16322955551043*/
; /* /bitrix/js/landing/mediaservice/base_mediaservice.min.js?16322955632526*/
; /* /bitrix/js/landing/mediaservice/youtube_mediaservice.min.js?16322955642394*/
; /* /bitrix/js/landing/mediaservice/vimeo_mediaservice.min.js?16322955632632*/
; /* /bitrix/js/landing/mediaservice/vine_mediaservice.min.js?16322955631047*/
; /* /bitrix/js/landing/mediaservice/instagram_mediaservice.min.js?16322955631215*/
; /* /bitrix/js/landing/mediaservice/google_maps_search_mediaservice.min.js?16322955631169*/
; /* /bitrix/js/landing/mediaservice/google_maps_place_mediaservice.min.js?1632295563828*/
; /* /bitrix/js/landing/mediaservice/facebook_page_plugin_service.min.js?16322955632767*/
; /* /bitrix/js/landing/mediaservice/facebook_post_embed_service.min.js?16322955631228*/
; /* /bitrix/js/landing/mediaservice/facebook_video_embed_service.min.js?16322955631246*/
; /* /bitrix/js/landing/mediaservice/service_factory.min.js?1632295563693*/
; /* /bitrix/js/landing/error_manager.min.js?16322955582325*/
; /* /bitrix/js/landing/external/webfontloader/webfontloader.min.js?163229555912384*/

; /* Start:"a:4:{s:4:"full";s:42:"/bitrix/js/landing/bxdom.js?16322955551560";s:6:"source";s:27:"/bitrix/js/landing/bxdom.js";s:3:"min";s:0:"";s:3:"map";s:0:"";}"*/
;(function(window) {

	var debug = 0 ? console.log.bind(console, '[BXDOM]') : function() {};

	var raf = (
		window.requestAnimationFrame
		|| window.webkitRequestAnimationFrame
		|| window.mozRequestAnimationFrame
		|| window.msRequestAnimationFrame
		|| function(cb) { return setTimeout(cb, 16); }
	);

	var BXDOM = function()
	{
		this.reads = [];
		this.writes = [];
		this.raf = raf.bind(window);
		debug('initialized', this);
	};

	BXDOM.prototype = {
		constructor: BXDOM,

		read: function(fn, ctx)
		{
			debug('read');
			this.reads.push(!ctx ? fn : fn.bind(ctx));
			scheduleFlush(this);
		},

		write: function(fn, ctx)
		{
			debug('write');
			this.writes.push(!ctx ? fn : fn.bind(ctx));
			scheduleFlush(this);
		},

		catch: null
	};

	function scheduleFlush(dom) {
		if (!dom.scheduled)
		{
			dom.scheduled = true;
			dom.raf(flush.bind(null, dom));
			debug('flush scheduled');
		}
	}

	function flush(dom) {
		debug('flush');

		var writes = dom.writes;
		var reads = dom.reads;
		var error;

		try {
			debug('flushing reads', reads.length);
			runTasks(reads);
			debug('flushing writes', writes.length);
			runTasks(writes);
		} catch (e) { error = e; }

		dom.scheduled = false;

		if (reads.length || writes.length)
		{
			scheduleFlush(dom);
		}

		if (error)
		{
			debug('task errored', error.message);
			if (dom.catch) dom.catch(error);
			else throw error;
		}
	}

	function runTasks(tasks) {
		debug('run tasks');
		var task;

		while (task = tasks.shift())
		{
			task();
		}
	}

	BX.DOM = (BX.DOM || new BXDOM());

})(window);
/* End */
;
; /* Start:"a:4:{s:4:"full";s:46:"/bitrix/js/landing/typedef.min.js?163229556536";s:6:"source";s:29:"/bitrix/js/landing/typedef.js";s:3:"min";s:33:"/bitrix/js/landing/typedef.min.js";s:3:"map";s:33:"/bitrix/js/landing/typedef.map.js";}"*/

/* End */
;
; /* Start:"a:4:{s:4:"full";s:56:"/bitrix/js/landing/ui/editor_config.min.js?1632295569316";s:6:"source";s:38:"/bitrix/js/landing/ui/editor_config.js";s:3:"min";s:42:"/bitrix/js/landing/ui/editor_config.min.js";s:3:"map";s:42:"/bitrix/js/landing/ui/editor_config.map.js";}"*/
(function(){"use strict";document.execCommand("defaultParagraphSeparator",false,"p");document.execCommand("styleWithCSS",false,true);if(top!==window){parent.document.addEventListener("keydown",function(e){parent.BX.onCustomEvent(parent.document,"iframe:keydown",[e])})}})();
/* End */
;
; /* Start:"a:4:{s:4:"full";s:57:"/bitrix/js/landing/ui/style_factory.min.js?16322955842481";s:6:"source";s:38:"/bitrix/js/landing/ui/style_factory.js";s:3:"min";s:42:"/bitrix/js/landing/ui/style_factory.min.js";s:3:"map";s:42:"/bitrix/js/landing/ui/style_factory.map.js";}"*/
(function(){"use strict";BX.namespace("BX.Landing.UI.Factory");BX.Landing.UI.Factory.StyleFactory=function(e){this.frame=!!e.frame?e.frame:null;this.postfix=typeof e.postfix==="string"?e.postfix:""};function e(e,t,s,o,l){o=!!o?o:"";if(!!t&&typeof t==="object"){var i=Object.keys(t);t=i.map(function(e){return t[e]})}else if(typeof t==="string"){t=[t]}t.forEach(function(t){s.forEach(function(s){if(t+o!==s.value+o){e.classList.remove(s.value+o)}if(l){e.style[l]=null;[].slice.call(e.querySelectorAll("*")).forEach(function(e){e.style[l]=null})}});e.classList.add(t+o)})}BX.Landing.UI.Factory.StyleFactory.prototype={createField:function(t){var s=null;if(t.type==="slider"||t.type==="range-slider"){s=new BX.Landing.UI.Field.Range({title:t.title,selector:t.selector,style:t.style,format:e,frame:this.frame,property:t.property,pseudoElement:t.pseudoElement,pseudoClass:t.pseudoClass,items:t.items,postfix:this.postfix,onChange:t.onChange,type:t.type==="range-slider"?"multiple":null})}if(t.type==="buttons"){s=new BX.Landing.UI.Field.ButtonGroup({title:t.title,selector:t.selector,style:t.style,format:e,frame:this.frame,property:t.property,pseudoElement:t.pseudoElement,pseudoClass:t.pseudoClass,items:t.items,postfix:this.postfix,onChange:t.onChange,multiple:t.multiple===true})}if(t.type==="display"){s=new BX.Landing.UI.Field.ButtonGroup({title:t.title,selector:t.selector,style:t.style,format:e,frame:this.frame,property:t.property,pseudoElement:t.pseudoElement,pseudoClass:t.pseudoClass,items:t.items,postfix:this.postfix,onChange:t.onChange,multiple:true,className:"landing-ui-display-button-group"})}if(t.type==="palette"){s=new BX.Landing.UI.Field.Color({title:t.title,selector:t.selector,style:t.style,format:e,frame:this.frame,property:t.property,pseudoElement:t.pseudoElement,pseudoClass:t.pseudoClass,items:t.items,postfix:this.postfix,onChange:t.onChange})}if(t.type==="list"&&t.style!=="font-family"){s=new BX.Landing.UI.Field.Dropdown({title:t.title,selector:t.selector,style:t.style,format:e,frame:this.frame,property:t.property,pseudoElement:t.pseudoElement,pseudoClass:t.pseudoClass,items:t.items,postfix:this.postfix,onChange:t.onChange})}if(t.style==="font-family"){s=new BX.Landing.UI.Field.Font({title:t.title,selector:t.selector,style:t.style,format:e,frame:this.frame,property:t.property,pseudoElement:t.pseudoElement,pseudoClass:t.pseudoClass,items:t.items,postfix:this.postfix,onChange:t.onChange})}return s}}})();
/* End */
;
; /* Start:"a:4:{s:4:"full";s:57:"/bitrix/js/landing/ui/field_factory.min.js?16322955756173";s:6:"source";s:38:"/bitrix/js/landing/ui/field_factory.js";s:3:"min";s:42:"/bitrix/js/landing/ui/field_factory.min.js";s:3:"map";s:42:"/bitrix/js/landing/ui/field_factory.map.js";}"*/
(function(){"use strict";BX.namespace("BX.Landing.UI.Factory");var e=BX.Landing.Utils.isFunction;var t=BX.Landing.Utils.assign;BX.Landing.UI.Factory.FieldFactory=function(t){this.uploadParams=t.uploadParams||{};this.linkOptions=t.linkOptions||{};this.selector=t.selector;this.onChangeHandler=e(t.onChange)?t.onChange:function(){};this.onValueChangeHandler=e(t.onValueChange)?t.onValueChange:function(){}};BX.Landing.UI.Factory.FieldFactory.prototype={create:function(e){if(e.type==="text"){return new BX.Landing.UI.Field.Text({title:e.name,selector:this.selector,content:e.value,placeholder:e.placeholder,description:e.description,textOnly:true,onInput:e.onInput,onChange:this.onChangeHandler,onValueChange:this.onValueChangeHandler,attribute:e.attribute,disabled:BX.Text.toBoolean(e.disabled)})}if(e.type==="date"){return new BX.Landing.UI.Field.Date({title:e.name,selector:this.selector,content:e.value,placeholder:e.placeholder,description:e.description,textOnly:true,onInput:e.onInput,onChange:this.onChangeHandler,onValueChange:this.onValueChangeHandler,attribute:e.attribute,time:e.time,format:e.format,disabled:BX.Text.toBoolean(e.disabled)})}if(e.type==="html"){return new BX.Landing.UI.Field.Html({title:e.name,selector:this.selector,content:e.value,placeholder:e.placeholder,onChange:this.onChangeHandler,onValueChange:this.onValueChangeHandler,attribute:e.attribute,disabled:BX.Text.toBoolean(e.disabled)})}if(!e.type||e.type==="list"||e.type==="dropdown"){return new BX.Landing.UI.Field.Dropdown({title:e.name,selector:this.selector,items:e.items,content:e.value,onChange:this.onChangeHandler,onValueChange:this.onValueChangeHandler,attribute:e.attribute,disabled:BX.Text.toBoolean(e.disabled)})}if(e.type==="image"){return new BX.Landing.UI.Field.Image({title:e.name,selector:this.selector,content:e.value,onChange:this.onChangeHandler,onValueChange:this.onValueChangeHandler,attribute:e.attribute,uploadParams:this.uploadParams,disabled:BX.Text.toBoolean(e.disabled)})}if(e.type==="icon"){e.value=BX.Landing.Utils.isPlainObject(e.value)?e.value:{};return new BX.Landing.UI.Field.Icon({title:e.name,selector:this.selector,content:{type:"icon",src:"",alt:"",classList:"classList"in e.value?e.value.classList:[]},onChange:this.onChangeHandler,onValueChange:this.onValueChangeHandler,attribute:e.attribute,disabled:BX.Text.toBoolean(e.disabled)})}if(e.type==="link"){return new BX.Landing.UI.Field.Link({title:e.name,selector:this.selector,content:e.value,onChange:this.onChangeHandler,onValueChange:this.onValueChangeHandler,attribute:e.attribute,options:this.linkOptions,disabled:BX.Text.toBoolean(e.disabled)})}if(e.type==="url"){e=t({},e,{title:e.name,content:e.value,selector:this.selector,onChange:this.onChangeHandler,onValueChange:this.onValueChangeHandler,options:this.linkOptions,textOnly:true,disabled:BX.Text.toBoolean(e.disabled)});return new BX.Landing.UI.Field.LinkURL(e)}if(e.type==="dynamic_source"){e=t({},e,{title:e.name,content:e.value,selector:this.selector,onChange:this.onChangeHandler,onValueChange:this.onValueChangeHandler,options:this.linkOptions,textOnly:true,currentPageOnly:e.currentPageOnly,allowedTypes:["block"],disableCustomURL:true,disallowType:true,customPlaceholder:BX.Landing.Loc.getMessage("LANDING_BLOCK__BLOCK_SOURCE_PLACEHOLDER"),panelTitle:BX.Landing.Loc.getMessage("LANDING_BLOCK__BLOCK_SOURCE_PLACEHOLDER"),disabled:BX.Text.toBoolean(e.disabled)});return new BX.Landing.UI.Field.LinkURL(e)}if(e.type==="slider"||e.type==="range-slider"){return new BX.Landing.UI.Field.Range({title:e.name,selector:this.selector,items:e.items,content:e.value,onChange:this.onChangeHandler,onValueChange:this.onValueChangeHandler,attribute:e.attribute,type:e.type==="range-slider"?"multiple":null,disabled:BX.Text.toBoolean(e.disabled)})}if(e.type==="palette"){return new BX.Landing.UI.Field.Color({title:e.name,selector:this.selector,items:e.items,content:e.value,onChange:this.onChangeHandler,onValueChange:this.onValueChangeHandler,attribute:e.attribute,property:e.property,disabled:BX.Text.toBoolean(e.disabled)})}if(e.type==="catalog-view"){return new BX.Landing.UI.Field.DragAndDropList({title:e.name,selector:this.selector,items:e.items,value:e.value,onChange:this.onChangeHandler,onValueChange:this.onValueChangeHandler,attribute:e.attribute,property:e.property,disabled:BX.Text.toBoolean(e.disabled)})}if(e.type==="sortable-list"){return new BX.Landing.UI.Field.SortableList({title:e.name,selector:this.selector,items:e.items,value:e.value,onChange:this.onChangeHandler,onValueChange:this.onValueChangeHandler,attribute:e.attribute,property:e.property,disabled:BX.Text.toBoolean(e.disabled)})}if(e.type==="position"){return new BX.Landing.UI.Field.Position({title:e.name,selector:this.selector,items:e.items,value:e.value,onChange:this.onChangeHandler,onValueChange:this.onValueChangeHandler,attribute:e.attribute,property:e.property,mode:e.mode,disabled:BX.Text.toBoolean(e.disabled)})}if(e.type==="checkbox"){return new BX.Landing.UI.Field.Checkbox({title:e.name,selector:this.selector,items:e.items,value:e.value,onChange:this.onChangeHandler,onValueChange:this.onValueChangeHandler,attribute:e.attribute,property:e.property,compact:e.compact,disabled:BX.Text.toBoolean(e.disabled)})}if(e.type==="radio"){return new BX.Landing.UI.Field.Radio({title:e.name,selector:this.selector,items:e.items,value:e.value,onChange:this.onChangeHandler,onValueChange:this.onValueChangeHandler,attribute:e.attribute,property:e.property,compact:e.compact,disabled:BX.Text.toBoolean(e.disabled)})}if(e.type==="multiselect"){return new BX.Landing.UI.Field.MultiSelect({title:e.name,selector:this.selector,items:e.items,value:e.value,onChange:this.onChangeHandler,onValueChange:this.onValueChangeHandler,attribute:e.attribute,property:e.property,disabled:BX.Text.toBoolean(e.disabled)})}if(e.type==="filter"){return new BX.Landing.UI.Field.Filter({title:e.name,selector:this.selector,items:e.items,value:e.value,html:e.html,filterId:e.filterId,onChange:this.onChangeHandler,onValueChange:this.onValueChangeHandler,attribute:e.attribute,property:e.property,disabled:BX.Text.toBoolean(e.disabled)})}}}})();
/* End */
;
; /* Start:"a:4:{s:4:"full";s:67:"/bitrix/js/landing/ui/card/block_preview_card.min.js?16322955671918";s:6:"source";s:48:"/bitrix/js/landing/ui/card/block_preview_card.js";s:3:"min";s:52:"/bitrix/js/landing/ui/card/block_preview_card.min.js";s:3:"map";s:52:"/bitrix/js/landing/ui/card/block_preview_card.map.js";}"*/
(function(){"use strict";BX.namespace("BX.Landing.UI.Card");var i=BX.Landing.Utils.addClass;var e=BX.Landing.Utils.append;var a=BX.Landing.Utils.create;BX.Landing.UI.Card.BlockPreviewCard=function(t){BX.Landing.UI.Card.BaseCard.apply(this,arguments);this.layout.classList.add("landing-ui-card-block-preview");this.mode=typeof t.mode==="string"?t.mode:"img";this.title=typeof t.title==="string"?t.title:"";this.imageSrc=typeof t.image==="string"?t.image:"/bitrix/images/landing/empty-preview.png";this.code=typeof t.code==="string"?t.code:"";this.isNew=typeof t.isNew==="boolean"?t.isNew:false;this.imageContainer=BX.create("div",{props:{className:"landing-ui-card-block-preview-image-container"}});this.body.appendChild(this.imageContainer);this.header.innerText=this.title;this.layout.dataset.code=this.code;this.requiresUpdates=t.requires_updates;if(this.isNew){this.title=BX.create("span",{props:{className:"landing-ui-new-inline"},text:BX.Landing.Loc.getMessage("LANDING_BLOCKS_LIST_PREVIEW_NEW")}).outerHTML+"&nbsp;"+this.title;this.header.innerHTML=this.title}if(this.mode==="background"){this.imageContainer.style.backgroundImage="url("+this.imageSrc+")"}else{var s=this.imageSrc||"/bitrix/images/landing/empty-preview.png";this.image=BX.create("img",{props:{src:s},attrs:{style:"opacity: "+(this.imageSrc?1:.6)}});this.imageContainer.appendChild(this.image)}if(this.requiresUpdates){i(this.layout,"landing-ui-requires-update");var r=a("div",{props:{className:"landing-ui-requires-update-overlay"},children:[a("div",{props:{className:"landing-ui-requires-update-overlay-footer"},html:BX.Landing.Loc.getMessage("LANDING_BLOCK_REQUIRES_UPDATE_MESSAGE")})]});e(r,this.imageContainer);this.onClickHandler=function(){}}};BX.Landing.UI.Card.BlockPreviewCard.prototype={constructor:BX.Landing.UI.Card.BlockPreviewCard,__proto__:BX.Landing.UI.Card.BaseCard.prototype}})();
/* End */
;
; /* Start:"a:4:{s:4:"full";s:59:"/bitrix/js/landing/ui/card/field_group.min.js?1632295567774";s:6:"source";s:41:"/bitrix/js/landing/ui/card/field_group.js";s:3:"min";s:45:"/bitrix/js/landing/ui/card/field_group.min.js";s:3:"map";s:45:"/bitrix/js/landing/ui/card/field_group.map.js";}"*/
(function(){"use strict";BX.namespace("BX.Landing.UI.Card");BX.Landing.UI.Card.FieldGroup=function(i){BX.Landing.UI.Card.BaseCard.apply(this,arguments);this.items=i.items;this.layout.classList.add("landing-ui-card-field-group");this.fields=new BX.Landing.Collection.BaseCollection;this.init()};BX.Landing.UI.Card.FieldGroup.createItem=function(){return BX.create("div",{props:{className:"landing-ui-card-field-group-item"}})};BX.Landing.UI.Card.FieldGroup.prototype={constructor:BX.Landing.UI.Card.FieldGroup,__proto__:BX.Landing.UI.Card.BaseCard.prototype,init:function(){this.items.forEach(function(i){var a=BX.Landing.UI.Card.FieldGroup.createItem();a.appendChild(i.layout);this.body.appendChild(a);this.fields.add(a)},this)}}})();
/* End */
;
; /* Start:"a:4:{s:4:"full";s:67:"/bitrix/js/landing/ui/card/image_preview_card.min.js?16322955671553";s:6:"source";s:48:"/bitrix/js/landing/ui/card/image_preview_card.js";s:3:"min";s:52:"/bitrix/js/landing/ui/card/image_preview_card.min.js";s:3:"map";s:52:"/bitrix/js/landing/ui/card/image_preview_card.map.js";}"*/
(function(){"use strict";BX.namespace("BX.Landing.UI.Card");BX.Landing.UI.Card.ImagePreview=function(i){BX.Landing.UI.Card.BaseCard.apply(this,arguments);this.title="title"in i?i.title:"";this.imageSrc=("image"in i?i.image:"").replace("http:","");this.code="code"in i?i.code:"";this.clickHandler="onClick"in i?i.onClick:"";this.credit="credit"in i?i.credit:null;this.dimensions="dimensions"in i?i.dimensions:{width:0,height:0};this.layout.classList.add("landing-ui-card-image-preview");this.imageContainer=BX.Landing.UI.Card.ImagePreview.createImageContainer();this.header.innerText=this.title;this.layout.dataset.code=this.code;if(this.credit){this.creditLayout=BX.create("div",{props:{className:"landing-ui-card-image-preview-credit"},children:[BX.create("a",{props:{className:"landing-ui-card-image-preview-credit-link"},attrs:{href:this.credit.link,target:"_blank",rel:"nofollow",title:BX.Landing.Loc.getMessage("LANDING_UNSPLASH_CREDIT_LABEL")+" "+this.credit.name},text:this.credit.name})]});this.layout.appendChild(this.creditLayout)}if(this.imageSrc){this.imageContainer.style.backgroundImage="url("+this.imageSrc+")";this.body.appendChild(this.imageContainer)}};BX.Landing.UI.Card.ImagePreview.createImageContainer=function(){return BX.create("div",{props:{className:"landing-ui-card-image-preview-container"}})};BX.Landing.UI.Card.ImagePreview.prototype={constructor:BX.Landing.UI.Card.ImagePreview,__proto__:BX.Landing.UI.Card.BaseCard.prototype,onClick:function(){this.clickHandler(this)}}})();
/* End */
;
; /* Start:"a:4:{s:4:"full";s:64:"/bitrix/js/landing/ui/card/add_your_first_block.js?1632295566770";s:6:"source";s:50:"/bitrix/js/landing/ui/card/add_your_first_block.js";s:3:"min";s:0:"";s:3:"map";s:0:"";}"*/
;(function() {
	"use strict";

	BX.namespace("BX.Landing.UI.Card");


	BX.Landing.UI.Card.AddYourFirstBlock = function(data)
	{
		BX.Landing.UI.Card.BaseCard.apply(this, arguments);
		this.layout.classList.add("landing-ui-card-add-first-block");
		this.subheader = BX.create("div", {props: {className: "landing-ui-card-add-first-block-subheader"}});
		this.layout.insertBefore(this.subheader, this.body);
	};

	BX.Landing.UI.Card.AddYourFirstBlock.prototype = {
		constructor: BX.Landing.UI.Card.AddYourFirstBlock,
		__proto__: BX.Landing.UI.Card.BaseCard.prototype,

		/**
		 * @inheritDoc
		 */
		show: function()
		{
			BX.Landing.Utils.Show(this.layout);
		},


		/**
		 * @inheritDoc
		 */
		hide: function()
		{
			BX.Landing.Utils.Hide(this.layout);
		}
	};
})();
/* End */
;
; /* Start:"a:4:{s:4:"full";s:72:"/bitrix/js/landing/ui/card/base_image_library_card.min.js?16322955674143";s:6:"source";s:53:"/bitrix/js/landing/ui/card/base_image_library_card.js";s:3:"min";s:57:"/bitrix/js/landing/ui/card/base_image_library_card.min.js";s:3:"map";s:57:"/bitrix/js/landing/ui/card/base_image_library_card.map.js";}"*/
(function(){"use strict";BX.namespace("BX.Landing.UI.Card");var i=BX.Landing.Utils.addClass;var e=BX.Landing.Utils.removeClass;var t=BX.Landing.Utils.slice;var a=BX.Landing.Utils.Show;var r=BX.Landing.Utils.Hide;BX.Landing.UI.Card.Library=function(i){BX.Landing.UI.Card.BaseCard.apply(this,arguments);this.layout.classList.add("landing-ui-card-library");this.searchLabel=!!i.searchLabel?i.searchLabel:"";this.searchPlaceholder=!!i.searchPlaceholder?i.searchPlaceholder:"";this.serchTipsList=!!i.searchTips?i.searchTips:[];this.onChangeHandler=typeof i.onChange==="function"?i.onChange:function(){};this.search=BX.create("div",{props:{className:"landing-ui-card-library-search"}});this.searchField=this.createSearchField();this.searchTips=this.createSearchTips();if(i.description){this.description=BX.create("div",{props:{className:"landing-ui-card-library-description"},html:i.description});this.searchField.layout.insertBefore(this.description,this.searchField.input)}this.search.appendChild(this.searchField.layout);this.search.appendChild(this.searchTips.layout);this.body.appendChild(this.search);this.loader=new BX.Loader({target:this.body});this.imageList=BX.create("div",{props:{className:"landing-ui-card-library-list"}});this.body.appendChild(this.imageList);this.bottomLoader=new BX.Loader({target:this.body,mode:"inline",offset:{left:"calc(50% - 55px)"}});this.loadMore=BX.create("div",{props:{className:"landing-ui-card-library-load-more"}});this.loadMoreButton=this.createLoadMoreButton();this.loadMore.hidden=true;this.loadMore.dataset.isShown="false";this.loadMore.appendChild(this.loadMoreButton.layout);this.body.appendChild(this.loadMore)};BX.Landing.UI.Card.Library.prototype={constructor:BX.Landing.UI.Card.Library,__proto__:BX.Landing.UI.Card.BaseCard.prototype,onSearchInput:function(i){},onTipsChange:function(i){this.searchField.setValue(i)},onLoadMore:function(){},onChange:function(i){this.onChangeHandler(i)},renderItems:function(e){e.forEach(function(e){var t=new BX.Landing.UI.Card.ImagePreview(e);this.imageList.appendChild(t.layout);requestAnimationFrame(function(){i(t.layout,"landing-ui-show")})},this)},showEmptyResult:function(){if(!this.empty){this.empty=BX.create("div",{props:{className:"landing-ui-card-library-empty"},html:BX.Landing.Loc.getMessage("LANDING_IMAGES_PANEL_EMPTY_RESULT")});BX.insertAfter(this.empty,this.imageList)}return a(this.empty)},hideEmptyResult:function(){if(this.empty){return r(this.empty)}},showError:function(){if(!this.error){this.error=BX.create("div",{props:{className:"landing-ui-card-library-error"},html:BX.Landing.Loc.getMessage("LANDING_IMAGES_PANEL_ERROR")||"Error"});BX.insertAfter(this.error,this.imageList)}this.hideEmptyResult();this.hideLoadMore();this.hideBottomLoader();this.hideLoadMore();this.hideLoader();this.clearItems();return a(this.error)},hideError:function(){if(this.error){return r(this.error)}},clearItems:function(){this.imageList.innerHTML=""},createLoadMoreButton:function(){return new BX.Landing.UI.Button.BaseButton("load_more",{text:BX.Landing.Loc.getMessage("LANDING_IMAGE_LIBRARY_LOAD_MORE"),className:"landing-ui-card-library-load-more-button",onClick:this.onLoadMore.bind(this)})},createSearchTips:function(){return new BX.Landing.UI.Field.ButtonGroup({items:this.serchTipsList,className:"landing-ui-card-library-search-tips",onChange:this.onTipsChange.bind(this)})},createSearchField:function(){var i=new BX.Landing.UI.Field.Unit({onInput:this.onSearchInput.bind(this),className:"landing-ui-card-library-search-field",placeholder:BX.Landing.Loc.getMessage("SEARCH_FIELD_PLACEHOLDER"),title:this.searchLabel});i.input.type="text";i.input.min=null;i.input.max=null;i.enableTextOnly();return i},showLoader:function(){t(this.imageList.children).forEach(function(i){e(i,"landing-ui-show")});this.loader.show()},hideLoader:function(){this.loader.hide()},showBottomLoader:function(){this.bottomLoader.show()},hideBottomLoader:function(){this.bottomLoader.hide()},showLoadMore:function(){BX.Landing.Utils.Show(this.loadMore)},hideLoadMore:function(){BX.Landing.Utils.Hide(this.loadMore)}}})();
/* End */
;
; /* Start:"a:4:{s:4:"full";s:62:"/bitrix/js/landing/ui/card/unsplash_card.min.js?16322955672529";s:6:"source";s:43:"/bitrix/js/landing/ui/card/unsplash_card.js";s:3:"min";s:47:"/bitrix/js/landing/ui/card/unsplash_card.min.js";s:3:"map";s:47:"/bitrix/js/landing/ui/card/unsplash_card.map.js";}"*/
(function(){"use strict";BX.namespace("BX.Landing.UI.Card");var t=BX.Landing.Utils.getFileExtension;function e(t){return BX.util.add_url_param(t,{utm_source:"bitrix",utm_medium:"referral",utm_campaign:"api-credit"})}function i(t,i){return{image:t.urls.small,credit:{name:t.user.name,link:e(t.user.links.html)},dimensions:{width:t.width,height:t.height},onClick:i.onPictureChange.bind(i,t)}}function n(t,e){return t.map(function(t){return i(t,e)})}BX.Landing.UI.Card.Unsplash=function(t){BX.Landing.UI.Card.Library.apply(this,arguments);this.state="popular";this.page=1;this.query="";this.onSearchWithDebounce=BX.debounce(this.onSearchWithDebounce,1e3,this);this.showPopular()};BX.Landing.UI.Card.Unsplash.prototype={constructor:BX.Landing.UI.Card.Unsplash,__proto__:BX.Landing.UI.Card.Library.prototype,onLoadMore:function(){if(this.state==="popular"){this.appendPopular()}if(this.state==="search"){this.appendSearch()}},appendSearch:function(){this.state="search";this.page+=1;this.showBottomLoader();this.hideLoadMore();var t=BX.Landing.Client.Unsplash.getInstance();t.search(this.query,this.page).then(function(t){this.hideBottomLoader();this.showLoadMore();this.renderItems(n(t,this))}.bind(this))},appendPopular:function(){this.state="popular";this.page+=1;this.query="";var t=BX.Landing.Client.Unsplash.getInstance();var e=this;this.showBottomLoader();this.hideLoadMore();t.popular(this.page).then(function(t){e.hideBottomLoader();e.showLoadMore();e.renderItems(n(t,e))})},onSearchInput:function(t){var e=t.getValue();if(!!e&&e.length){this.state="search";this.query=e;this.page=1;this.showLoader();this.onSearchWithDebounce(e);this.hideEmptyResult();return}if(this.state!=="popular"){this.showPopular()}},onSearchWithDebounce:function(t){var e=BX.Landing.Client.Unsplash.getInstance();e.search(t).then(function(t){this.hideLoader();this.clearItems();if(t.length===0){this.hideLoadMore();this.showEmptyResult();return}this.renderItems(n(t,this))}.bind(this))},showPopular:function(){this.state="popular";this.page=1;this.query="";var t=BX.Landing.Client.Unsplash.getInstance();this.showLoader();this.hideEmptyResult();t.popular().then(function(t){this.hideLoader();this.clearItems();if(t.length===0){this.hideLoadMore();this.showEmptyResult();return}this.showLoadMore();this.renderItems(n(t,this))}.bind(this))},onPictureChange:function(e){BX.Landing.Client.Unsplash.getInstance().download(e).then(function(i){this.onChange({link:i,ext:t(i),name:e.id+"."+t(i)})}.bind(this))}}})();
/* End */
;
; /* Start:"a:4:{s:4:"full";s:67:"/bitrix/js/landing/ui/card/google_images_card.min.js?16322955673828";s:6:"source";s:48:"/bitrix/js/landing/ui/card/google_images_card.js";s:3:"min";s:52:"/bitrix/js/landing/ui/card/google_images_card.min.js";s:3:"map";s:52:"/bitrix/js/landing/ui/card/google_images_card.map.js";}"*/
(function(){"use strict";BX.namespace("BX.Landing.UI.Card");var t=BX.Landing.Utils.create;var i=BX.Landing.Utils.append;var e=BX.Landing.Utils.prepend;var n=BX.Landing.Utils.remove;var t=BX.Landing.Utils.create;function s(t,i){return{image:t.link,credit:{},dimensions:{width:t.image.width,height:t.image.height},onClick:i.onPictureChange.bind(i,t.link)}}function r(t,i){return t.map(function(t){return s(t,i)})}BX.Landing.UI.Card.Google=function(t){BX.Landing.UI.Card.Library.apply(this,arguments);this.page=1;this.query="";this.loader=new BX.Loader({target:this.body,offset:{top:"12%"}});this.client=BX.Landing.Client.Google.getInstance();this.onSearchWithDebounce=BX.debounce(this.onSearchWithDebounce,1e3,this);this.showPopular()};BX.Landing.UI.Card.Google.prototype={constructor:BX.Landing.UI.Card.Google,__proto__:BX.Landing.UI.Card.Library.prototype,onLoadMore:function(){this.appendSearch()},appendSearch:function(){this.page+=1;this.state="search";this.showBottomLoader();this.hideLoadMore();this.hideError();this.client.search(this.query,this.page).then(function(t){this.hideBottomLoader();this.showLoadMore();this.renderItems(r(t,this))}.bind(this)).catch(this.showError.bind(this))},showPopular:function(){this.hideError();this.showLoader();this.query="Nature";this.state="popular";this.onSearchWithDebounce("Nature");if(BX.Landing.Client.Google.allowKeyChange){this.showSettingsButton()}else{this.hideSettingsButton()}},showSettingsButton:function(){if(!this.settingsButton){this.settingsButton=BX.create("a",{props:{className:"ui-btn ui-btn-xs ui-btn-light-border ui-btn-icon-setting landing-google-settings-button"},html:BX.Landing.Loc.getMessage("LANDING_GOOGLE_IMAGES_CHANGE_KEY_BUTTON"),events:{click:this.onSettingsClick.bind(this)}});this.body.appendChild(this.settingsButton)}this.settingsButton.hidden=false},hideSettingsButton:function(){if(this.settingsButton){this.settingsButton.hidden=true}},onSettingsClick:function(t){t.preventDefault();if(BX.Landing.Client.Google.allowKeyChange){BX.Landing.UI.Panel.GoogleImagesSettings.getInstance().show().then(function(){this.showPopular();this.searchField.input.innerHTML=""}.bind(this))}},onSearchInput:function(t){this.hideError();var i=t.getValue();if(!!i&&i.length){this.query=i;this.page=1;this.state="search";this.showLoader();this.onSearchWithDebounce(i);return}if(this.state!=="popular"){this.showPopular()}},onSearchWithDebounce:function(t){this.hideError();this.client.search(t).then(function(t){this.hideLoader();this.clearItems();this.hideEmptyResult();if(t.length===0){this.showEmptyResult();this.hideLoadMore();return}this.renderItems(r(t,this));this.showLoadMore();if(BX.Landing.Client.Google.allowKeyChange){this.showSettingsButton()}else{this.hideSettingsButton()}}.bind(this)).catch(this.showError.bind(this))},onPictureChange:function(t){var i=BX.util.add_url_param("/bitrix/tools/landing/proxy.php",{sessid:BX.bitrix_sessid(),url:t});this.onChange({link:i,ext:BX.util.getExtension(t),name:BX.Landing.Utils.getFileName(t)})},createKeyError:function(){return t("div",{props:{className:"ui-alert ui-alert-warning"},children:[t("span",{props:{className:"ui-alert-message"},html:BX.Landing.Loc.getMessage("LANDING_IMAGES_PANEL_KEY_ERROR")})]})},createError:function(){return t("div",{props:{className:"ui-alert ui-alert-danger"},children:[t("span",{props:{className:"ui-alert-message"},html:BX.Landing.Loc.getMessage("LANDING_IMAGES_PANEL_GOOGLE_ERROR")})]})},hideError:function(){BX.Landing.UI.Card.Library.prototype.hideError.call(this);if(this.error){n(this.error)}},showError:function(){if(!BX.Landing.Client.Google.key){this.error=this.createKeyError()}else{this.error=this.createError()}BX.insertAfter(this.error,this.imageList);BX.Landing.UI.Card.Library.prototype.showError.call(this)}}})();
/* End */
;
; /* Start:"a:4:{s:4:"full";s:57:"/bitrix/js/landing/ui/card/uploader_card.js?1632295567800";s:6:"source";s:43:"/bitrix/js/landing/ui/card/uploader_card.js";s:3:"min";s:0:"";s:3:"map";s:0:"";}"*/
;(function() {
	"use strict";

	BX.namespace("BX.Landing.UI.Card");


	/**
	 * Implements interface for works with uploader
	 *
	 * @extends {BX.Landing.UI.Card.Library}
	 *
	 * @param {object} data
	 *
	 * @constructor
	 */
	BX.Landing.UI.Card.Uploader = function(data)
	{
		BX.Landing.UI.Card.Library.apply(this, arguments);
		this.layout.classList.add("landing-ui-card-library-uploader");
		this.iframe = BX.create("iframe", {props: {className: "landing-ui-card-library-uploader-iframe"}});
		this.iframe.src = "/bitrix/tools/landing/uploader.php";
		this.imageList.appendChild(this.iframe);
		BX.remove(this.search);
		BX.remove(this.loadMore);
	};

	BX.Landing.UI.Card.Uploader.prototype = {
		constructor: BX.Landing.UI.Card.Uploader,
		__proto__: BX.Landing.UI.Card.Library.prototype
	};
})();
/* End */
;
; /* Start:"a:4:{s:4:"full";s:54:"/bitrix/js/landing/ui/card/loader.min.js?1632295567617";s:6:"source";s:36:"/bitrix/js/landing/ui/card/loader.js";s:3:"min";s:0:"";s:3:"map";s:0:"";}"*/
(function(){"use strict";BX.namespace("BX.Landing.UI.Card");BX.Landing.UI.Card.Loader=function(){BX.Landing.UI.Card.BaseCard.apply(this,arguments);this.layout.classList.add("landing-ui-loader");this.inner=BX.create("div",{props:{className:"landing-ui-loader-inner"},html:'<svg class="main-grid-loader-circular" viewBox="25 25 50 50">\n'+'    <circle class="main-grid-loader-path" cx="50" cy="50" r="20" fill="none" stroke-miterlimit="10"/>\n'+"</svg>"});this.body.appendChild(this.inner)};BX.Landing.UI.Card.Loader.prototype={constructor:BX.Landing.UI.Card.Loader,__proto__:BX.Landing.UI.Card.BaseCard.prototype}})();
/* End */
;
; /* Start:"a:4:{s:4:"full";s:53:"/bitrix/js/landing/ui/card/link_card.js?1632295567771";s:6:"source";s:39:"/bitrix/js/landing/ui/card/link_card.js";s:3:"min";s:0:"";s:3:"map";s:0:"";}"*/
;(function() {
	"use strict";

	BX.namespace("BX.Landing.UI.Card");


	/**
	 * @extends {BX.Landing.UI.Card.BaseCard}
	 * @param {object} data
	 * @constructor
	 */
	BX.Landing.UI.Card.Link = function(data)
	{
		BX.Landing.UI.Card.BaseCard.apply(this, arguments);
		this.layout.classList.add("landing-ui-card-link");

		if (!!data && typeof data === "object" && "child" in data && data.child)
		{
			this.layout.classList.add("landing-ui-card-link-child");
		}

		this.body.appendChild((new BX.Landing.UI.Button.BaseButton(data.button.id.toString(), {
			text: data.button.text,
			onClick: data.button.onChange
		})).layout);
	};

	BX.Landing.UI.Card.Link.prototype = {
		constructor: BX.Landing.UI.Card.Link,
		__proto__: BX.Landing.UI.Card.BaseCard.prototype
	};
})();
/* End */
;
; /* Start:"a:4:{s:4:"full";s:63:"/bitrix/js/landing/ui/card/landing_preview.min.js?1632295567805";s:6:"source";s:45:"/bitrix/js/landing/ui/card/landing_preview.js";s:3:"min";s:49:"/bitrix/js/landing/ui/card/landing_preview.min.js";s:3:"map";s:49:"/bitrix/js/landing/ui/card/landing_preview.map.js";}"*/
(function(){"use strict";BX.namespace("BX.Landing.UI.Card");BX.Landing.UI.Card.LandingPreviewCard=function(i){BX.Landing.UI.Card.BaseCard.apply(this,arguments);this.layout.classList.add("landing-ui-card-landing-preview");this.onClickHandler=typeof i.onClick==="function"?i.onClick:function(){};if(!!i.preview&&typeof i.preview==="string"){this.body.style.backgroundImage="url("+i.preview+")"}else{this.body.hidden=true}if(!!i.description&&typeof i.description==="string"){this.footer=BX.create("div",{props:{className:"landing-ui-card-footer"},text:i.description})}};BX.Landing.UI.Card.LandingPreviewCard.prototype={constructor:BX.Landing.UI.Card.LandingPreviewCard,__proto__:BX.Landing.UI.Card.BaseCard.prototype,onClick:function(){this.onClickHandler()}}})();
/* End */
;
; /* Start:"a:4:{s:4:"full";s:62:"/bitrix/js/landing/ui/card/block_html_preview.js?1632295567990";s:6:"source";s:48:"/bitrix/js/landing/ui/card/block_html_preview.js";s:3:"min";s:0:"";s:3:"map";s:0:"";}"*/
;(function() {
	"use strict";

	BX.namespace("BX.Landing.UI.Card");


	/**
	 * Implements interface of block html preview
	 * @extends {BX.Landing.UI.Card.BaseCard}
	 * @param {object} data
	 * @constructor
	 */
	BX.Landing.UI.Card.BlockHTMLPreview = function(data)
	{
		BX.Landing.UI.Card.BaseCard.apply(this, arguments);
		this.layout.classList.add("landing-ui-card-block-html-preview");
		this.onClickHandler = typeof data.onClick === "function" ? data.onClick : (function() {});
		this.block = BX.clone(document.querySelector("#block"+data.content+".block-wrapper"));

		[].slice.call(this.block.querySelectorAll(".landing-ui-panel")).forEach(BX.remove);

		this.body.appendChild(this.block);
		this.layout.addEventListener("click", this.onClick.bind(this));
	};


	BX.Landing.UI.Card.BlockHTMLPreview.prototype = {
		constructor: BX.Landing.UI.Card.BlockHTMLPreview,
		__proto__: BX.Landing.UI.Card.BaseCard.prototype,

		onClick: function()
		{
			this.onClickHandler();
		}
	};
})();
/* End */
;
; /* Start:"a:4:{s:4:"full";s:60:"/bitrix/js/landing/ui/card/icon_preview.min.js?1632295567406";s:6:"source";s:42:"/bitrix/js/landing/ui/card/icon_preview.js";s:3:"min";s:0:"";s:3:"map";s:0:"";}"*/
(function(){"use strict";BX.namespace("BX.Landing.UI.Card");BX.Landing.UI.Card.IconPreview=function(a){BX.Landing.UI.Card.BaseCard.apply(this,arguments);this.layout.classList.add("landing-ui-card-icon");this.body.innerHTML='<span class="'+a.iconClassName+'"></span>'};BX.Landing.UI.Card.IconPreview.prototype={constructor:BX.Landing.UI.Card.IconPreview,__proto__:BX.Landing.UI.Card.BaseCard.prototype}})();
/* End */
;
; /* Start:"a:4:{s:4:"full";s:57:"/bitrix/js/landing/ui/card/tab_card.min.js?16322955672439";s:6:"source";s:38:"/bitrix/js/landing/ui/card/tab_card.js";s:3:"min";s:0:"";s:3:"map";s:0:"";}"*/
(function(){"use strict";BX.namespace("BX.Landing.UI.Card");var a=BX.Landing.Utils.addClass;var i=BX.Landing.Utils.removeClass;var t=BX.Landing.Utils.hasClass;var n=BX.Landing.Utils.append;var e=BX.Landing.Utils.create;var r=BX.Landing.Utils.data;var s=BX.Landing.Utils.slice;var d=BX.Landing.Utils.Show;var c=BX.Landing.Utils.Hide;var h=BX.Landing.Collection.BaseCollection;BX.Landing.UI.Card.TabCard=function(i){BX.Landing.UI.Card.BaseCard.apply(this,arguments);a(this.layout,"landing-ui-card-tabs");this.fields=new h;this.tabs=[];this.headersArea=e("div",{props:{className:"landing-ui-card-tabs-headers"}});this.tabsArea=e("div",{props:{className:"landing-ui-card-tabs-tabs"}});n(this.headersArea,this.layout);n(this.tabsArea,this.layout);i.tabs.forEach(this.addTab,this);this.render();var t=i.tabs.find(function(a){return a.active===true});if(!t){t=i.tabs[0]}this.activateTab(t.id)};BX.Landing.UI.Card.TabCard.prototype={constructor:BX.Landing.UI.Card.TabCard,__proto__:BX.Landing.UI.Card.BaseCard.prototype,addTab:function(a){this.tabs.push({id:a.id,name:a.name,fields:a.fields.map(function(a){return a.layout})});a.fields.forEach(function(a){this.fields.push(a)},this)},render:function(){this.headersArea.innerHTML="";this.tabsArea.innerHTML="";this.tabs.forEach(function(a,i){n(this.createHeader({id:a.id,name:a.name}),this.headersArea);n(this.createTab({id:a.id,fields:a.fields}),this.tabsArea)},this)},createHeader:function(a){return e("div",{props:{className:"landing-ui-card-tabs-headers-item"},text:a.name,attrs:{"data-id":a.id},events:{click:this.onHeaderClick.bind(this)}})},onHeaderClick:function(a){a.preventDefault();if(!this.isActive(a.currentTarget)){this.activateTab(r(a.currentTarget,"data-id"))}},isActive:function(a){return t(a,"landing-ui-active")},activateTab:function(t){s(this.headersArea.children).forEach(function(a){i(a,"landing-ui-active")});s(this.tabsArea.children).forEach(function(a){i(a,"landing-ui-active");c(a)});var n=this.getHeader(t);var e=this.getTab(t);if(n){a(n,"landing-ui-active")}if(e){d(e).then(function(){a(e,"landing-ui-active")})}},createTab:function(a){return e("div",{props:{className:"landing-ui-card-tabs-tabs-item landing-ui-hide"},children:a.fields,attrs:{"data-id":a.id}})},getHeader:function(a){return s(this.headersArea.children).find(function(i){return r(i,"data-id")===a})},getTab:function(a){return s(this.tabsArea.children).find(function(i){return r(i,"data-id")===a})}}})();
/* End */
;
; /* Start:"a:4:{s:4:"full";s:68:"/bitrix/js/landing/ui/card/dynamic_fields_group.min.js?1632295567633";s:6:"source";s:50:"/bitrix/js/landing/ui/card/dynamic_fields_group.js";s:3:"min";s:54:"/bitrix/js/landing/ui/card/dynamic_fields_group.min.js";s:3:"map";s:54:"/bitrix/js/landing/ui/card/dynamic_fields_group.map.js";}"*/
(function(){"use strict";BX.namespace("BX.Landing.UI.Card");BX.Landing.UI.Card.DynamicFieldsGroup=function(a){BX.Landing.UI.Card.BaseCard.apply(this,arguments);this.layout.classList.add("landing-ui-card-dynamic-fields-group");this.fields=new BX.Landing.Collection.BaseCollection;a.items.forEach(function(a){var i=BX.Landing.UI.Card.FieldGroup.createItem();i.appendChild(a.layout);this.body.appendChild(i);this.fields.add(a)},this)};BX.Landing.UI.Card.DynamicFieldsGroup.prototype={constructor:BX.Landing.UI.Card.DynamicFieldsGroup,__proto__:BX.Landing.UI.Card.BaseCard.prototype}})();
/* End */
;
; /* Start:"a:4:{s:4:"full";s:62:"/bitrix/js/landing/ui/card/add_page_card.min.js?16322955662627";s:6:"source";s:43:"/bitrix/js/landing/ui/card/add_page_card.js";s:3:"min";s:47:"/bitrix/js/landing/ui/card/add_page_card.min.js";s:3:"map";s:47:"/bitrix/js/landing/ui/card/add_page_card.map.js";}"*/
(function(){"use strict";BX.namespace("BX.Landing.UI.Card");BX.Landing.UI.Card.AddPageCard=function(e){BX.Landing.UI.Card.BaseCard.apply(this,arguments);this.layout.classList.add("landing-ui-card-add-page");this.cache=new BX.Cache.MemoryCache;this.onSaveHandler=e.onSave||function(){};this.siteId=e.siteId;var t=BX.create("span",{props:{className:"landing-ui-card-add-page-icon"}});var a=BX.create("span",{props:{className:"landing-ui-card-add-page-text"},text:BX.Landing.Loc.getMessage("LANDING_LINK_PLACEHOLDER_NEW_PAGE")});var n=BX.create("div",{props:{className:"landing-ui-card-add-page-inner"},children:[t,a]});this.body.appendChild(n);BX.bind(this.layout,"click",this.onLayoutClick.bind(this))};BX.Landing.UI.Card.AddPageCard.prototype={constructor:BX.Landing.UI.Card.AddPageCard,__proto__:BX.Landing.UI.Card.BaseCard.prototype,onLayoutClick:function(e){e.preventDefault();BX.replace(this.layout,this.getFormLayout());var t=this.getTitleField();t.setValue("");setTimeout(function(){t.enableEdit();t.input.focus()})},getFormLayout:function(){return this.cache.remember("formLayout",function(){var e=BX.create("span",{props:{className:"ui-btn ui-btn-primary ui-btn-sm"},text:BX.Landing.Loc.getMessage("LANDING_LINK_NEW_PAGE_SAVE_BUTTON_LABEL"),events:{click:this.onSaveClick.bind(this)}});var t=BX.create("span",{props:{className:"ui-btn ui-btn-link ui-btn-sm"},text:BX.Landing.Loc.getMessage("LANDING_LINK_NEW_PAGE_CANCEL_BUTTON_LABEL"),events:{click:this.onCancelClick.bind(this)}});var a=BX.create("div",{props:{className:"landing-ui-card-add-page-form-buttons"},children:[e,t]});return BX.create("div",{props:{className:"landing-ui-card-add-page-form"},children:[this.getForm().layout,a]})}.bind(this))},onSaveClick:function(e){e.preventDefault();var t=BX.Landing.Backend.getInstance();var a=this.getTitleField().getValue();var n=BX.translit(a,{change_case:"L",replace_space:"-",replace_other:""});void t.createPage({title:a,code:n,siteId:this.siteId}).then(function(e){this.onSaveHandler(e);BX.replace(this.getFormLayout(),this.layout)}.bind(this))},onCancelClick:function(e){e.preventDefault();BX.replace(this.getFormLayout(),this.layout)},getTitleField:function(){return this.cache.remember("titleField",function(){return new BX.Landing.UI.Field.Text({title:BX.Landing.Loc.getMessage("LANDING_CREATE_PAGE_PANEL_FIELD_PAGE_TITLE"),textOnly:true})})},getForm:function(){return this.cache.remember("form",function(){return new BX.Landing.UI.Form.BaseForm({title:BX.Landing.Loc.getMessage("LANDING_LINK_PLACEHOLDER_NEW_PAGE"),fields:[this.getTitleField()]})}.bind(this))}}})();
/* End */
;
; /* Start:"a:4:{s:4:"full";s:61:"/bitrix/js/landing/ui/tool/color_picker.min.js?16322955843313";s:6:"source";s:42:"/bitrix/js/landing/ui/tool/color_picker.js";s:3:"min";s:0:"";s:3:"map";s:0:"";}"*/
(function(){"use strict";BX.namespace("BX.Landing.UI.Tool");BX.Landing.UI.Tool.ColorPicker=function(e,o){this.picker=new BX.ColorPicker({bindElement:e.layout,popupOptions:BX.Landing.UI.Tool.ColorPicker.getDefaultPopupOptions(e),onColorSelected:BX.delegate(this.onColorSelected,this),colors:BX.Landing.UI.Tool.ColorPicker.getDefaultColors()});this.button=e;this.onChangeHandler=o;this.pickerWindow=this.picker.getPopupWindow();this.range=document.createRange();BX.Landing.UI.Tool.ColorPicker.activePickers.add(this)};BX.Landing.UI.Tool.ColorPicker.getDefaultPopupOptions=function(e){return{angle:false,position:{top:0,left:0},zIndex:-678}};BX.Landing.UI.Tool.ColorPicker.activePickers=new BX.Landing.Collection.BaseCollection;BX.Landing.UI.Tool.ColorPicker.hideAll=function(){BX.Landing.UI.Tool.ColorPicker.activePickers.forEach(function(e){e.hide()})};BX.Landing.UI.Tool.ColorPicker.getDefaultColors=function(){return[["#f5f5f5","#eeeeee","#e0e0e0","#9e9e9e","#757575","#616161","#212121"],["#cfd8dc","#b0bec5","#90a4ae","#607d8b","#546e7a","#455a64","#263238"],["#d7ccc8","#bcaaa4","#a1887f","#795548","#6d4c41","#5d4037","#3e2723"],["#ffccbc","#ffab91","#ff8a65","#ff5722","#f4511e","#e64a19","#bf360c"],["#ffe0b2","#ffcc80","#ffb74d","#ff9800","#fb8c00","#f57c00","#e65100"],["#ffecb3","#ffe082","#ffd54f","#ffc107","#ffb300","#ffa000","#ff6f00"],["#fff9c4","#fff59d","#fff176","#ffeb3b","#fdd835","#fbc02d","#f57f17"],["#f0f4c3","#e6ee9c","#dce775","#cddc39","#c0ca33","#afb42b","#827717"],["#dcedc8","#c5e1a5","#aed581","#8bc34a","#7cb342","#689f38","#33691e"],["#c8e6c9","#a5d6a7","#81c784","#4caf50","#43a047","#388e3c","#1b5e20"],["#b2dfdb","#80cbc4","#4db6ac","#009688","#00897b","#00796b","#004d40"],["#b2ebf2","#80deea","#4dd0e1","#00bcd4","#00acc1","#0097a7","#006064"],["#b3e5fc","#81d4fa","#4fc3f7","#03a9f4","#039be5","#0288d1","#01579b"],["#bbdefb","#90caf9","#64b5f6","#2196f3","#1e88e5","#1976d2","#0d47a1"],["#c5cae9","#9fa8da","#7986cb","#3f51b5","#3949ab","#303f9f","#1a237e"],["#d1c4e9","#b39ddb","#9575cd","#673ab7","#5e35b1","#512da8","#311b92"],["#e1bee7","#ce93d8","#ba68c8","#9c27b0","#8e24aa","#7b1fa2","#4a148c"],["#f8bbd0","#f48fb1","#f06292","#e91e63","#d81b60","#c2185b","#880e4f"],["#ffcdd2","#ef9a9a","#e57373","#f44336","#e53935","#d32f2f","#b71c1c"]].map(function(e,o,n){return n.map(function(e){return e[o]})})};BX.Landing.UI.Tool.ColorPicker.prototype={adjustPosition:function(e){BX.DOM.read(function(){var o=this.pickerWindow.popupContainer.getBoundingClientRect();var n=this.button.layout.parentNode.getBoundingClientRect();var t=Math.abs(o.width-n.width);var i={};i["left"]=n.left+t/2+"px";if(e==="fixed"){var c=this.button.layout.getBoundingClientRect();i["top"]=c.bottom+"px";i["position"]="fixed"}else{var f=BX.pos(this.button.layout);i["top"]=f.bottom+"px"}BX.DOM.write(function(){for(var e in i){this.pickerWindow.popupContainer.style[e]=i[e]}}.bind(this))}.bind(this))},show:function(e){this.picker.open();this.adjustPosition(e);this.range=document.getSelection().getRangeAt(0)},hide:function(){this.picker.close()},isShown:function(){return this.pickerWindow.isShown()},onColorSelected:function(e,o){document.getSelection().removeAllRanges();document.getSelection().addRange(this.range);if(BX.type.isFunction(this.onChangeHandler)){this.onChangeHandler(e,o)}}}})();
/* End */
;
; /* Start:"a:4:{s:4:"full";s:64:"/bitrix/js/landing/ui/tool/auto-font-scale.min.js?16322955841240";s:6:"source";s:45:"/bitrix/js/landing/ui/tool/auto-font-scale.js";s:3:"min";s:0:"";s:3:"map";s:0:"";}"*/
(function(){"use strict";BX.namespace("BX.Landing.UI.Tool");var t=BX.Landing.Utils.bind;var n=BX.Landing.Utils.slice;var i=BX.Landing.Utils.onCustomEvent;var e=BX.width(window);function o(){return BX.width(window)<1100}function s(){var t=e!==BX.width(window);e=BX.width(window);return t}BX.Landing.UI.Tool.autoFontScale=function(n){this.entries=n.map(this.createEntry,this);t(window,"resize",this.onResize.bind(this,false));t(window,"orientationchange",this.onResize.bind(this,true));i("BX.Landing.Block:init",this.onAddBlock.bind(this));this.adjust(true)};BX.Landing.UI.Tool.autoFontScale.prototype={onResize:function(t){this.adjust(t);clearTimeout(this.falbackTimeoutId);this.falbackTimeoutId=setTimeout(function(){this.adjust(true)}.bind(this),250)},adjust:function(t){if(t===true||s()){var n=o();this.entries.forEach(function(t){if(n){t.adjust()}else{t.resetSize()}})}},createEntry:function(t){return new BX.Landing.UI.Tool.autoFontScaleEntry(t)},addElements:function(t){t.forEach(function(t){var n=this.entries.some(function(n){return n.element===t});if(!n){this.entries.push(this.createEntry(t))}},this)},onAddBlock:function(t){var i=n(t.block.querySelectorAll("h1, h2, h3, h4, h5, [data-auto-font-scale]"));this.addElements(i)}}})();
/* End */
;
; /* Start:"a:4:{s:4:"full";s:70:"/bitrix/js/landing/ui/tool/auto-font-scale-entry.min.js?16322955842061";s:6:"source";s:51:"/bitrix/js/landing/ui/tool/auto-font-scale-entry.js";s:3:"min";s:0:"";s:3:"map";s:0:"";}"*/
(function(){"use strict";BX.namespace("BX.Landing.UI.Tool");var t=BX.Landing.Utils.createRangeFromNode;var i=BX.Landing.Utils.isNumber;var e=BX.Landing.Utils.rect;BX.Landing.UI.Tool.autoFontScaleEntry=function(t){this.element=t;this.minSize=8;this.maxSize=parseInt(BX.style(t,"font-size"));this.maxLetterSpacing=parseFloat(BX.style(t,"letter-spacing"));this.maxLetterSpacing=i(this.maxLetterSpacing)?this.maxLetterSpacing:0;this.minLetterSpacing=0;this.paddings=30;this.changed=false};BX.Landing.UI.Tool.autoFontScaleEntry.prototype={setFontSize:function(t){t=Math.min(Math.max(t,this.minSize),this.maxSize);this.element.style.cssText="font-size: "+t+"px!important;"},setLetterSpacing:function(t){t=Math.min(Math.max(t,this.minLetterSpacing),this.maxLetterSpacing);this.element.style.letterSpacing=t+"px"},resetSize:function(){this.element.style.fontSize=null;this.element.style.letterSpacing=null;this.element.style.display=null},adjust:function(){if(this.changed||this.getRangeWidth()>this.getParentWidth()){this.changed=true;var t=this.getParentWidth()*this.getFontSizeRatio();var i=this.getParentWidth()*this.getLetterSpacingRatio();this.setFontSize(t-i);this.setLetterSpacing(i)}if(!this.changed&&this.maxSize>40&&BX.width(window)<=600){this.setFontSize(this.getParentWidth()*this.getBaseFontSizeRatio())}},getCurrentSize:function(){return parseInt(BX.style(this.element,"font-size"))},getFontSizeRatio:function(){if(i(this.ratio)){return this.ratio}this.ratio=this.maxSize/this.getRangeWidth();return this.ratio},getLetterSpacingRatio:function(){if(i(this.letterSpacingRatio)){return this.letterSpacingRatio}this.letterSpacingRatio=this.maxLetterSpacing/this.getRangeWidth();return this.letterSpacingRatio},getBaseFontSizeRatio:function(){if(i(this.baseFontSizeRatio)){return this.baseFontSizeRatio}this.baseFontSizeRatio=this.getCurrentSize()/(600-this.paddings);return this.baseFontSizeRatio},getRangeWidth:function(){return e(t(this.element)).width},getParentWidth:function(){return Math.min(e(this.element).width,BX.width(window)-this.paddings)}}})();
/* End */
;
; /* Start:"a:4:{s:4:"full";s:57:"/bitrix/js/landing/ui/tool/suggests.min.js?16322955841716";s:6:"source";s:38:"/bitrix/js/landing/ui/tool/suggests.js";s:3:"min";s:42:"/bitrix/js/landing/ui/tool/suggests.min.js";s:3:"map";s:42:"/bitrix/js/landing/ui/tool/suggests.map.js";}"*/
(function(){"use strict";BX.namespace("BX.Landing.UI.Tool");var t=BX.Landing.Utils.isEmpty;var n=BX.Landing.Utils.isNumber;var i=BX.Landing.Utils.bind;var e=BX.Landing.Utils.unbind;var s=BX.Landing.Utils.proxy;var o=BX.Landing.Utils.create;BX.Landing.UI.Tool.Suggest=function(){this.lastElement=null;this.popup=null;this.popupTimeout=0;i(document,"mousedown",s(this.hide,this))};BX.Landing.UI.Tool.Suggest.instance=null;BX.Landing.UI.Tool.Suggest.getInstance=function(){return BX.Landing.UI.Tool.Suggest.instance||(BX.Landing.UI.Tool.Suggest.instance=new BX.Landing.UI.Tool.Suggest)};BX.Landing.UI.Tool.Suggest.prototype={createContent:function(n){var i=[];if(!t(n.name)){i.push(o("div",{props:{className:"landing-ui-field-link-media-help-popup-content-title"},html:n.name||n.title}))}if(!t(n.description)){i.push(o("div",{props:{className:"landing-ui-field-link-media-help-popup-content-content"},html:n.description}))}return o("div",{props:{className:"landing-ui-field-link-media-help-popup-content"},children:i})},show:function(t,e){if(this.popup===null){this.popup=new BX.Main.Popup({id:"landing_suggests_popup",autoHide:false,offsetLeft:-20,offsetTop:11,angle:{offset:74}})}if(!n(e.angleOffset)){e.angleOffset=74}this.popup.setBindElement(t);this.popup.setContent(this.createContent(e));this.lastElement=t;this.popupTimeout=o.apply(this);function o(){return setTimeout(function(){i(t,"mouseleave",s(this.hide,this));this.popup.show();this.popup.setAngle({offset:e.angleOffset,position:"top"})}.bind(this),200)}},hide:function(){if(this.popup&&this.popup.isShown()){e(this.lastElement,"mouseleave",s(this.hide,this));clearTimeout(this.popupTimeout);this.popup.close()}}}})();
/* End */
;
; /* Start:"a:4:{s:4:"full";s:61:"/bitrix/js/landing/ui/tool/font-manager.min.js?16322955842545";s:6:"source";s:42:"/bitrix/js/landing/ui/tool/font-manager.js";s:3:"min";s:0:"";s:3:"map";s:0:"";}"*/
(function(){"use strict";BX.namespace("BX.Landing.UI.Tool");var n=BX.Landing.Utils.slice;var t=BX.Landing.Utils.arrayUnique;var e=BX.Landing.Utils.data;var a=BX.Landing.Utils.isString;var o=BX.Landing.Utils.create;var r=BX.Landing.Utils.append;var i=BX.Landing.Utils.remove;BX.Landing.UI.Tool.FontManager=function(){};BX.Landing.UI.Tool.FontManager.getInstance=function(){return BX.Landing.UI.Tool.FontManager.instance||(BX.Landing.UI.Tool.FontManager.instance=new BX.Landing.UI.Tool.FontManager)};function s(n){return"g-font-"+n.toLowerCase().trim().replace(/ /g,"-")}function d(n,t){var e={serif:'"#font#", serif',"sans-serif":'"#font#", sans-serif',display:'"#font#", cursive',handwriting:'"#font#", cursive',monospace:'"#font#", monospace'};return e[t]?e[t].replace("#font#",n):'"'+n+'"'}BX.Landing.UI.Tool.FontManager.prototype={getLoadedFonts:function(){var t=n(document.head.querySelectorAll('[data-font*="g-font-"]'));return t.map(function(n){return{className:e(n,"data-font"),element:n,CSSDeclaration:document.head.querySelector('[data-id*="'+e(n,"data-font")+'"]'),protected:e(n,"data-protected")||false}})},getUsedLoadedFonts:function(){var n=[];var t=this.getLoadedFonts().filter(function(n){return!n.protected});if(t.length){var e=this.getAllUsedFonts();t.forEach(function(t){var a=e.some(function(n){return t.className===n});if(a){n.push(t)}})}return n},getAllUsedFonts:function(e){e=e||document.body;var o=n(e.querySelectorAll("*:not(img)"));var r=[];o.forEach(function(n){var t=BX.style(n,"font-family");if(a(t)){t=t.replace(/['|"]/g,"");r.push(s(t.split(",")[0]))}});return t(r)},isLoaded:function(n){return this.getLoadedFonts().some(function(t){return t.className===n})},addFont:function(n,t){var e=!!t?t.document:document;return new Promise(function(t){if(!this.isLoaded(n.className)){var a=o("link",{attrs:{rel:"stylesheet",href:n.href,"data-font":n.className,media:"async@load"},events:{load:function(){this.media="all";t()},error:function(){t()}}});var i=o("style",{attrs:{"data-id":n.className},text:"."+n.className+" { font-family: "+d(n.family,n.category)+"; }"});r(a,e.head);r(i,e.head)}else{t()}}.bind(this))},getUnusedLoadedFonts:function(){var n=[];var t=this.getLoadedFonts().filter(function(n){return!n.protected});if(t.length){var e=this.getAllUsedFonts();t.forEach(function(t){var a=e.some(function(n){return t.className===n});if(!a){n.push(t)}})}return n},removeUnusedFonts:function(){this.getUnusedLoadedFonts().forEach(function(n){if(n.element){i(n.element)}if(n.CSSDeclaration){i(n.CSSDeclaration)}})}}})();
/* End */
;
; /* Start:"a:4:{s:4:"full";s:63:"/bitrix/js/landing/ui/adapter/css-property.min.js?1632295565408";s:6:"source";s:45:"/bitrix/js/landing/ui/adapter/css-property.js";s:3:"min";s:0:"";s:3:"map";s:0:"";}"*/
(function(){"use strict";BX.namespace("BX.Landing.UI.Adapter");BX.Landing.UI.Adapter.CSSProperty=function(){};function r(){return BX.browser.IsFirefox()}BX.Landing.UI.Adapter.CSSProperty.get=function(n){if(r()&&n in BX.Landing.UI.Adapter.CSSProperty.map){n=BX.Landing.UI.Adapter.CSSProperty.map[n]}return n};BX.Landing.UI.Adapter.CSSProperty.map={"border-color":r()?"border-bottom-color":"border-color"}})();
/* End */
;
; /* Start:"a:4:{s:4:"full";s:59:"/bitrix/js/landing/ui/button/action_button.js?1632295565588";s:6:"source";s:45:"/bitrix/js/landing/ui/button/action_button.js";s:3:"min";s:0:"";s:3:"map";s:0:"";}"*/
;(function() {
	"use strict";

	BX.namespace("BX.Landing.UI.Button");


	/**
	 * Implements concrete interface of action button
	 *
	 * @extends {BX.Landing.UI.Button.BaseButton}
	 *
	 * @param {?string} id
	 * @param {?object} [options]
	 * @constructor
	 */
	BX.Landing.UI.Button.Action = function(id, options)
	{
		BX.Landing.UI.Button.BaseButton.apply(this, arguments);
		this.layout.classList.add("landing-ui-button-action");
	};


	BX.Landing.UI.Button.Action.prototype = {
		constructor: BX.Landing.UI.Button.Action,
		__proto__: BX.Landing.UI.Button.BaseButton.prototype
	};
})();
/* End */
;
; /* Start:"a:4:{s:4:"full";s:57:"/bitrix/js/landing/ui/button/plus_button.js?1632295566662";s:6:"source";s:43:"/bitrix/js/landing/ui/button/plus_button.js";s:3:"min";s:0:"";s:3:"map";s:0:"";}"*/
;(function() {
	"use strict";

	BX.namespace("BX.Landing.UI.Button");


	/**
	 * Implements concrete interface of plus button
	 *
	 * @extends {BX.Landing.UI.Button.BaseButton}
	 *
	 * @param {?string} id
	 * @param {?object} [options]
	 * @constructor
	 */
	BX.Landing.UI.Button.Plus = function(id, options)
	{
		BX.Landing.UI.Button.BaseButton.apply(this, arguments);
		this.buttonClass = "landing-ui-button-plus";
		this.init();
	};


	BX.Landing.UI.Button.Plus.prototype = {
		constructor: BX.Landing.UI.Button.Plus,
		__proto__: BX.Landing.UI.Button.BaseButton.prototype,

		init: function()
		{
			this.layout.classList.add(this.buttonClass);
		}
	};
})();
/* End */
;
; /* Start:"a:4:{s:4:"full";s:66:"/bitrix/js/landing/ui/button/editor_action_button.js?1632295566920";s:6:"source";s:52:"/bitrix/js/landing/ui/button/editor_action_button.js";s:3:"min";s:0:"";s:3:"map";s:0:"";}"*/
;(function() {
	"use strict";

	BX.namespace("BX.Landing.UI.Button");


	/**
	 * Implements concrete interface of editor action panel button
	 *
	 * @extends {BX.Landing.UI.Button.BaseButton}
	 *
	 * @param {?string} id - Action id for document.execCommand
	 * @param {?object} [options]
	 * @constructor
	 */
	BX.Landing.UI.Button.EditorAction = function(id, options)
	{
		BX.Landing.UI.Button.BaseButton.apply(this, arguments);
		this.layout.classList.add("landing-ui-button-editor-action");
		this.init();
	};


	BX.Landing.UI.Button.EditorAction.prototype = {
		constructor: BX.Landing.UI.Button.EditorAction,
		__proto__: BX.Landing.UI.Button.BaseButton.prototype,

		init: function()
		{
			this.on("click", this.onClick, this);
		},

		onClick: function(event)
		{
			event.preventDefault();
			event.stopPropagation();

			document.execCommand(this.id);
			BX.Landing.UI.Tool.ColorPicker.hideAll();
		}
	};
})();
/* End */
;
; /* Start:"a:4:{s:4:"full";s:63:"/bitrix/js/landing/ui/button/design_button.min.js?1632295566299";s:6:"source";s:45:"/bitrix/js/landing/ui/button/design_button.js";s:3:"min";s:0:"";s:3:"map";s:0:"";}"*/
(function(){"use strict";BX.namespace("BX.Landing.UI.Button");BX.Landing.UI.Button.Design=function(n,t){BX.Landing.UI.Button.EditorAction.apply(this,arguments)};BX.Landing.UI.Button.Design.prototype={constructor:BX.Landing.UI.Button.Design,__proto__:BX.Landing.UI.Button.EditorAction.prototype}})();
/* End */
;
; /* Start:"a:4:{s:4:"full";s:63:"/bitrix/js/landing/ui/button/color_button.min.js?16322955661132";s:6:"source";s:44:"/bitrix/js/landing/ui/button/color_button.js";s:3:"min";s:0:"";s:3:"map";s:0:"";}"*/
(function(){"use strict";BX.namespace("BX.Landing.UI.Button");BX.Landing.UI.Button.ColorAction=function(n,o){BX.Landing.UI.Button.EditorAction.apply(this,arguments);this.layout.classList.add("landing-ui-button-editor-action-color");this.colorPicker=new BX.Landing.UI.Tool.ColorPicker(this,this.onColorSelected.bind(this));BX.Landing.UI.Button.ColorAction.instances.push(this)};BX.Landing.UI.Button.ColorAction.instances=[];BX.Landing.UI.Button.ColorAction.hideAll=function(){BX.Landing.UI.Button.ColorAction.instances.forEach(function(n){n.colorPicker.hide()})};BX.Landing.UI.Button.ColorAction.prototype={constructor:BX.Landing.UI.Button.ColorAction,__proto__:BX.Landing.UI.Button.EditorAction.prototype,onClick:function(n){n.preventDefault();n.stopPropagation();var o=BX.Landing.UI.Panel.EditorPanel.getInstance().isFixed()?"fixed":"relative";if(!this.colorPicker.isShown()){this.colorPicker.show(o);BX.Landing.UI.Button.FontAction.hideAll();if(BX.Landing.UI.Button.ChangeTag.menu){BX.Landing.UI.Button.ChangeTag.menu.close()}}else{this.colorPicker.hide()}},onColorSelected:function(n){document.execCommand(this.id,false,n)}}})();
/* End */
;
; /* Start:"a:4:{s:4:"full";s:63:"/bitrix/js/landing/ui/button/block_card_action.js?1632295566594";s:6:"source";s:49:"/bitrix/js/landing/ui/button/block_card_action.js";s:3:"min";s:0:"";s:3:"map";s:0:"";}"*/
;(function() {
	"use strict";

	BX.namespace("BX.Landing.UI.Button");


	/**
	 * Implements concrete interface of card action button
	 *
	 * @extends {BX.Landing.UI.Button.Action}
	 *
	 * @param {?string} id
	 * @param {?object} [options]
	 * @constructor
	 */
	BX.Landing.UI.Button.CardAction = function(id, options)
	{
		BX.Landing.UI.Button.Action.apply(this, arguments);
		this.layout.classList.add("landing-ui-button-card-action");
	};


	BX.Landing.UI.Button.CardAction.prototype = {
		constructor: BX.Landing.UI.Button.Action,
		__proto__: BX.Landing.UI.Button.Action.prototype
	};
})();
/* End */
;
; /* Start:"a:4:{s:4:"full";s:61:"/bitrix/js/landing/ui/button/create_link.min.js?1632295566640";s:6:"source";s:43:"/bitrix/js/landing/ui/button/create_link.js";s:3:"min";s:0:"";s:3:"map";s:0:"";}"*/
(function(){"use strict";BX.namespace("BX.Landing.UI.Button");BX.Landing.UI.Button.CreateLink=function(t,n){BX.Landing.UI.Button.EditorAction.apply(this,arguments);this.editPanel=null};BX.Landing.UI.Button.CreateLink.prototype={constructor:BX.Landing.UI.Button.CreateLink,__proto__:BX.Landing.UI.Button.EditorAction.prototype,onClick:function(t){t.preventDefault();t.stopPropagation();this.textNode=BX.Landing.Block.Node.Text.currentNode;this.textField=BX.Landing.UI.Field.BaseField.currentField;if(!!this.textField&&this.textField.isEditable()){this.textNode=this.textField}BX.Landing.UI.Panel.Link.getInstance().show(this.textNode)}}})();
/* End */
;
; /* Start:"a:4:{s:4:"full";s:62:"/bitrix/js/landing/ui/button/font_action.min.js?16322955663200";s:6:"source";s:43:"/bitrix/js/landing/ui/button/font_action.js";s:3:"min";s:47:"/bitrix/js/landing/ui/button/font_action.min.js";s:3:"map";s:47:"/bitrix/js/landing/ui/button/font_action.map.js";}"*/
(function(){"use strict";BX.namespace("BX.Landing.UI.Button");BX.Landing.UI.Button.FontAction=function(t,n){BX.Landing.UI.Button.EditorAction.apply(this,arguments);this.layout.classList.add("landing-ui-button-editor-action-font");this.content=BX.create("div",{props:{className:"landing-ui-button-editor-action-font-popup-content"}});this.fontSize=new BX.Landing.UI.Field.Range({title:BX.Landing.Loc.getMessage("EDITOR_ACTION_FIELD_LABEL_FONT_SIZE"),items:Array.apply(null,{length:160}).map(function(t,n){return{value:n,name:n}}),jsDD:window.jsDD,property:"font-size",onDragStart:this.onDragStart.bind(this),onDragEnd:this.onDragEnd.bind(this),onChange:this.onChange.bind(this)});BX.Landing.UI.Button.FontAction.instances.push(this)};BX.Landing.UI.Button.FontAction.instances=[];BX.Landing.UI.Button.FontAction.hideAll=function(){BX.Landing.UI.Button.FontAction.instances.forEach(function(t){if(t.popup){t.popup.close()}})};BX.Landing.UI.Button.FontAction.prototype={constructor:BX.Landing.UI.Button.FontAction,__proto__:BX.Landing.UI.Button.EditorAction.prototype,onDragStart:function(){this.popup.popupContainer.classList.add("landing-ui-fade")},onDragEnd:function(){this.popup.popupContainer.classList.remove("landing-ui-fade")},onChange:function(t,n,o,i){if(i==="font-size"){var e=window.getSelection();var a=e.getRangeAt(0);var p=BX.Landing.UI.Panel.EditorPanel.getInstance().currentElement.contains(a.startContainer);if(e.toString()&&p){document.execCommand("fontSize",false,t);a=window.getSelection().getRangeAt(0);var s=a.startContainer.parentNode;s.style.fontSize=t+"px"}}},onClick:function(t){t.preventDefault();t.stopPropagation();if(!this.popup){this.popup=this.createPopup();this.popup.popupContainer.addEventListener("click",this.onPopupClick.bind(this));this.popup.popupContainer.classList.add("landing-ui-button-editor-action-font-popup");this.popup.contentContainer.appendChild(this.content);this.content.appendChild(this.fontSize.layout)}if(!this.popup.isShown()){this.popup.show();var n=BX.Landing.UI.Panel.EditorPanel.getInstance().isFixed()?"fixed":"relative";this.adjustPosition(n);BX.Landing.UI.Button.ColorAction.hideAll();var o=window.getSelection();var i=o.getRangeAt(0);var e=BX.Landing.UI.Panel.EditorPanel.getInstance().currentElement.contains(i.startContainer);if(e){var a=i.startContainer.parentNode;var p=parseInt(getComputedStyle(a).getPropertyValue("font-size"));this.fontSize.setValue(p,true)}}else{this.popup.close()}},onPopupClick:function(t){t.stopPropagation()},adjustPosition:function(t){BX.DOM.read(function(){var n=this.popup.popupContainer.getBoundingClientRect();var o=this.layout.parentNode.getBoundingClientRect();var i=Math.abs(n.width-o.width);var e={};e["left"]=o.left+i/2+"px";if(t==="fixed"){var a=this.layout.getBoundingClientRect();e["top"]=a.bottom+"px";e["position"]="fixed"}else{var p=BX.pos(this.layout);e["top"]=p.bottom+"px"}BX.DOM.write(function(){for(var t in e){this.popup.popupContainer.style[t]=e[t]}}.bind(this))}.bind(this))},createPopup:function(){return new BX.PopupWindow("landing_font_editor_popup",this.layout,{autoHide:true,closeByEsc:true,noAllPaddings:true,width:463,zIndex:-979})}}})();
/* End */
;
; /* Start:"a:4:{s:4:"full";s:61:"/bitrix/js/landing/ui/button/change_tag.min.js?16322955661933";s:6:"source";s:42:"/bitrix/js/landing/ui/button/change_tag.js";s:3:"min";s:46:"/bitrix/js/landing/ui/button/change_tag.min.js";s:3:"map";s:46:"/bitrix/js/landing/ui/button/change_tag.map.js";}"*/
(function(){"use strict";BX.namespace("BX.Landing.UI.Button");var n=BX.Landing.Utils.proxy;BX.Landing.UI.Button.ChangeTag=function(t,e){BX.Landing.UI.Button.EditorAction.apply(this,arguments);this.layout.classList.add("landing-ui-button-editor-change-tag");this.onChangeHandler=e.onChange;this.value=e.html;this.onChange=n(this.onChange,this)};BX.Landing.UI.Button.ChangeTag.prototype={constructor:BX.Landing.UI.Button.ChangeTag,__proto__:BX.Landing.UI.Button.EditorAction.prototype,onClick:function(n){n.preventDefault();n.stopPropagation();if(!this.menu){this.menu=new BX.PopupMenuWindow({id:"change-tag-name-menu-"+BX.Text.getRandom(),bindElement:this.layout,zIndex:-678,items:[new BX.PopupMenuItem({id:"H1",text:"H1",onclick:this.onChange}),new BX.PopupMenuItem({id:"H2",text:"H2",onclick:this.onChange}),new BX.PopupMenuItem({id:"H3",text:"H3",onclick:this.onChange}),new BX.PopupMenuItem({id:"H4",text:"H4",onclick:this.onChange}),new BX.PopupMenuItem({id:"H5",text:"H5",onclick:this.onChange}),new BX.PopupMenuItem({id:"H6",text:"H6",onclick:this.onChange})]});this.activateItem(this.value)}BX.Landing.UI.Button.ChangeTag.menu=this.menu;this.menu.popupWindow.adjustPosition({forceTop:true});if(this.menu.popupWindow.isShown()){this.menu.close()}else{this.menu.show()}BX.Landing.UI.Tool.ColorPicker.hideAll()},activateItem:function(n){if(this.menu){var t=this.menu.menuItems.find(function(n){return n.layout.text.innerHTML.includes("strong")},this);var e=this.menu.menuItems.find(function(t){return t.id===n},this);if(t){t.layout.text.innerHTML=t.layout.text.innerText}if(e){e.layout.text.innerHTML="<strong>"+e.layout.text.innerText+"</strong>";this.layout.innerHTML='<span class="landing-ui-icon-editor-'+e.id.toLowerCase()+'"></span>'}}},onChange:function(n,t){n.stopPropagation();this.activateItem(t.id);t.menuWindow.close();if(this.onChangeHandler){this.onChangeHandler(t.id)}}}})();
/* End */
;
; /* Start:"a:4:{s:4:"full";s:72:"/bitrix/js/landing/ui/button/text_background_color.min.js?16322955661250";s:6:"source";s:53:"/bitrix/js/landing/ui/button/text_background_color.js";s:3:"min";s:57:"/bitrix/js/landing/ui/button/text_background_color.min.js";s:3:"map";s:57:"/bitrix/js/landing/ui/button/text_background_color.map.js";}"*/
(function(){"use strict";BX.namespace("BX.Landing.UI.Button");BX.Landing.UI.Button.TextBackgroundAction=function(n,t){BX.Landing.UI.Button.EditorAction.apply(this,arguments);this.layout.classList.add("landing-ui-button-editor-action-background");this.colorPicker=new BX.Landing.UI.Tool.ColorPicker(this,this.onColorSelected.bind(this));BX.Landing.UI.Button.TextBackgroundAction.instances.push(this)};BX.Landing.UI.Button.TextBackgroundAction.instances=[];BX.Landing.UI.Button.TextBackgroundAction.hideAll=function(){BX.Landing.UI.Button.TextBackgroundAction.instances.forEach(function(n){n.colorPicker.hide()})};BX.Landing.UI.Button.TextBackgroundAction.prototype={constructor:BX.Landing.UI.Button.TextBackgroundAction,__proto__:BX.Landing.UI.Button.EditorAction.prototype,onClick:function(n){n.preventDefault();n.stopPropagation();var t=BX.Landing.UI.Panel.EditorPanel.getInstance().isFixed()?"fixed":"relative";if(!this.colorPicker.isShown()){this.colorPicker.show(t);BX.Landing.UI.Button.FontAction.hideAll();if(BX.Landing.UI.Button.ChangeTag.menu){BX.Landing.UI.Button.ChangeTag.menu.close()}}else{this.colorPicker.hide()}},onColorSelected:function(n){document.execCommand(this.id,false,n)}}})();
/* End */
;
; /* Start:"a:4:{s:4:"full";s:61:"/bitrix/js/landing/ui/button/create_page.min.js?1632295566560";s:6:"source";s:43:"/bitrix/js/landing/ui/button/create_page.js";s:3:"min";s:47:"/bitrix/js/landing/ui/button/create_page.min.js";s:3:"map";s:47:"/bitrix/js/landing/ui/button/create_page.map.js";}"*/
(function(){"use strict";BX.namespace("BX.Landing.UI.Button");BX.Landing.UI.Button.CreatePage=function(t,n){BX.Landing.UI.Button.EditorAction.apply(this,arguments);this.editPanel=null};BX.Landing.UI.Button.CreatePage.prototype={constructor:BX.Landing.UI.Button.CreatePage,__proto__:BX.Landing.UI.Button.EditorAction.prototype,onClick:function(t){t.preventDefault();t.stopPropagation();var n=document.getSelection().getRangeAt(0);var e=n.toString();void BX.Landing.UI.Panel.CreatePage.getInstance().show({title:e})}}})();
/* End */
;
; /* Start:"a:4:{s:4:"full";s:66:"/bitrix/js/landing/ui/panel/base_button_panel.min.js?1632295578874";s:6:"source";s:48:"/bitrix/js/landing/ui/panel/base_button_panel.js";s:3:"min";s:0:"";s:3:"map";s:0:"";}"*/
(function(){"use strict";BX.namespace("BX.Landing.UI.Panel");BX.Landing.UI.Panel.BaseButtonPanel=function(t,n){BX.Landing.UI.Panel.BasePanel.apply(this,arguments);this.layout.classList.add(n);this.buttons=new BX.Landing.UI.Collection.ButtonCollection};BX.Landing.UI.Panel.BaseButtonPanel.prototype={constructor:BX.Landing.UI.Panel.BaseButtonPanel,__proto__:BX.Landing.UI.Panel.BasePanel.prototype,addButton:function(t){if(!!t&&t instanceof BX.Landing.UI.Button.BaseButton){if(!this.getButton(t.id)){this.buttons.push(t);this.appendContent(t.layout)}}},prependButton:function(t){if(!!t&&t instanceof BX.Landing.UI.Button.BaseButton){if(!this.getButton(t.id)){this.buttons.unshift(t);this.prependContent(t.layout)}}},removeButton:function(t){var n=this.buttons.get(t);if(!!n){this.buttons.remove(n);BX.remove(n.layout)}},getButton:function(t){return this.buttons.get(t)}}})();
/* End */
;
; /* Start:"a:4:{s:4:"full";s:63:"/bitrix/js/landing/ui/panel/editor_panel.min.js?163229557910841";s:6:"source";s:43:"/bitrix/js/landing/ui/panel/editor_panel.js";s:3:"min";s:47:"/bitrix/js/landing/ui/panel/editor_panel.min.js";s:3:"map";s:47:"/bitrix/js/landing/ui/panel/editor_panel.map.js";}"*/
(function(){"use strict";BX.namespace("BX.Landing.UI.Panel");var t=BX.Landing.Utils.proxy;var n=BX.Landing.Utils.getSelectedElement;BX.Landing.UI.Panel.EditorPanel=function(){BX.Landing.UI.Panel.BaseButtonPanel.apply(this,arguments);this.layout.classList.add("landing-ui-panel-editor");this.position="absolute";this.currentElement=null;l(this);r(this);g(this);this.rect=this.layout.getBoundingClientRect()};BX.Landing.UI.Panel.EditorPanel.instance=null;BX.Landing.UI.Panel.EditorPanel.getInstance=function(){if(!BX.Landing.UI.Panel.EditorPanel.instance){BX.Landing.UI.Panel.EditorPanel.instance=new BX.Landing.UI.Panel.EditorPanel}return BX.Landing.UI.Panel.EditorPanel.instance};var e=null;var i=null;function a(t){i=t;e=e||d.bind(null,t);document.addEventListener("keydown",s);window.addEventListener("resize",e);try{document.addEventListener("scroll",e,{passive:true})}catch(t){document.addEventListener("scroll",e)}}function o(){document.removeEventListener("keydown",s);window.removeEventListener("resize",e);try{document.removeEventListener("scroll",e,{passive:true})}catch(t){document.removeEventListener("scroll",e)}}function s(t){if(t.which===9&&t.target.nodeName!=="LI"){t.preventDefault();if(!t.shiftKey){document.execCommand("indent")}else{document.execCommand("outdent")}}if(t.which===13&&t.target.nodeName!=="LI"&&t.target.nodeName!=="UL"&&t.metaKey===true){t.preventDefault();var n=window.getSelection().getRangeAt(0);var e=BX.create("br");n.deleteContents();n.insertNode(e);n=document.createRange();n.setStartAfter(e);n.collapse(true);var a=window.getSelection();a.removeAllRanges();a.addRange(n)}setTimeout(function(){BX.Landing.UI.Panel.EditorPanel.getInstance().adjustPosition(i)},10)}function d(){BX.Landing.UI.Panel.EditorPanel.getInstance().adjustPosition(i)}function l(t){var n=new BX.Landing.UI.Button.EditorAction("drag",{html:'<strong class="landing-ui-drag">&nbsp;</strong>',attrs:{title:BX.Landing.Loc.getMessage("LANDING_TITLE_OF_EDITOR_ACTION_DRAG")}});n.layout.onbxdrag=o.bind(this);n.layout.onbxdragstop=s.bind(this);jsDD.registerObject(n.layout);t.prependButton(n);var e;var i;var a;function o(n,o){if(!e){var s=BX.pos(jsDD.current_node);i=Math.max(Math.abs(n-s.left),0);a=Math.max(Math.abs(o-s.top),0);e=true}BX.DOM.write(function(){t.layout.classList.remove("landing-ui-transition");t.layout.style.top=o-a+"px";t.layout.style.left=n-i+"px"}.bind(this))}function s(){e=false;t.layout.classList.add("landing-ui-transition")}}function r(n){n.addButton(new BX.Landing.UI.Button.EditorAction("bold",{html:'<span class="landing-ui-icon-editor-bold"></span>',attrs:{title:BX.Landing.Loc.getMessage("LANDING_TITLE_OF_EDITOR_ACTION_BOLD")},onClick:t(n.adjustButtonsState,n)}));n.addButton(new BX.Landing.UI.Button.EditorAction("italic",{html:'<span class="landing-ui-icon-editor-italic"></span>',attrs:{title:BX.Landing.Loc.getMessage("LANDING_TITLE_OF_EDITOR_ACTION_ITALIC")},onClick:t(n.adjustButtonsState,n)}));n.addButton(new BX.Landing.UI.Button.EditorAction("underline",{html:'<span class="landing-ui-icon-editor-underline"></span>',attrs:{title:BX.Landing.Loc.getMessage("LANDING_TITLE_OF_EDITOR_ACTION_UNDERLINE")},onClick:t(n.adjustButtonsState,n)}));n.addButton(new BX.Landing.UI.Button.EditorAction("strikeThrough",{html:'<span class="landing-ui-icon-editor-strike"></span>',attrs:{title:BX.Landing.Loc.getMessage("LANDING_TITLE_OF_EDITOR_ACTION_STRIKE")},onClick:t(n.adjustButtonsState,n)}));n.addButton(new BX.Landing.UI.Button.EditorAction("justifyLeft",{html:'<span class="landing-ui-icon-editor-left"></span>',attrs:{title:BX.Landing.Loc.getMessage("LANDING_TITLE_OF_EDITOR_ACTION_ALIGN_LEFT")},onClick:t(n.adjustButtonsState,n)}));n.addButton(new BX.Landing.UI.Button.EditorAction("justifyCenter",{html:'<span class="landing-ui-icon-editor-center"></span>',attrs:{title:BX.Landing.Loc.getMessage("LANDING_TITLE_OF_EDITOR_ACTION_ALIGN_CENTER")},onClick:t(n.adjustButtonsState,n)}));n.addButton(new BX.Landing.UI.Button.EditorAction("justifyRight",{html:'<span class="landing-ui-icon-editor-right"></span>',attrs:{title:BX.Landing.Loc.getMessage("LANDING_TITLE_OF_EDITOR_ACTION_ALIGN_RIGHT")},onClick:t(n.adjustButtonsState,n)}));n.addButton(new BX.Landing.UI.Button.EditorAction("justifyFull",{html:'<span class="landing-ui-icon-editor-justify"></span>',attrs:{title:BX.Landing.Loc.getMessage("LANDING_TITLE_OF_EDITOR_ACTION_ALIGN_JUSTIFY")},onClick:t(n.adjustButtonsState,n)}));n.addButton(new BX.Landing.UI.Button.CreateLink("createLink",{html:'<span class="landing-ui-icon-editor-link"></span>',attrs:{title:BX.Landing.Loc.getMessage("LANDING_TITLE_OF_EDITOR_ACTION_CREATE_LINK")},onClick:t(n.adjustButtonsState,n)}));var e=BX.Landing.Env.getInstance().getOptions().rights;if(e&&e.includes("edit")){n.addButton(new BX.Landing.UI.Button.CreatePage("createPage",{html:'<span class="landing-ui-icon-editor-new-page"></span>',attrs:{title:BX.Landing.Loc.getMessage("LANDING_TITLE_OF_EDITOR_ACTION_CREATE_PAGE")},onClick:t(n.adjustButtonsState,n)}))}n.addButton(new BX.Landing.UI.Button.EditorAction("unlink",{html:'<span class="landing-ui-icon-editor-unlink"></span>',attrs:{title:BX.Landing.Loc.getMessage("LANDING_TITLE_OF_EDITOR_ACTION_UNLINK")},onClick:t(n.adjustButtonsState,n)}));n.addButton(new BX.Landing.UI.Button.EditorAction("insertUnorderedList",{html:'<span class="fa fa-list-ul"></span>',attrs:{title:BX.Landing.Loc.getMessage("LANDING_TITLE_OF_EDITOR_ACTION_UL")},onClick:t(n.adjustButtonsState,n)}));n.addButton(new BX.Landing.UI.Button.EditorAction("insertOrderedList",{html:'<span class="fa fa-list-ol"></span>',attrs:{title:BX.Landing.Loc.getMessage("LANDING_TITLE_OF_EDITOR_ACTION_OL")},onClick:t(n.adjustButtonsState,n)}));n.addButton(new BX.Landing.UI.Button.EditorAction("removeFormat",{html:'<span class="landing-ui-icon-editor-eraser"></span>',attrs:{title:BX.Landing.Loc.getMessage("LANDING_TITLE_OF_EDITOR_ACTION_CLEAR")},onClick:t(n.adjustButtonsState,n)}));n.addButton(new BX.Landing.UI.Button.ColorAction("foreColor",{text:BX.Landing.Loc.getMessage("EDITOR_ACTION_SET_FORE_COLOR"),attrs:{title:BX.Landing.Loc.getMessage("LANDING_TITLE_OF_EDITOR_ACTION_COLOR")},onClick:t(n.adjustButtonsState,n)}));n.addButton(new BX.Landing.UI.Button.TextBackgroundAction("hiliteColor",{html:'<span class="landing-ui-icon-editor-text-background"></span>',attrs:{title:BX.Landing.Loc.getMessage("LANDING_TITLE_OF_EDITOR_ACTION_TEXT_BACKGROUND")},onClick:t(n.adjustButtonsState,n)}))}var u={top:0,left:0};function c(t,n,e){var i=n.getBoundingClientRect();var a=i.left+i.width/2-t.rect.width/2;var o=i.top-t.rect.height-4;var s="absolute";var d=n.closest(".landing-ui-panel-content-body-content");if(d){o=d.getBoundingClientRect().top+5;s="fixed"}else{if(o<=5&&(i.bottom>window.innerHeight||i.height>window.innerHeight/1.5)){o=5;s="fixed"}else{if(o>5){o+=window.pageYOffset}else{o=i.bottom+4+window.pageYOffset}}}if(a+t.rect.width>window.innerWidth-20){a-=a+t.rect.width-(window.innerWidth-20)}a=Math.max(20,a);if(u.top!==o||u.left!==a||e){BX.DOM.write(function(){t.layout.style.position=s;t.layout.style.top=o+"px";t.layout.style.left=a+"px"});u.top=o;u.left=a;_(t)}}function g(t){document.body.appendChild(t.layout)}var L=null;function B(t){L=t.target}var h=false;function I(t){h=L!==t.target}function f(t){if(h){t.preventDefault();t.stopPropagation()}}function E(t){if(t.popup){t.popup.close()}if(t.menu){t.menu.close()}}function _(t){t.buttons.forEach(E);if(t.additionalButtons){t.additionalButtons.forEach(E)}BX.Landing.UI.Tool.ColorPicker.hideAll()}BX.Landing.UI.Panel.EditorPanel.prototype={constructor:BX.Landing.UI.Panel.EditorPanel,__proto__:BX.Landing.UI.Panel.BaseButtonPanel.prototype,show:function(n,e,i){this.currentElement=n;if(this.additionalButtons){this.additionalButtons.forEach(function(t){this.buttons.remove(t);E(t);BX.remove(t.layout)},this);this.additionalButtons=null}if(i){this.additionalButtons=i;this.additionalButtons.forEach(function(t){if(t.insertAfter){var n=this.layout.querySelector('[data-id="'+t.insertAfter+'"]');if(n){BX.insertAfter(t.layout,n);this.buttons.add(t)}}else{this.addButton(t)}},this)}if(!this.isShown()){BX.onCustomEvent("BX.Landing.Editor:enable",[n]);document.addEventListener("mousedown",B,true);document.addEventListener("mouseup",I,true);document.addEventListener("click",f,true);this.currentElement.addEventListener("click",t(this.adjustButtonsState,this),true);setTimeout(function(){this.layout.classList.add("landing-ui-transition")}.bind(this),100)}BX.Landing.UI.Panel.BaseButtonPanel.prototype.show.call(this,arguments);BX.DOM.write(function(){this.rect=this.layout.getBoundingClientRect();this.adjustPosition(n,e,true)}.bind(this));a(n);this.adjustButtonsState()},hide:function(){if(this.isShown()){BX.onCustomEvent("BX.Landing.Editor:disable",[null]);document.removeEventListener("mousedown",B,true);document.removeEventListener("mouseup",I,true);document.removeEventListener("click",f,true);this.currentElement.removeEventListener("click",t(this.adjustButtonsState,this),true);setTimeout(function(){this.rect=this.layout.getBoundingClientRect();this.layout.classList.remove("landing-ui-transition")}.bind(this),100)}BX.Landing.UI.Panel.BaseButtonPanel.prototype.hide.call(this,arguments);o()},adjustButtonsState:function(){var t=function(t){return(!t?"de":"")+"activate"};var n=function(t){return this.buttons.get(t)}.bind(this);requestAnimationFrame(function(){var e=this.getFormat();void(n("bold")&&n("bold")[t(e.bold)]());void(n("italic")&&n("italic")[t(e.italic)]());void(n("underline")&&n("underline")[t(e.underline)]());void(n("strikeThrough")&&n("strikeThrough")[t(e.strike)]());void(n("justifyLeft")&&n("justifyLeft")[t(e.align==="left")]());void(n("justifyCenter")&&n("justifyCenter")[t(e.align==="center")]());void(n("justifyRight")&&n("justifyRight")[t(e.align==="right")]());void(n("justifyFull")&&n("justifyFull")[t(e.align==="justify")]())}.bind(this))},getFormat:function(){var t=n();var e={};if(t){var i=getComputedStyle(t);switch(i.getPropertyValue("font-weight")){case"bold":case"bolder":case"500":case"600":case"700":case"800":case"900":e["bold"]=true;break}if(i.getPropertyValue("font-style")==="italic"){e["italic"]=true}if(i.getPropertyValue("text-decoration").includes("underline")||i.getPropertyValue("text-decoration-line").includes("underline")){e["underline"]=true}if(i.getPropertyValue("text-decoration").includes("line-through")||i.getPropertyValue("text-decoration-line").includes("line-through")){e["strike"]=true}var a=i.getPropertyValue("text-align")||"left";if(a.match(/[left|center|rigth|custiffy]/)){e["align"]=a}if(this.currentElement.nodeName==="A"||this.currentElement.closest("a")){e["link"]=true}}return e},adjustPosition:function(t,n,e){c(this,t,e)},isFixed:function(){return this.position==="fixed-top"||this.position==="fixed-right"}}})();
/* End */
;
; /* Start:"a:4:{s:4:"full";s:64:"/bitrix/js/landing/ui/panel/small_editor_panel.js?16322955831474";s:6:"source";s:49:"/bitrix/js/landing/ui/panel/small_editor_panel.js";s:3:"min";s:0:"";s:3:"map";s:0:"";}"*/
;(function() {
	"use strict";

	BX.namespace("BX.Landing.UI.Panel");


	BX.Landing.UI.Panel.SmallEditorPanel = function()
	{
		BX.Landing.UI.Panel.EditorPanel.apply(this, arguments);
		this.layout.classList.remove("landing-ui-hide");
		this.layout.classList.add("landing-ui-panel-small-content-edit");
	};


	/**
	 * Shows panel for text node
	 * @static
	 * @param {BX.Landing.Block.Node} [node]
	 */
	BX.Landing.UI.Panel.SmallEditorPanel.show = function(node)
	{
		BX.Landing.UI.Panel.SmallEditorPanel.getInstance().show(node);
	};


	/**
	 * Hides panel
	 * @static
	 */
	BX.Landing.UI.Panel.SmallEditorPanel.hide = function()
	{
		BX.Landing.UI.Panel.SmallEditorPanel.getInstance().hide();
	};


	/**
	 * Stores instance of BX.Landing.UI.Panel.SmallEditorPanel
	 * @static
	 * @type {?BX.Landing.UI.Panel.SmallEditorPanel}
	 */
	BX.Landing.UI.Panel.SmallEditorPanel.instance = null;


	/**
	 * Gets instance on BX.Landing.UI.Panel.SmallEditorPanel
	 * @static
	 * @return {BX.Landing.UI.Panel.SmallEditorPanel}
	 */
	BX.Landing.UI.Panel.SmallEditorPanel.getInstance = function()
	{
		if (!BX.Landing.UI.Panel.SmallEditorPanel.instance)
		{
			BX.Landing.UI.Panel.SmallEditorPanel.instance = new BX.Landing.UI.Panel.SmallEditorPanel();
		}

		return BX.Landing.UI.Panel.SmallEditorPanel.instance;
	};


	BX.Landing.UI.Panel.SmallEditorPanel.prototype = {
		constructor: BX.Landing.UI.Panel.SmallEditorPanel,
		__proto__: BX.Landing.UI.Panel.EditorPanel.prototype
	}
})();
/* End */
;
; /* Start:"a:4:{s:4:"full";s:68:"/bitrix/js/landing/ui/panel/edit_content_panel.min.js?16322955791811";s:6:"source";s:49:"/bitrix/js/landing/ui/panel/edit_content_panel.js";s:3:"min";s:53:"/bitrix/js/landing/ui/panel/edit_content_panel.min.js";s:3:"map";s:53:"/bitrix/js/landing/ui/panel/edit_content_panel.map.js";}"*/
(function(){"use strict";BX.namespace("BX.Landing.UI.Panel");var t=BX.Landing.UI.Button.SidebarButton;BX.Landing.UI.Panel.ContentEdit=function(t,n){BX.Landing.UI.Panel.Content.apply(this,arguments);this.layout.classList.add("landing-ui-panel-content-edit")};BX.Landing.UI.Panel.ContentEdit.showedPanel=null;BX.Landing.UI.Panel.ContentEdit.prototype={constructor:BX.Landing.UI.Panel.ContentEdit,__proto__:BX.Landing.UI.Panel.Content.prototype,show:function(){BX.Landing.UI.Panel.ContentEdit.showedPanel=this;if(BX.Landing.UI.Panel.StylePanel.getInstance().isShown()){BX.Landing.UI.Panel.StylePanel.getInstance().hide().then(function(){BX.Landing.UI.Panel.Content.prototype.show.call(this)}.bind(this))}else{BX.Landing.UI.Panel.Content.prototype.show.call(this)}},appendForm:function(n){this.forms.add(n);this.content.appendChild(n.getNode());if(n.title){var e=new t(n.code,{text:n.title,empty:!n.fields.length,onClick:function(){this.scrollTo(n.layout)}.bind(this)});this.sidebarButtons.add(e);this.sidebar.appendChild(e.layout)}n.fields.forEach(function(n){if(n.title){var e=new t(n.selector,{text:n.title,child:true,onClick:function(t){t.preventDefault();t.stopPropagation();this.scrollTo(n.layout)}.bind(this)});this.sidebarButtons.add(e);this.sidebar.appendChild(e.layout)}},this)},replaceForm:function(n,e){this.forms.remove(n);this.forms.add(e);BX.replace(n.getNode(),e.getNode());var i=this.sidebarButtons.get(n.code);if(i){var o=new t(e.code,{text:e.title,empty:e.type==="dynamicCards"||!e.fields.length,onClick:function(){this.scrollTo(e.layout)}.bind(this)});BX.replace(i.layout,o.layout);this.sidebarButtons.remove(i);this.sidebarButtons.add(o)}},compact:function(t){this.layout.classList[t?"add":"remove"]("landing-ui-panel-content-edit-compact")}}})();
/* End */
;
; /* Start:"a:4:{s:4:"full";s:59:"/bitrix/js/landing/ui/panel/preview_panel.js?16322955834501";s:6:"source";s:44:"/bitrix/js/landing/ui/panel/preview_panel.js";s:3:"min";s:0:"";s:3:"map";s:0:"";}"*/
;(function() {
	"use strict";

	BX.namespace("BX.Landing.UI.Panel");


	/**
	 * Implements preview panel interface
	 *
	 * @extends {BX.Landing.UI.Panel.Content}
	 *
	 * @inheritDoc
	 * @constructor
	 */
	BX.Landing.UI.Panel.Preview = function(id, data)
	{
		this.size = null;
		this.headerButtons = new BX.Landing.UI.Collection.ButtonCollection();
		this.iframe = BX.Landing.UI.Panel.Preview.createIframe();
		this.iframe.dataset.postfix = "";
		BX.Landing.UI.Panel.Content.apply(this, arguments);

		// Add class names
		this.layout.classList.add("landing-ui-panel-preview");
		this.overlay.classList.add("landing-ui-panel-preview-overlay");

		// Bind on iFrame events
		this.iframe.addEventListener("load", this.onFrameLoad.bind(this));
		this.iframe.style.opacity = 0;

		BX.remove(this.footer);
	};


	BX.Landing.UI.Panel.Preview.createIframe = function()
	{
		return BX.create("iframe", {props: {
			className: "landing-ui-panel-preview-iframe",
			src: BX.util.add_url_param(window.location.toString(), {"landing_mode": "style"})
		}});
	};


	BX.Landing.UI.Panel.Preview.prototype = {
		constructor: BX.Landing.UI.Panel.Preview,
		__proto__: BX.Landing.UI.Panel.Content.prototype,
		superclass: BX.Landing.UI.Panel.Content.prototype,

		init: function()
		{
			// Init super class
			this.superclass.init.call(this);

			// Add desktop button
			this.addHeaderButton(new BX.Landing.UI.Button.BaseButton("desktop_button", {
				className: ["landing-ui-button-desktop", "active"],
				onClick: this.onDesktopSizeChange.bind(this)
			}));

			// Add tablet button
			this.addHeaderButton(new BX.Landing.UI.Button.BaseButton("tablet_button", {
				className: "landing-ui-button-tablet",
				onClick: this.onTabletSizeChange.bind(this)
			}));

			// Add mobile button
			this.addHeaderButton(new BX.Landing.UI.Button.BaseButton("mobile_button", {
				className: "landing-ui-button-mobile",
				onClick: this.onMobileSizeChange.bind(this)
			}));


			// Create custom size field
			this.size = new BX.Landing.UI.Field.Unit({
				selector: "size",
				content: "0",
				unit: "px",
				onInput: this.onSizeInput.bind(this),
				className: "landing-ui-panel-preview-size",
				min: 320,
				max: 12000,
				step: 1
			});

			this.title.appendChild(this.size.layout);

			// Add iFrame to content area of panel
			this.content.appendChild(this.iframe);
		},


		/**
		 * Handles size input event
		 */
		onSizeInput: function(field)
		{
			requestAnimationFrame(function() {
				this.iframe.style.width = field.getValue() + "px";
			}.bind(this));
		},


		/**
		 * Handles iFrame load event
		 */
		onFrameLoad: function()
		{
			this.size.setValue(this.body.getBoundingClientRect().width);
			this.iframe.contentWindow.scrollTo(0, window.scrollY);
			requestAnimationFrame(function() {
				this.iframe.style.opacity = 1;
			}.bind(this));
		},


		/**
		 * Handles desktop size change event
		 */
		onDesktopSizeChange: function()
		{
			this.headerButtons.forEach(function(button) {
				button.layout.classList.remove("active");
			});

			this.headerButtons.get("desktop_button").layout.classList.add("active");
			this.size.setValue(this.body.getBoundingClientRect().width);
			this.iframe.dataset.postfix = "";
		},


		/**
		 * Handles tablet size change event
		 */
		onTabletSizeChange: function()
		{
			this.headerButtons.forEach(function(button) {
				button.layout.classList.remove("active");
			});

			this.headerButtons.get("tablet_button").layout.classList.add("active");
			this.size.setValue(767);
			this.iframe.dataset.postfix = "--md";
		},


		/**
		 * Handles mobile size change event
		 */
		onMobileSizeChange: function()
		{
			this.headerButtons.forEach(function(button) {
				button.layout.classList.remove("active");
			});

			this.headerButtons.get("mobile_button").layout.classList.add("active");
			this.size.setValue(479);
			this.iframe.dataset.postfix = "--sm";
		},


		/**
		 * Shows preview panel
		 */
		show: function()
		{
			this.superclass.show.call(this);
			document.documentElement.style.overflow = "hidden";
			this.iframe.contentWindow.scrollTo(0, window.scrollY);
		},


		/**
		 * Hides preview panel
		 */
		hide: function()
		{
			this.superclass.hide.call(this);
			document.documentElement.style.overflow = null;
		},


		/**
		 * Appends header button
		 * @param {BX.Landing.UI.Button.BaseButton} button
		 */
		addHeaderButton: function(button)
		{
			this.title.appendChild(button.layout);
			this.headerButtons.add(button);
		}
	};
})();
/* End */
;
; /* Start:"a:4:{s:4:"full";s:64:"/bitrix/js/landing/ui/panel/unsplash_panel.min.js?16322955833305";s:6:"source";s:45:"/bitrix/js/landing/ui/panel/unsplash_panel.js";s:3:"min";s:49:"/bitrix/js/landing/ui/panel/unsplash_panel.min.js";s:3:"map";s:49:"/bitrix/js/landing/ui/panel/unsplash_panel.map.js";}"*/
(function(){"use strict";BX.namespace("BX.Landing.UI.Panel");BX.Landing.UI.Panel.Unsplash=function(n){if(BX.Landing.UI.Panel.Unsplash.instance){return BX.Landing.UI.Panel.Unsplash.instance}BX.Landing.UI.Panel.Content.apply(this,arguments);this.onChangeHandler=null;this.onSearchWithDebounce=BX.debounce(this.onSearchWithDebounce,1e3,this);this.layout.classList.add("landing-ui-panel-unsplash");this.searchContainer=BX.create("div",{props:{className:"landing-ui-panel-unsplash-search-container"}});this.loader=BX.create("div",{props:{className:"landing-ui-panel-unsplash-search-loader-container"}});this.loader.appendChild(BX.create("div",{props:{className:"landing-ui-panel-unsplash-search-loader"}}));(this.searchInputField=new BX.Landing.UI.Field.Unit({onInput:this.onSearchInput.bind(this),className:"landing-ui-panel-unsplash-search-field",placeholder:BX.Landing.Loc.getMessage("UNSPLASH_SEARCH_FIELD_PLACEHOLDER"),title:BX.Landing.Loc.getMessage("UNSPLASH_SEARCH_FIELD_LABEL")})).enableTextOnly();this.searchContainer.appendChild(this.searchInputField.layout);this.content.appendChild(this.searchContainer);this.searchInputField.input.type="text";this.searchInputField.input.min=null;this.searchInputField.input.max=null;this.content.appendChild(this.loader);this.imagesList=BX.create("div",{props:{className:"landing-ui-panel-unsplash-images-list"}});this.content.appendChild(this.imagesList);document.body.appendChild(this.layout);this.makeLayouts()};BX.Landing.UI.Panel.Unsplash.instance=null;BX.Landing.UI.Panel.Unsplash.getInstance=function(){if(!BX.Landing.UI.Panel.Unsplash.instance){BX.Landing.UI.Panel.Unsplash.instance=new BX.Landing.UI.Panel.Unsplash("unsplash")}return BX.Landing.UI.Panel.Unsplash.instance};BX.Landing.UI.Panel.Unsplash.prototype={constructor:BX.Landing.UI.Panel.Unsplash,__proto__:BX.Landing.UI.Panel.Content.prototype,show:function(n){BX.Landing.UI.Panel.Content.prototype.show.call(this);this.onChangeHandler=n},hide:function(){BX.Landing.UI.Panel.Content.prototype.hide.call(this);this.onChangeHandler=null},showLoader:function(){this.imagesList.innerHTML="";this.loader.classList.add(this.classShow)},hideLoader:function(){this.loader.classList.remove(this.classShow)},isLoaderShown:function(){return this.loader.classList.contains(this.classShow)},onSearchInput:function(n){var a=n.getValue();if(!!a&&a.length){this.showLoader();this.onSearchWithDebounce(a)}else{this.makeLayouts()}},onSearchWithDebounce:function(n){var a=new BX.Landing.Client.Unsplash.getInstance;a.search(n).then(function(n){this.hideLoader();this.imagesList.innerHTML="";n.forEach(function(n){var a=new BX.Landing.UI.Card.ImagePreview({image:n.urls.small,onClick:function(){this.onChange(n.urls.full)}.bind(this)});this.imagesList.appendChild(a.layout)},this)}.bind(this))},makeLayouts:function(){var n=new BX.Landing.Client.Unsplash.getInstance;this.showLoader();n.popular().then(function(n){this.hideLoader();this.imagesList.innerHTML="";n.forEach(function(n){var a=new BX.Landing.UI.Card.ImagePreview({image:n.urls.small,onClick:function(){this.onChange(n.urls.full)}.bind(this)});this.imagesList.appendChild(a.layout)},this)}.bind(this))},onChange:function(n){if(typeof this.onChangeHandler==="function"){this.onChangeHandler(n)}this.hide()}}})();
/* End */
;
; /* Start:"a:4:{s:4:"full";s:61:"/bitrix/js/landing/ui/panel/image_panel.min.js?16322955833377";s:6:"source";s:42:"/bitrix/js/landing/ui/panel/image_panel.js";s:3:"min";s:46:"/bitrix/js/landing/ui/panel/image_panel.min.js";s:3:"map";s:46:"/bitrix/js/landing/ui/panel/image_panel.map.js";}"*/
(function(){"use strict";BX.namespace("BX.Landing.UI.Panel");BX.Landing.UI.Panel.Image=function(n){BX.Landing.UI.Panel.Content.apply(this,arguments);this.layout.classList.add("landing-ui-panel-image");this.onChangeHandler=function(){};this.headerButtonsField=this.createHeaderButtons();this.cards=new BX.Landing.Collection.BaseCollection;this.overlay.classList.add("landing-ui-panel-image");this.title.appendChild(this.headerButtonsField.layout);document.body.appendChild(this.layout);this.title.innerText=BX.Landing.Loc.getMessage("LANDING_IMAGE_LIBRARY_PANEL_TITLE")};BX.Landing.UI.Panel.Image.getInstance=function(){if(!BX.Landing.UI.Panel.Image.instance){BX.Landing.UI.Panel.Image.instance=new BX.Landing.UI.Panel.Image("image_panel")}return BX.Landing.UI.Panel.Image.instance};BX.Landing.UI.Panel.Image.instance=null;BX.Landing.UI.Panel.Image.prototype={constructor:BX.Landing.UI.Panel.Image,__proto__:BX.Landing.UI.Panel.Content.prototype,onChangeView:function(n){if(n==="unsplash"){this.showUnsplash()}if(n==="google"){this.showGoogle()}if(n==="disk"){this.showUploader()}},showUploader:function(){var n=this.cards.get("uploader");if(!n){n=new BX.Landing.UI.Card.Uploader({id:"uploader"});this.appendCard(n);this.cards.add(n)}this.hideAll();n.show()},showGoogle:function(){var n=this.cards.get("google");if(!n){n=new BX.Landing.UI.Card.Google({id:"google",searchLabel:BX.Landing.Loc.getMessage("GOOGLE_SEARCH_FIELD_LABEL"),searchTips:[{name:"Nature",value:"Nature"},{name:"People",value:"People"},{name:"Buildings",value:"Buildings"},{name:"Sunset",value:"Sunset"}],description:BX.Landing.Loc.getMessage("LANDING_IMAGE_GOOGLE_DESCRIPTION"),onChange:this.onChange.bind(this),params:this.uploadParams});this.appendCard(n);this.cards.add(n)}this.hideAll();n.showPopular();n.show()},showUnsplash:function(){var n=this.cards.get("unsplash");if(!n){n=new BX.Landing.UI.Card.Unsplash({id:"unsplash",searchLabel:BX.Landing.Loc.getMessage("UNSPLASH_SEARCH_FIELD_LABEL"),searchTips:[{name:"Nature",value:"Nature"},{name:"People",value:"People"},{name:"Buildings",value:"Buildings"},{name:"Sunset",value:"Sunset"}],description:BX.Landing.Loc.getMessage("LANDING_IMAGE_UNSPLASH_DESCRIPTION"),onChange:this.onChange.bind(this)});this.appendCard(n);this.cards.add(n)}this.hideAll();n.show()},hideAll:function(){this.cards.forEach(function(n){n.layout.hidden=true})},createHeaderButtons:function(){return new BX.Landing.UI.Field.ButtonGroup({items:[{name:BX.Landing.Loc.getMessage("LANDING_CONTENT_EDIT_IMAGE_HEADER_BUTTON_UNSPLASH"),value:"unsplash",active:true},{name:BX.Landing.Loc.getMessage("LANDING_CONTENT_EDIT_IMAGE_HEADER_BUTTON_GOOGLE"),value:"google"},{name:BX.Landing.Loc.getMessage("LANDING_CONTENT_EDIT_IMAGE_HEADER_BUTTON_FROM_DISK"),value:"disk"}],onChange:this.onChangeView.bind(this)})},show:function(n,e,a,i){this.uploadParams=i||{};this.externalLoader=a;this.params=e;this.onChangeView(n);BX.Landing.UI.Panel.Content.prototype.show.call(this);return new Promise(function(n){this.promiseResolve=n}.bind(this))},hide:function(){this.params=null;BX.Landing.UI.Panel.Content.prototype.hide.call(this)},onChange:function(n){this.externalLoader.show();BX.Landing.Utils.urlToBlob(n.link).then(function(e){e.lastModifiedDate=new Date;e.name=(n.name+"").split("?")[0];return e}).then(this.promiseResolve.bind(this));this.hide()}}})();
/* End */
;
; /* Start:"a:4:{s:4:"full";s:59:"/bitrix/js/landing/ui/panel/url_list.min.js?163229558410701";s:6:"source";s:39:"/bitrix/js/landing/ui/panel/url_list.js";s:3:"min";s:43:"/bitrix/js/landing/ui/panel/url_list.min.js";s:3:"map";s:43:"/bitrix/js/landing/ui/panel/url_list.map.js";}"*/
(function(){"use strict";BX.namespace("BX.Landing.UI.Panel");var e=BX.Landing.Utils.addClass;var n=BX.Landing.Utils.removeClass;var i=BX.Landing.Utils.append;var t=BX.Landing.Utils.onCustomEvent;var a=BX.Landing.Utils.setTextContent;var r=BX.Landing.Utils.create;var s=BX.Landing.Utils.style;var d=BX.Landing.Utils.isNumber;var o=BX.Landing.Utils.isString;var h=BX.Landing.Utils.isPlainObject;var c=BX.Landing.Utils.isArray;var l=BX.Landing.Utils.addQueryParams;var u="landing";var g="block";var L="system";var f="crmFormPopup";var p="crmPhone";var I=BX.Landing.UI.Button.SidebarButton;BX.Landing.UI.Panel.URLList=function(n,a){BX.Landing.UI.Panel.Content.apply(this,arguments);e(this.layout,"landing-ui-panel-url-list");e(this.overlay,"landing-ui-panel-url-list-overlay");e(this.overlay,"landing-ui-hide");this.overlay.hidden=true;this.overlay.dataset.isShown="false";t("BX.Landing.Block:init",this.refresh.bind(this));t("BX.Landing.Block:remove",this.refresh.bind(this));i(this.layout,document.body);this.loader=new BX.Loader({target:this.content});this.promiseResolve=function(){};this.layout.hidden=true;this.isNeedLoad=true;this.cache=new BX.Cache.MemoryCache};BX.Landing.UI.Panel.URLList.getInstance=function(){if(!BX.Landing.UI.Panel.URLList.instance){BX.Landing.UI.Panel.URLList.instance=new BX.Landing.UI.Panel.URLList("url_list")}return BX.Landing.UI.Panel.URLList.instance};BX.Landing.UI.Panel.URLList.instance=null;BX.Landing.UI.Panel.URLList.prototype={constructor:BX.Landing.UI.Panel.URLList,__proto__:BX.Landing.UI.Panel.Content.prototype,refresh:function(){this.isNeedLoad=true},showLoader:function(){this.loader.show(this.content)},show:function(e,i){this.showOptions=i;BX.Landing.UI.Panel.Content.prototype.show.call(this);this.clear();this.showLoader();if(e===u){n(this.layout,"landing-ui-panel-url-list-blocks");a(this.title,i.panelTitle||BX.Landing.Loc.getMessage("LANDING_LINKS_LANDINGS_TITLE"));this.showSites(i)}else if(e===g){a(this.title,i.panelTitle||BX.Landing.Loc.getMessage("LANDING_LINKS_BLOCKS_TITLE"));this.showBlocks(i)}else if(e===f){a(this.title,i.panelTitle||BX.Landing.Loc.getMessage("LANDING_LINKS_CRM_FORMS_TITLE"));this.showForms(i)}else if(e===p){a(this.title,i.panelTitle||BX.Landing.Loc.getMessage("LANDING_LINKS_CRM_PHONES_TITLE"));this.showPhones(i)}return new Promise(function(e){this.promiseResolve=e}.bind(this))},showSites:function(e){var n=e.siteId;void s(this.layout,{width:null});if(!BX.Type.isPlainObject(e.filter)){e.filter={}}var i=BX.Landing.Env.getInstance();if(BX.Type.isNil(e.filter.ID)&&i.getType()==="GROUP"){e.filter.ID=i.getSiteId()}if(e.filter.ID===-1){delete e.filter.ID}e.filter.SPECIAL="N";void BX.Landing.Backend.getInstance().getSites(e).then(function(i){this.appendSidebarButton(new I("current_site",{text:BX.Landing.Loc.getMessage("LANDING_LINKS_PANEL_CURRENT_SITE")}));i.forEach(function(i){if(parseInt(i.ID)==n){this.currentSiteButton=new I(i.ID,{text:i.TITLE,onClick:this.onSiteClick.bind(this,i.ID,e.enableAreas),child:true,active:true});this.appendSidebarButton(this.currentSiteButton)}},this);BX.Landing.Backend.getInstance().getLandings({siteId:n}).then(function(i){var t={currentTarget:this.currentSiteButton.layout};var a=this.onSiteClick.bind(this,n,e.enableAreas,t);this.appendCard(new BX.Landing.UI.Card.AddPageCard({siteId:n,onSave:this.addPageSave.bind(this,a,n)}));i.forEach(function(n){if(!n.IS_AREA||n.IS_AREA&&e.enableAreas){this.appendCard(new BX.Landing.UI.Card.LandingPreviewCard({title:n.TITLE,description:n.DESCRIPTION,preview:n.PREVIEW,onClick:this.onLandingClick.bind(this,n.ID,n.TITLE)}))}},this);this.loader.hide()}.bind(this));if(!e.currentSiteOnly){this.appendSidebarButton(new I("my_sites",{text:BX.Landing.Loc.getMessage("LANDING_LINKS_PANEL_MY_SITES")}));i.forEach(function(n){this.appendSidebarButton(new I(n.ID,{text:n.TITLE,onClick:this.onSiteClick.bind(this,n.ID,e.enableAreas),child:true}))},this)}}.bind(this))},createCurrentSiteButton:function(){return new I("current_site",{text:BX.Landing.Loc.getMessage("LANDING_LINKS_PANEL_CURRENT_SITE")})},showBlocks:function(e){var n=e.landingId;var i=e.siteId;void s(this.layout,{width:"880px"});BX.Landing.Backend.getInstance().getSites(e).then(function(e){this.appendSidebarButton(this.createCurrentSiteButton());var n=e.map(function(e){return e.ID},this);return BX.Landing.Backend.getInstance().getLandings({siteId:n}).then(function(n){return e.reduce(function(e,i,t){var a=n.filter(function(e){return i.ID===e.SITE_ID});e[i.ID]={site:i,landings:a};return e},{})})}.bind(this)).then(function(t){t[i].landings.forEach(function(i){var t=parseInt(i.ID)===parseInt(n);if(!e.currentPageOnly||t){var a=this.createLandingSidebarButton(i,t);this.appendSidebarButton(a);if(t){a.layout.click()}}},this);if(!e.currentPageOnly){Object.keys(t).forEach(function(e){if(parseInt(e)!==parseInt(i)){var n=t[e].site;this.appendSidebarButton(this.createSiteSidebarButton(n));t[e].landings.forEach(function(e){this.appendSidebarButton(this.createLandingSidebarButton(e))},this)}},this)}}.bind(this))},showForms:function(){void s(this.layout,{width:"500px"});BX.Landing.Backend.getInstance().action("Form::getList").then(function(e){e.forEach(function(e){var n={title:e.NAME,className:"landing-ui-card-form-preview",onClick:this.onFormChange.bind(this,e)};if(e.IS_CALLBACK_FORM==="Y"){n.className+=" landing-ui-card-form-preview--callback"}this.appendCard(new BX.Landing.UI.Card.BaseCard(n))}.bind(this));this.loader.hide()}.bind(this))},onFormChange:function(e){this.hide();this.promiseResolve({id:e.ID,type:"crmFormPopup",name:e.NAME})},showPhones:function(){void s(this.layout,{width:"500px"});BX.Landing.Env.getInstance().getOptions().references.forEach(function(e){this.appendCard(new BX.Landing.UI.Card.BaseCard({title:e.text,className:"landing-ui-card-form-preview",onClick:this.onPhoneChange.bind(this,e)}))}.bind(this));this.loader.hide()},onPhoneChange:function(e){this.hide();this.promiseResolve({id:e.value,type:"crmPhone",name:e.text})},createLandingSidebarButton:function(e,n){return new I(e.ID,{text:e.TITLE,onClick:this.onLandingChange.bind(this,e),child:true,active:n})},createSiteSidebarButton:function(e){return new I(e.ID,{text:e.TITLE,child:false,active:false})},onLandingChange:function(e,n){this.currentSelectedLanding=e;this.sidebarButtons.forEach(function(e){if(e.layout===n.currentTarget){e.activate();return}e.deactivate()});this.showPreviewLoader().then(this.createIframeIfNeed()).then(this.loadPreviewSrc(this.buildLandingPreviewUrl(e))).then(this.hidePreviewLoader())},buildLandingPreviewUrl:function(e){var n=BX.Landing.Main.getInstance().options.params.sef_url.landing_view;n=n.replace("#site_show#",e.SITE_ID);n=n.replace("#landing_edit#",e.ID);return l(n,{forceLoad:true,landing_mode:"edit"})},loadPreviewSrc:function(e){return function(){return new Promise(function(n){if(this.previewFrame.src!==e){this.previewFrame.src=e;this.previewFrame.onload=function(){var e=this.previewFrame.contentDocument;BX.Landing.Utils.removePanels(e);[].slice.call(e.querySelectorAll(".block-wrapper")).forEach(function(e){e.classList.add("landing-ui-block-selectable-overlay");e.addEventListener("click",function(n){n.preventDefault();this.onBlockClick(parseInt(e.id.replace("block","")),n)}.bind(this))},this);n(this.previewFrame)}.bind(this);return}n(this.previewFrame)}.bind(this))}.bind(this)},showPreviewLoader:function(){if(!this.loader){this.loader=new BX.Loader}if(this.previewFrameWrapper){void s(this.previewFrameWrapper,{opacity:0})}return new Promise(function(e){void this.loader.show(this.content);e()}.bind(this))},hidePreviewLoader:function(){return function(){void s(this.previewFrameWrapper,{opacity:null});return this.loader.hide()}.bind(this)},createIframeIfNeed:function(){return function(){new Promise(function(e){if(!this.previewFrame){this.previewFrame=r("iframe",{});this.previewFrameWrapper=r("div",{attrs:{style:"width: 100%; height: 100%; overflow: hidden;"}});this.previewFrameWrapper.appendChild(this.previewFrame);this.content.innerHTML="";this.content.appendChild(this.previewFrameWrapper);this.showPreviewLoader();requestAnimationFrame(function(){var e=this.content.clientWidth-40;void s(this.previewFrame,{width:"1000px",height:"calc((100vh - 113px) * (100 / "+e/1e3*100+"))",transform:"scale("+e/1e3+") translateZ(0)","transform-origin":"top left",border:"none"})}.bind(this))}e(this.previewFrame)}.bind(this))}.bind(this)},onBlockClick:function(e,n){if(n.isTrusted){void BX.Landing.Backend.getInstance().getBlocks({landingId:this.currentSelectedLanding.ID}).then(function(n){var i=n.find(function(n){return n.id===e});if(i){this.onChange({type:g,id:i.id,name:i.name,alias:i.alias})}}.bind(this))}},onLandingClick:function(e,n){this.onChange({type:u,id:e,name:n})},onSystemClick:function(e,n){this.onChange({type:L,id:"_"+e,name:n})},onSiteClick:function(e,n,i){this.sidebarButtons.forEach(function(e){if(e.layout===i.currentTarget||!!i.target&&e.layout===i.target.closest(".landing-ui-button")){this.currentSiteButton=e;e.activate()}else{e.deactivate()}},this);this.content.innerHTML="";this.showLoader();BX.Landing.Backend.getInstance().getLandings({siteId:e}).then(function(t){var a=this.onSiteClick.bind(this,e,n,i);this.appendCard(new BX.Landing.UI.Card.AddPageCard({siteId:e,onSave:this.addPageSave.bind(this,a,e)}));t.forEach(function(e){if(!e.IS_AREA||e.IS_AREA&&n){this.appendCard(this.createLandingPreview(e))}},this);this.loader.hide()}.bind(this))},addPageSave:function(e,n){this.cache=new BX.Cache.MemoryCache;var i=BX.Landing.Backend.getInstance();i.cache.delete("landings+["+n+"]");i.cache.delete('landings+["'+n+'"]');i.cache.delete("landing+"+n);e()},createLandingPreview:function(e){return new BX.Landing.UI.Card.LandingPreviewCard({title:e.TITLE,description:e.DESCRIPTION,preview:e.PREVIEW,onClick:this.onLandingClick.bind(this,e.ID,e.TITLE)})},createBlockPreview:function(e){return new BX.Landing.UI.Card.BlockHTMLPreview({content:e.id,onClick:this.onBlockClick.bind(this,e.id,e.name,e.alias)})},getLanding:function(e,n){var i=JSON.stringify(["getLanding"+e,n]);return this.cache.remember(i,function(){return BX.Landing.Backend.getInstance().action("Landing::getList",{params:{filter:{ID:e},get_preview:true}}).then(function(e){return e}.bind(this))}.bind(this))},getBlock:function(e){var n="getBlocks"+e;return this.cache.remember(n,function(){return BX.Landing.Backend.getInstance().action("Block::getById",{block:e,params:{edit_mode:true}}).then(function(e){return e}.bind(this))}.bind(this))},onChange:function(e){this.promiseResolve(e);this.hide()},hide:function(){this.previewFrame=null;return BX.Landing.UI.Panel.Content.prototype.hide.call(this)}}})();
/* End */
;
; /* Start:"a:4:{s:4:"full";s:60:"/bitrix/js/landing/ui/panel/top_panel.min.js?163229558310192";s:6:"source";s:40:"/bitrix/js/landing/ui/panel/top_panel.js";s:3:"min";s:44:"/bitrix/js/landing/ui/panel/top_panel.min.js";s:3:"map";s:44:"/bitrix/js/landing/ui/panel/top_panel.map.js";}"*/
(function(){"use strict";BX.namespace("BX.Landing.UI.Panel");var t=BX.Landing.Utils.removeClass;var n=BX.Landing.Utils.addClass;var i=BX.Landing.Utils.onCustomEvent;var e=BX.Landing.Utils.bind;var s=BX.Landing.Utils.makeFilterablePopupMenu;var a=BX.Landing.Utils.makeSelectablePopupMenu;var o=BX.Landing.Utils.style;var d=BX.Landing.Utils.encodeDataValue;BX.Landing.UI.Panel.Top=function(t,n){BX.Landing.UI.Panel.BasePanel.apply(this,arguments);this.layout=document.querySelector(".landing-ui-panel-top");this.siteButton=this.layout.querySelector(".landing-ui-panel-top-chain-link-site");this.pageButton=this.layout.querySelector(".landing-ui-panel-top-chain-link-page");this.undoButton=this.layout.querySelector(".landing-ui-panel-top-history-undo");this.redoButton=this.layout.querySelector(".landing-ui-panel-top-history-redo");this.desktopButton=this.layout.querySelector(".landing-ui-button-desktop");this.tabletButton=this.layout.querySelector(".landing-ui-button-tablet");this.mobileButton=this.layout.querySelector(".landing-ui-button-mobile");this.iframeWrapper=document.querySelector(".landing-ui-view-iframe-wrapper");this.iframe=document.querySelector(".landing-ui-view");this.lastActive=this.desktopButton;this.loader=null;this.onDesktopSizeChange=this.onDesktopSizeChange.bind(this);this.onTabletSizeChange=this.onTabletSizeChange.bind(this);this.onMobileSizeChange=this.onMobileSizeChange.bind(this);this.onIframeClick=this.onIframeClick.bind(this);this.onSiteButtonClick=this.onSiteButtonClick.bind(this);this.onPageButtonClick=this.onPageButtonClick.bind(this);this.onUndo=this.onUndo.bind(this);this.onRedo=this.onRedo.bind(this);this.onKeyDown=this.onKeyDown.bind(this);this.adjustHistoryButtonsState=this.adjustHistoryButtonsState.bind(this);e(this.desktopButton,"click",this.onDesktopSizeChange);e(this.tabletButton,"click",this.onTabletSizeChange);e(this.mobileButton,"click",this.onMobileSizeChange);e(this.iframe.contentDocument,"click",this.onIframeClick);e(this.undoButton,"click",this.onUndo);e(this.redoButton,"click",this.onRedo);e(document,"keydown",this.onKeyDown);i(document,"iframe:keydown",this.onKeyDown);i(window,"BX.Landing.History:init",this.adjustHistoryButtonsState);i(window,"BX.Landing.History:update",this.adjustHistoryButtonsState);var s=parseInt(BX.Landing.Main.getInstance().options.sites_count);var a=parseInt(BX.Landing.Main.getInstance().options.pages_count);if(s>1&&this.siteButton){e(this.siteButton,"click",this.onSiteButtonClick)}if(a>1&&this.pageButton){e(this.pageButton,"click",this.onPageButtonClick)}var o=BX.Landing.PageObject.getRootWindow();var d=o.BX.getClass("BX.Landing.History");if(d){o.BX.Landing.History.instance=null}BX.Landing.History.getInstance()};BX.Landing.UI.Panel.Top.instance=null;BX.Landing.UI.Panel.Top.getInstance=function(){var t=BX.Landing.PageObject.getRootWindow();if(!t.BX.Landing.UI.Panel.Top.instance){t.BX.Landing.UI.Panel.Top.instance=new BX.Landing.UI.Panel.Top("top_panel")}return t.BX.Landing.UI.Panel.Top.instance};BX.Landing.UI.Panel.Top.prototype={constructor:BX.Landing.UI.Panel.Top,__proto__:BX.Landing.UI.Panel.BasePanel.prototype,superclass:BX.Landing.UI.Panel.BasePanel.prototype,onKeyDown:function(t){var n=t.keyCode||t.which;if(n===90&&(window.navigator.userAgent.match(/win/i)?t.ctrlKey:t.metaKey)){if(t.shiftKey){t.preventDefault();this.onRedo()}else{t.preventDefault();this.onUndo()}}},onUndo:function(){if(BX.Landing.History.getInstance().canUndo()&&!this.undoButton.hasAttribute("data-disabled")){this.getLoader().show(this.undoButton);n(this.undoButton,"landing-ui-onload");BX.Landing.History.getInstance().undo().then(function(){this.getLoader().hide();t(this.undoButton,"landing-ui-onload")}.bind(this))}else{this.getLoader().hide();t(this.undoButton,"landing-ui-onload")}},onRedo:function(){if(BX.Landing.History.getInstance().canRedo()&&!this.redoButton.hasAttribute("data-disabled")){this.getLoader().show(this.redoButton);n(this.redoButton,"landing-ui-onload");BX.Landing.History.getInstance().redo().then(function(){this.getLoader().hide();t(this.redoButton,"landing-ui-onload")}.bind(this))}else{this.getLoader().hide();t(this.redoButton,"landing-ui-onload")}},getLoader:function(){if(this.loader===null){this.loader=new BX.Loader({size:23,offset:{top:"3px",left:"1px"}});void o(this.loader.layout.querySelector(".main-ui-loader-svg-circle"),{"stroke-width":"4px"});void o(this.loader.layout.querySelector(".main-ui-loader-svg"),{"margin-top":"-3px"})}return this.loader},adjustHistoryButtonsState:function(t){if(t.canUndo()){this.undoButton.classList.remove("landing-ui-disabled");this.undoButton.removeAttribute("data-disabled")}else{this.undoButton.classList.add("landing-ui-disabled")}if(t.canRedo()){this.redoButton.classList.remove("landing-ui-disabled");this.redoButton.removeAttribute("data-disabled")}else{this.redoButton.classList.add("landing-ui-disabled")}},disableHistory:function(){this.undoButton.classList.add("landing-ui-disabled");this.undoButton.setAttribute("data-disabled","");this.redoButton.classList.add("landing-ui-disabled");this.redoButton.setAttribute("data-disabled","")},enableHistory:function(){this.adjustHistoryButtonsState(BX.Landing.History.getInstance())},disableDevices:function(){this.desktopButton.classList.add("landing-ui-disabled");this.tabletButton.classList.add("landing-ui-disabled");this.mobileButton.classList.add("landing-ui-disabled")},enableDevices:function(){this.desktopButton.classList.remove("landing-ui-disabled");this.tabletButton.classList.remove("landing-ui-disabled");this.mobileButton.classList.remove("landing-ui-disabled")},onDesktopSizeChange:function(){this.lastActive.classList.remove("active");this.lastActive=this.desktopButton;this.desktopButton.classList.add("active");BX.DOM.write(function(){this.iframeWrapper.style.width=null}.bind(this));this.iframeWrapper.dataset.postfix="";BX.Landing.Main.getInstance().enableControls();BX.Landing.Main.getInstance().setNoTouchDevice()},onTabletSizeChange:function(){this.lastActive.classList.remove("active");this.lastActive=this.tabletButton;this.tabletButton.classList.add("active");BX.DOM.write(function(){this.iframeWrapper.style.width="990px"}.bind(this));this.iframeWrapper.dataset.postfix="--md";BX.Landing.Main.getInstance().disableControls();BX.Landing.Main.getInstance().setTouchDevice()},onMobileSizeChange:function(){this.lastActive.classList.remove("active");this.lastActive=this.mobileButton;this.mobileButton.classList.add("active");BX.DOM.write(function(){this.iframeWrapper.style.width="375px"}.bind(this));this.iframeWrapper.dataset.postfix="--md";BX.Landing.Main.getInstance().disableControls();BX.Landing.Main.getInstance().setTouchDevice()},onSiteButtonClick:function(t){t.preventDefault();if(!this.siteMenu){var n=new BX.Loader({size:40});this.siteMenu=new BX.PopupMenuWindow({id:"site_list_menu",bindElement:this.siteButton,events:{onPopupClose:function(){this.siteButton.classList.remove("landing-ui-active");this.siteButton.blur()}.bind(this)},menuShowDelay:0,offsetTop:9});this.siteMenu.popupWindow.contentContainer.style.minHeight="60px";this.siteMenu.popupWindow.contentContainer.style.minWidth="160px";n.show(this.siteMenu.popupWindow.contentContainer);var i={siteId:BX.Landing.Main.getInstance().options.site_id,landingId:BX.Landing.Main.getInstance().id,filter:{"=TYPE":BX.Landing.Main.getInstance().options.params.type,SPECIAL:"N"}};BX.Landing.Backend.getInstance().getSites(i).then(function(t){return new Promise(function(n){setTimeout(n.bind(null,t),300)})}).then(function(t){s(this.siteMenu);a(this.siteMenu);t.forEach(function(t){this.siteMenu.addMenuItem({id:t.ID,text:d(t.TITLE),items:function(){var n=[];var i=BX.Landing.Main.getInstance().options.params.sef_url.site_edit;var e=BX.Landing.Main.getInstance().options.params.sef_url.site_show;n.push({text:BX.Landing.Loc.getMessage("LANDING_ENTITIES_MENU_PAGES_LIST"),href:e.replace("#site_show#",t.ID)});n.push({text:BX.Landing.Loc.getMessage("LANDING_ENTITIES_MENU_EDIT"),href:i.replace("#site_edit#",t.ID)});return n}()})},this);n.hide()}.bind(this))}this.siteButton.classList.add("landing-ui-active");this.siteMenu.show()},onPageButtonClick:function(t){t.preventDefault();if(!this.pageMenu){var n=new BX.Loader({size:40});this.pageMenu=new BX.PopupMenuWindow({id:"page_list_menu",bindElement:this.pageButton,events:{onPopupClose:function(){this.pageButton.classList.remove("landing-ui-active");this.pageButton.blur()}.bind(this)},menuShowDelay:0,offsetTop:9});this.pageMenu.popupWindow.contentContainer.style.minHeight="60px";this.pageMenu.popupWindow.contentContainer.style.minWidth="160px";n.show(this.pageMenu.popupWindow.contentContainer);var i={siteId:BX.Landing.Main.getInstance().options.site_id,landingId:BX.Landing.Main.getInstance().id,filter:{"=TYPE":BX.Landing.Main.getInstance().options.params.type}};BX.Landing.Backend.getInstance().getLandings({siteId:i.siteId}).then(function(t){return new Promise(function(n){setTimeout(n.bind(null,t),300)})}).then(function(t){s(this.pageMenu);a(this.pageMenu);t.forEach(function(t){if((t.FOLDER_ID===null||parseInt(t.FOLDER_ID)===0)&&!t.IS_AREA){this.pageMenu.addMenuItem({id:t.ID,text:d(t.TITLE),items:function(){var n=[];var i=BX.Landing.Main.getInstance().options.params.sef_url.landing_edit;var e=BX.Landing.Main.getInstance().options.params.sef_url.landing_view;if(t.FOLDER==="Y"){var s=BX.Landing.Main.getInstance().options.params.sef_url.site_show;n.push({text:BX.Landing.Loc.getMessage("LANDING_ENTITIES_MENU_PAGES_LIST"),href:BX.Landing.Utils.addQueryParams(s.replace("#site_show#",t.SITE_ID),{folderId:t.ID})})}n.push({text:BX.Landing.Loc.getMessage("LANDING_ENTITIES_MENU_PAGES_EDIT"),href:e.replace("#site_show#",t.SITE_ID).replace("#landing_edit#",t.ID)});n.push({text:BX.Landing.Loc.getMessage("LANDING_ENTITIES_MENU_PAGES_SETTINGS"),href:i.replace("#site_show#",t.SITE_ID).replace("#landing_edit#",t.ID)});return n}()})}},this);requestAnimationFrame(function(){n.hide()})}.bind(this))}this.pageButton.classList.add("landing-ui-active");this.pageMenu.show()},onIframeClick:function(){if(this.siteMenu){this.siteMenu.close()}if(this.pageMenu){this.pageMenu.close()}}}})();
/* End */
;
; /* Start:"a:4:{s:4:"full";s:61:"/bitrix/js/landing/ui/panel/card_action.min.js?16322955781006";s:6:"source";s:42:"/bitrix/js/landing/ui/panel/card_action.js";s:3:"min";s:0:"";s:3:"map";s:0:"";}"*/
(function(){"use strict";BX.namespace("BX.Landing.UI.Panel");BX.Landing.UI.Panel.CardAction=function(t,n){BX.Landing.UI.Panel.BaseButtonPanel.apply(this,arguments);o(this)};function t(t){return t.getBoundingClientRect()}function n(t){return t.height<100}function a(t,n){return t.width<n.width}function i(t,n){return{width:Math.abs(t.width-n.width),height:Math.abs(t.height-n.height),top:Math.abs(t.top-n.top),right:Math.abs(t.right-n.right),bottom:Math.abs(t.bottom-n.bottom),left:Math.abs(t.left-n.left)}}function o(o){BX.DOM.read(function(){if(o.layout&&o.layout.parentNode){var e=t(o.layout.parentNode);var r="landing-ui-size-lg";if(n(e)){r="landing-ui-size-xs"}BX.DOM.write(function(){o.layout.classList.add(r);BX.DOM.read(function(){var n=t(o.layout);var r="auto";if(a(e,n)){r=-(i(e,n).width/2)}BX.DOM.write(function(){o.layout.style.left=r+"px"})})})}})}BX.Landing.UI.Panel.CardAction.prototype={constructor:BX.Landing.UI.Panel.CardAction,__proto__:BX.Landing.UI.Panel.BaseButtonPanel.prototype}})();
/* End */
;
; /* Start:"a:4:{s:4:"full";s:60:"/bitrix/js/landing/ui/panel/link_panel.min.js?16322955833994";s:6:"source";s:41:"/bitrix/js/landing/ui/panel/link_panel.js";s:3:"min";s:45:"/bitrix/js/landing/ui/panel/link_panel.min.js";s:3:"map";s:45:"/bitrix/js/landing/ui/panel/link_panel.map.js";}"*/
(function(){"use strict";BX.namespace("BX.Landing.UI.Panel");var n=BX.Landing.Utils.attr;var e=BX.Landing.Utils.join;var t=BX.Landing.Utils.random;var i=BX.Landing.Utils.setTextContent;var a=BX.Landing.Utils.isPlainObject;var s=BX.Landing.Utils.isString;var d=BX.Landing.Utils.textToPlaceholders;var l=BX.Landing.Utils.findParent;var o=BX.Landing.Utils.escapeText;BX.Landing.UI.Panel.Link=function(n,e){BX.Landing.UI.Panel.Content.apply(this,arguments);this.layout.classList.add("landing-ui-panel-link");this.overlay.classList.add("landing-ui-panel-link");this.appendFooterButton(new BX.Landing.UI.Button.BaseButton("save_block_content",{text:BX.Landing.Loc.getMessage("BLOCK_SAVE"),onClick:this.save.bind(this),className:"landing-ui-button-content-save"}));this.appendFooterButton(new BX.Landing.UI.Button.BaseButton("cancel_block_content",{text:BX.Landing.Loc.getMessage("BLOCK_CANCEL"),onClick:this.hide.bind(this),className:"landing-ui-button-content-cancel"}));document.body.appendChild(this.layout)};BX.Landing.UI.Panel.Link.instance=null;BX.Landing.UI.Panel.Link.getInstance=function(){if(!BX.Landing.UI.Panel.Link.instance){BX.Landing.UI.Panel.Link.instance=new BX.Landing.UI.Panel.Link("link_panel",{title:BX.Landing.Loc.getMessage("LANDING_EDIT_LINK")})}return BX.Landing.UI.Panel.Link.instance};BX.Landing.UI.Panel.Link.prototype={constructor:BX.Landing.UI.Panel.Link,__proto__:BX.Landing.UI.Panel.Content.prototype,show:function(n){var e;this.title.innerHTML=BX.Landing.Loc.getMessage("LANDING_EDIT_LINK");if(!!n&&n instanceof BX.Landing.Block.Node.Link){this.node=n;e=new BX.Landing.UI.Form.BaseForm({title:this.node.manifest.name});this.field=this.node.getField();e.addField(this.field);this.clear();this.appendForm(e);BX.Landing.UI.Panel.Content.prototype.show.call(this);BX.Landing.UI.Panel.EditorPanel.getInstance().hide()}if(!!n&&(n instanceof BX.Landing.Block.Node.Text||n instanceof BX.Landing.UI.Field.Text)){this.range=document.getSelection().getRangeAt(0);this.node=n;this.textField=BX.Landing.UI.Field.BaseField.currentField;if(!!this.textField&&this.textField.isEditable()){this.node=this.textField}var t=this.range.cloneContents().querySelector("a");if(!t){t=l(this.range.startContainer,{tagName:"A"})}var i="";var a="";if(t){i=t.getAttribute("href");a=t.getAttribute("target")||"_self"}else{this.title.innerHTML=BX.Landing.Loc.getMessage("LANDING_CREATE_LINK")}e=new BX.Landing.UI.Form.BaseForm({title:""});BX.remove(e.header);var s=[BX.Landing.UI.Field.LinkURL.TYPE_BLOCK,BX.Landing.UI.Field.LinkURL.TYPE_PAGE];if(BX.Landing.Main.getInstance().options.params.type==="STORE"){s.push(BX.Landing.UI.Field.LinkURL.TYPE_CATALOG)}this.field=new BX.Landing.UI.Field.Link({title:BX.Landing.Loc.getMessage("FIELD_LINK_TEXT_LABEL"),content:{text:d(o(t?t.innerText:this.range.toString())),href:o(i),target:o(a)},options:{siteId:BX.Landing.Main.getInstance().options.site_id,landingId:BX.Landing.Main.getInstance().id,filter:{"=TYPE":BX.Landing.Main.getInstance().options.params.type}},allowedTypes:s});e.addField(this.field);this.clear();this.appendForm(e);BX.Landing.UI.Panel.Content.prototype.show.call(this)}},save:function(){if(this.field.isChanged()){if(!!this.node&&this.node instanceof BX.Landing.Block.Node.Link){this.node.setValue(this.field.getValue())}else{var d=this.field.getValue();document.getSelection().removeAllRanges();document.getSelection().addRange(this.range);this.node.enableEdit();var l=o(e(d.href,t()));var g=document.getSelection();document.execCommand("createLink",false,l);var r=g.anchorNode.parentElement.parentElement.parentElement.querySelector(e('[href="',l,'"]'));if(r){n(r,"href",d.href);n(r,"target",d.target);if(s(d.text)){if(d.text.includes("{{name}}")){this.field.hrefInput.getPlaceholderData(d.href).then(function(n){r.innerHTML=d.text.replace(new RegExp("{{name}}"),'<span data-placeholder="name">'+n.name+"</span>")}.bind(this))}else{i(r,d.text)}}if(a(d.attrs)){n(r,d.attrs)}}}}this.hide()}}})();
/* End */
;
; /* Start:"a:4:{s:4:"full";s:68:"/bitrix/js/landing/ui/panel/google_fonts_panel.min.js?16322955828765";s:6:"source";s:49:"/bitrix/js/landing/ui/panel/google_fonts_panel.js";s:3:"min";s:53:"/bitrix/js/landing/ui/panel/google_fonts_panel.min.js";s:3:"map";s:53:"/bitrix/js/landing/ui/panel/google_fonts_panel.map.js";}"*/
(function(){"use strict";BX.namespace("BX.Landing.UI.Panel");var e=BX.Landing.Utils.addClass;var n=BX.Landing.Utils.proxy;var t=BX.Landing.Utils.append;var i=BX.Landing.Utils.slice;var a=BX.Landing.Utils.clone;var s=BX.Landing.Utils.bind;var o=["A red flare silhouetted the jagged edge of a wing","I watched the storm, so beautiful yet terrific","Almost before we knew it, we had left the ground","Waves flung themselves at the blue evening","A shining crescent far beneath the flying vessel"];var r=["&#x0423;&#x0442;&#x0440;&#x0435;&#x043D;&#x043D;&#x0435;&#x0435; &#x0441;&#x043E;&#x043B;&#x043D;&#x0446;&#x0435; &#x044F;&#x0440;&#x043A;&#x043E; &#x043E;&#x0441;&#x0432;&#x0435;&#x0442;&#x0438;&#x043B;&#x043E; &#x043F;&#x043E;&#x043B;&#x044F;&#x043D;&#x0443; &#x0438; &#x043B;&#x0435;&#x0441;","&#x041F;&#x0440;&#x0438;&#x043B;&#x0435;&#x0442;&#x0435;&#x0432;&#x0448;&#x0438;&#x0435; &#x043F;&#x0442;&#x0438;&#x0446;&#x044B; &#x0437;&#x0430;&#x043D;&#x044F;&#x043B;&#x0438; &#x0432;&#x0435;&#x0441;&#x044C; &#x0441;&#x043A;&#x0430;&#x043B;&#x0438;&#x0441;&#x0442;&#x044B;&#x0439; &#x0431;&#x0435;&#x0440;&#x0435;&#x0433;","&#x0411;&#x043E;&#x0434;&#x0440;&#x044F;&#x0449;&#x0438;&#x0439; &#x043C;&#x043E;&#x0440;&#x0441;&#x043A;&#x043E;&#x0439; &#x0432;&#x043E;&#x0437;&#x0434;&#x0443;&#x0445; &#x0431;&#x044B;&#x043B; &#x043F;&#x0440;&#x043E;&#x0445;&#x043B;&#x0430;&#x0434;&#x0435;&#x043D; &#x0438; &#x0441;&#x0432;&#x0435;&#x0436;","&#x042D;&#x0442;&#x043E; &#x043B;&#x0443;&#x0447;&#x0448;&#x0435;&#x0435;, &#x0447;&#x0442;&#x043E; &#x043C;&#x043E;&#x0433;&#x043B;&#x043E; &#x0441; &#x043D;&#x0438;&#x043C; &#x043F;&#x0440;&#x043E;&#x0438;&#x0437;&#x043E;&#x0439;&#x0442;&#x0438; &#x0432; &#x043D;&#x043E;&#x0432;&#x043E;&#x043C; &#x0433;&#x043E;&#x0440;&#x043E;&#x0434;&#x0435;","&#x041D;&#x043E;&#x0432;&#x0430;&#x044F; &#x043A;&#x043D;&#x0438;&#x0433;&#x0430; &#x043E;&#x043A;&#x0430;&#x0437;&#x0430;&#x043B;&#x0430;&#x0441;&#x044C; &#x0438;&#x043D;&#x0442;&#x0435;&#x0440;&#x0435;&#x0441;&#x043D;&#x043E;&#x0439; &#x0438; &#x043F;&#x043E;&#x0437;&#x043D;&#x0430;&#x0432;&#x0430;&#x0442;&#x0435;&#x043B;&#x044C;&#x043D;&#x043E;&#x0439;"];var x="&#1576;&#1591;&#1575;&#1576;&#1593; &#1571;&#1581;&#1605;&#1585; &#1575;&#1585;&#1578;&#1587;&#1605;&#1578; &#1589;&#1608;&#1585;&#1577; &#1592;&#1604;&#1610;&#1617;&#1577; &#1604;&#1581;&#1583;&#1608;&#1583; &#1575;&#1604;&#1580;&#1606;&#1575;&#1581; &#1575;&#1604;&#1605;&#1587;&#1606;&#1606;&#1577;.";var l="&#1492;&#1496;&#1489;&#1506; &#1492;&#1488;&#1495;&#1491; &#1513;&#1500;&#1497; &#1493;&#1492;&#1496;&#1489;&#1506; &#1492;&#1488;&#1495;&#1512; &#1495;&#1500;&#1511;&#1493; &#1494;&#1497;&#1499;&#1512;&#1493;&#1503; &#1502;&#1513;&#1493;&#1514;&#1507;.";var g="&#45208;&#45716; &#54253;&#54413;&#51012; &#51648;&#53020;&#48372;&#50520;&#45796;. &#45320;&#47924;&#45208; &#50500;&#47492;&#45796;&#50864;&#47732;&#49436;&#46020; &#50628;&#52397;&#45212; &#54253;&#54413;&#51012;.";BX.Landing.UI.Panel.GoogleFonts=function(){BX.Landing.UI.Panel.Content.apply(this,["google-fonts-panel",{title:BX.Landing.Loc.getMessage("LANDING_GOOGLE_FONT_PANEL_TITLE")}]);this.pangramIndex=-1;e(this.layout,"landing-ui-panel-google-fonts");e(this.overlay,"landing-ui-panel-google-fonts-overlay");this.client=new BX.Landing.Client.GoogleFonts;var n=BX.Landing.PageObject.getRootWindow();var i=n.document.body.querySelector(".landing-ui-view-container");t(this.layout,i);t(this.overlay,i);this.categoryForm=this.createCategoryForm();this.languageForm=this.createLanguageForm();t(this.categoryForm.layout,this.sidebar);t(this.languageForm.layout,this.sidebar)};BX.Landing.UI.Panel.GoogleFonts.getInstance=function(){return BX.Landing.UI.Panel.GoogleFonts.instance||(BX.Landing.UI.Panel.GoogleFonts.instance=new BX.Landing.UI.Panel.GoogleFonts)};BX.Landing.UI.Panel.GoogleFonts.prototype={constructor:BX.Landing.UI.Panel.GoogleFonts,__proto__:BX.Landing.UI.Panel.Content.prototype,superclass:BX.Landing.UI.Panel.Content.prototype,show:function(){var e=this.superclass.show.call(this);if(this.isFontsLoaded()){return e.then(n(this.saveResolver,this))}return e.then(n(this.showLoader,this)).then(n(this.getFonts,this)).then(n(this.loadFonts,this)).then(n(this.renderList,this)).then(n(this.hideLoader,this)).then(n(this.saveResolver,this))},saveResolver:function(){var e=this;return new Promise(function(n){e.resolver=n})},getFonts:function(){if(this.response){return Promise.resolve(this.response)}return this.client.getList().then(n(this.saveResponse,this))},saveResponse:function(e){return this.response=e},isFontsLoaded:function(){return!!this.response},showLoader:function(){if(!this.loader){this.loader=new BX.Loader({target:this.content})}this.loader.show();return Promise.resolve()},hideLoader:function(){if(this.loader){this.loader.hide()}return Promise.resolve()},loadFonts:function(e){return new Promise(function(n){WebFont.load({google:{families:e.map(function(e){return e.family.replace(/ /g,"+")})},context:top,classes:false,active:function(){var t=BX.Landing.PageObject.getRootWindow();if(t.document.fonts){t.document.fonts.ready.then(function(){n(e)})}else{setTimeout(n,3e3,e)}}})})},applyFilter:function(e){var n=this.languageForm.fields[0].getValue();var t=this.categoryForm.fields[0].getValue();return e.filter(function(e){return n.every(function(n){return e.subsets.indexOf(n)!==-1})&&t.some(function(n){return n===e.category})})},createListItem:function(e){var n=this.languageForm.fields[0].getValue();var t="";var i="ltr";this.pangramIndex+=1;this.pangramIndex=this.pangramIndex>4?0:this.pangramIndex;if(n.includes("latin")){t=o[this.pangramIndex]}if(n.includes("cyrillic")){t=r[this.pangramIndex]}if(n.includes("arabic")){i="rtl";t=x}if(n.includes("hebrew")){i="rtl";t=l}if(n.includes("korean")){t=g}return'<div class="landing-ui-font-preview">'+'<div class="landing-ui-font-preview-font-name">'+e.family+"</div>"+'<div class="landing-ui-font-preview-font-button">'+'<span class="ui-btn ui-btn-xs ui-btn-light-border ui-btn-round">'+BX.Landing.Loc.getMessage("LANDING_GOOGLE_FONT_SELECT_BUTTON")+"</span>"+"</div>"+'<div style="font-family: '+e.family+"; direction: "+i+';" class="landing-ui-font-preview-pangram" contenteditable="true">'+t+"</div>"+"</div>"},onFilterChange:function(){this.renderList()},renderList:function(){return this.getFonts().then(n(this.applyFilter,this)).then(n(this.renderItems,this))},renderItems:function(e){this.content.innerHTML=e.map(this.createListItem,this).join("");i(this.content.children).forEach(this.initItem(e),this)},initItem:function(e){return function(n,t){var i=n.querySelector(".landing-ui-font-preview-font-button");s(i,"click",this.onFontSelect.bind(this,e[t]))}},getListItems:function(){return i(this.content.querySelectorAll(".landing-ui-font-preview.cell"))},createLanguageForm:function(){var e=new BX.Landing.UI.Form.StyleForm({title:BX.Landing.Loc.getMessage("LANDING_GOOGLE_FONT_PANEL_LANGUAGE_FORM_TITLE")});var t=new BX.Landing.UI.Factory.FieldFactory({onValueChange:n(this.onFilterChange,this)});var i=window.location.host.includes(".ru");e.addField(t.create({type:"radio",items:[{name:BX.Landing.Loc.getMessage("LANDING_GOOGLE_FONT_PANEL_LANGUAGE_CYRILLIC"),value:"cyrillic",checked:i},{name:BX.Landing.Loc.getMessage("LANDING_GOOGLE_FONT_PANEL_LANGUAGE_LATIN"),value:"latin",checked:!i},{name:BX.Landing.Loc.getMessage("LANDING_GOOGLE_FONT_PANEL_LANGUAGE_ARABIC"),value:"arabic"},{name:BX.Landing.Loc.getMessage("LANDING_GOOGLE_FONT_PANEL_LANGUAGE_HEBREW"),value:"hebrew"},{name:BX.Landing.Loc.getMessage("LANDING_GOOGLE_FONT_PANEL_LANGUAGE_KOREAN"),value:"korean"}]}));return e},createCategoryForm:function(){var e=new BX.Landing.UI.Form.StyleForm({title:BX.Landing.Loc.getMessage("LANDING_GOOGLE_FONT_PANEL_CATEGORY_FORM_TITLE")});var t=new BX.Landing.UI.Factory.FieldFactory({onValueChange:n(this.onFilterChange,this)});e.addField(t.create({type:"checkbox",items:[{name:BX.Landing.Loc.getMessage("LANDING_GOOGLE_FONT_PANEL_CATEGORY_SANS_SERIF"),value:"sans-serif",checked:true},{name:BX.Landing.Loc.getMessage("LANDING_GOOGLE_FONT_PANEL_CATEGORY_SERIF"),value:"serif",checked:true},{name:BX.Landing.Loc.getMessage("LANDING_GOOGLE_FONT_PANEL_CATEGORY_DISPLAY"),value:"display",checked:true},{name:BX.Landing.Loc.getMessage("LANDING_GOOGLE_FONT_PANEL_CATEGORY_HANDWRITING"),value:"handwriting",checked:true},{name:BX.Landing.Loc.getMessage("LANDING_GOOGLE_FONT_PANEL_CATEGORY_MONOSPACE"),value:"monospace",checked:true}]}));return e},onFontSelect:function(e){this.selectedFont=e;this.onApply()},onApply:function(){if(this.resolver){var e=a(this.selectedFont);e.subset=this.languageForm.fields[0].getValue();this.hide().then(this.resolver.bind(null,e))}},onCancel:function(){this.hide()}}})();
/* End */
;
; /* Start:"a:4:{s:4:"full";s:78:"/bitrix/js/landing/ui/panel/google_images_settings_panel.min.js?16322955822137";s:6:"source";s:59:"/bitrix/js/landing/ui/panel/google_images_settings_panel.js";s:3:"min";s:63:"/bitrix/js/landing/ui/panel/google_images_settings_panel.min.js";s:3:"map";s:63:"/bitrix/js/landing/ui/panel/google_images_settings_panel.map.js";}"*/
(function(){"use strict";BX.namespace("BX.Landing.UI.Panel");BX.Landing.UI.Panel.GoogleImagesSettings=function(){BX.Landing.UI.Panel.Content.apply(this,["google_images_settings",{title:BX.Landing.Loc.getMessage("LANDING_GOOGLE_IMAGES_KEY_PANEL_TITLE"),footer:[new BX.Landing.UI.Button.BaseButton("save_block_content",{text:BX.Landing.Loc.getMessage("BLOCK_SAVE"),onClick:this.onSaveClick.bind(this),className:"landing-ui-button-content-save",attrs:{title:BX.Landing.Loc.getMessage("LANDING_TITLE_OF_SLIDER_SAVE")}}),new BX.Landing.UI.Button.BaseButton("cancel_block_content",{text:BX.Landing.Loc.getMessage("BLOCK_CANCEL"),onClick:this.onCancelClick.bind(this),className:"landing-ui-button-content-cancel",attrs:{title:BX.Landing.Loc.getMessage("LANDING_TITLE_OF_SLIDER_CANCEL")}})]}]);this.layout.style.width="496px";this.layout.style.zIndex="600";this.overlay.style.zIndex="599";this.settingsForm=new BX.Landing.UI.Form.BaseForm;this.keyField=new BX.Landing.UI.Field.Text({title:BX.Landing.Loc.getMessage("LANDING_GOOGLE_IMAGES_KEY_FIELD_TITLE"),textOnly:true,description:BX.Landing.Loc.getMessage("LANDING_GOOGLE_IMAGES_GET_KEY_GUIDE"),content:BX.Landing.Client.Google.key});this.settingsForm.addField(this.keyField);this.appendForm(this.settingsForm);document.body.appendChild(this.layout)};BX.Landing.UI.Panel.GoogleImagesSettings.getInstance=function(){return BX.Landing.UI.Panel.GoogleImagesSettings.instance||(BX.Landing.UI.Panel.GoogleImagesSettings.instance=new BX.Landing.UI.Panel.GoogleImagesSettings)};BX.Landing.UI.Panel.GoogleImagesSettings.prototype={constructor:BX.Landing.UI.Panel.GoogleImagesSettings,__proto__:BX.Landing.UI.Panel.Content.prototype,superclass:BX.Landing.UI.Panel.Content.prototype,show:function(){this.superclass.show.call(this);return new Promise(function(n){this.resolver=n}.bind(this))},onSaveClick:function(){var n=this.keyField.getValue();this.resolver(n);BX.Landing.Backend.getInstance().action("Utils::saveSettings",{settings:{google_images_key:n}});BX.Landing.Client.Google.key=n;this.hide()},onCancelClick:function(){this.hide()}}})();
/* End */
;
; /* Start:"a:4:{s:4:"full";s:63:"/bitrix/js/landing/ui/panel/catalog_panel.min.js?16322955786849";s:6:"source";s:44:"/bitrix/js/landing/ui/panel/catalog_panel.js";s:3:"min";s:48:"/bitrix/js/landing/ui/panel/catalog_panel.min.js";s:3:"map";s:48:"/bitrix/js/landing/ui/panel/catalog_panel.map.js";}"*/
(function(){"use strict";BX.namespace("BX.Landing.UI.Panel");var t=BX.Landing.Utils.addClass;var i=BX.Landing.Utils.create;var n=BX.Landing.Utils.append;var e=BX.Landing.Utils.debounce;var a=BX.Landing.Utils.trim;var s=BX.Landing.Utils.bind;var l=BX.Landing.Utils.proxy;var o=BX.Landing.Utils.setTextContent;var r=BX.Landing.Utils.htmlToElement;var c=BX.Landing.Utils.remove;var h=BX.Landing.Utils.style;var d=BX.Landing.Utils.isArray;var g=BX.Landing.Utils.prepend;var u=BX.Landing.Utils.data;var L=BX.Landing.Utils.encodeDataValue;var p="section";var C="element";var v="all";BX.Landing.UI.Panel.Catalog=function(i){BX.Landing.UI.Panel.Content.apply(this,arguments);this.searchContainer=this.createSearchContainer();this.listContainer=this.createListContainer();this.searchField=this.createSearchField();this.typeSwitcher=this.createTypeSwitcher();this.iBlockSwitcher=this.createIblockSwitcher();this.resolver=function(){};this.iblocks=null;t(this.layout,"landing-ui-panel-catalog");t(this.overlay,"landing-ui-panel-catalog");o(this.title,BX.Landing.Loc.getMessage("LANDING_STYLE_PANEL_CATALOG_TITLE"));if(!this.getIblocks()||this.getIblocks().length>1){n(this.iBlockSwitcher.layout,this.searchContainer)}else{void h(this.listContainer,{"margin-top":"94px"})}n(this.searchField.layout,this.searchContainer);n(this.typeSwitcher.layout,this.searchContainer);n(this.searchContainer,this.content);n(this.listContainer,this.content);n(this.layout,document.body)};BX.Landing.UI.Panel.Catalog.TYPE_CATALOG_ALL=v;BX.Landing.UI.Panel.Catalog.TYPE_CATALOG_SECTION=p;BX.Landing.UI.Panel.Catalog.TYPE_CATALOG_ELEMENT=C;BX.Landing.UI.Panel.Catalog.getInstance=function(){return BX.Landing.UI.Panel.Catalog.instance||(BX.Landing.UI.Panel.Catalog.instance=new BX.Landing.UI.Panel.Catalog("catalog_panel"))};BX.Landing.UI.Panel.Catalog.prototype={constructor:BX.Landing.UI.Panel.Catalog,__proto__:BX.Landing.UI.Panel.Content.prototype,superClass:BX.Landing.UI.Panel.Content.prototype,search:function(t){var i={query:a(t.replace("&nbsp;","")),type:this.typeSwitcher.getValue(),iblock:this.iBlockSwitcher.getValue()};var n={action:"Utils::catalogSearch"};return BX.Landing.Backend.getInstance().action("Utils::catalogSearch",i,n)},createTypeSwitcher:function(){var i=new BX.Landing.UI.Field.ButtonGroup({items:[{name:BX.Landing.Loc.getMessage("LANDING_STYLE_PANEL_CATALOG_SEARCH_TYPE_ALL"),value:v},{name:BX.Landing.Loc.getMessage("LANDING_STYLE_PANEL_CATALOG_SEARCH_TYPE_ELEMENTS"),value:C},{name:BX.Landing.Loc.getMessage("LANDING_STYLE_PANEL_CATALOG_SEARCH_TYPE_SECTIONS"),value:p}],content:v,onChange:this.onSearchTypeChange.bind(this)});t(i.layout,"landing-ui-panel-catalog-switch");return i},getIblocks:function(){if(d(this.iblocks)){return this.iblocks}return[{name:"",value:""}]},createIblockSwitcher:function(){var i=new BX.Landing.UI.Field.Dropdown({title:BX.Landing.Loc.getMessage("LANDING_STYLE_PANEL_CATALOG_IBLOCK_SWITCHER"),items:this.getIblocks(),content:d(this.getIblocks())?this.getIblocks()[0].value:"",onChange:this.onIblockChange.bind(this)});t(i.layout,"landing-ui-panel-catalog-iblock-switch");return i},onIblockChange:function(){this.onSearch()},createSearchField:function(){return new BX.Landing.UI.Field.Text({placeholder:BX.Landing.Loc.getMessage("LANDING_STYLE_PANEL_CATALOG_SEARCH_PLACEHOLDER"),textOnly:true,onValueChange:e(this.onSearch,200,this)})},createSearchContainer:function(){return i("div",{props:{className:"landing-ui-panel-catalog-search-container"}})},createListContainer:function(){return i("div",{props:{className:"landing-ui-panel-catalog-list-container"}})},onSearchTypeChange:function(){this.onSearch()},renderResponse:function(t){var i=this.listContainer.querySelector(".landing-ui-panel-catalog-list");if(i){c(i)}this.body.scrollTop=0;n(r('<div class="landing-ui-panel-catalog-list">'+t.map(function(t){if(t.subType===p&&!t.image){t.image="/bitrix/images/landing/folder.svg"}var i=t.chain.reduce(function(t,i){if(i){t.push(L(i))}return t},[]);return"<div class='landing-ui-panel-catalog-list-row landing-ui-panel-catalog-list-row-"+t.subType+"'>"+"<div class='landing-ui-panel-catalog-list-row-left'>"+"<div class='landing-ui-panel-catalog-list-cell-preview' style=\"background-image: url('"+t.image+"')\"></div>"+"</div>"+"<div class='landing-ui-panel-catalog-list-row-right'>"+"<div class='landing-ui-panel-catalog-list-cell-name'>"+"<div>"+L(t.name)+"</div>"+"</div>"+"<div class='landing-ui-panel-catalog-list-cell-chain'>"+"<div>"+(i?i.join("&nbsp;/&nbsp;"):"")+"</div>"+"</div>"+"</div>"+"</div>"}).join("")+"</div>"),this.listContainer);return t},initResponseItems:function(t){var i=this.listContainer.querySelector(".landing-ui-panel-catalog-list");t.forEach(function(t,n){s(i.children[n],"click",this.onItemClick.bind(this,t))},this);return t},show:function(t,i){this.superClass.show.call(this);this.iblocks=t||null;this.entityTypes=i;this.onSearch();this.adjustIblockSwitcher();this.adjustEntityTypes();this.adjustSearchPlaceholder();return new Promise(function(t){this.resolver=t}.bind(this))},adjustSearchPlaceholder:function(){var t=this.getEntityTypes();if(t.length===1&&t[0]===p){u(this.searchField.input,{"data-placeholder":BX.Landing.Loc.getMessage("LANDING_STYLE_PANEL_CATALOG_SEARCH_SECTION_PLACEHOLDER")})}},getEntityTypes:function(){if(d(this.entityTypes)&&this.entityTypes.length>0){return this.entityTypes}return[v,C,p]},adjustEntityTypes:function(){this.typeSwitcher.buttons.forEach(function(t){t.layout.hidden=!this.getEntityTypes().includes(t.id)},this);this.typeSwitcher.setValue(this.getEntityTypes()[0])},adjustIblockSwitcher:function(){c(this.iBlockSwitcher.layout);this.iBlockSwitcher=this.createIblockSwitcher();g(this.iBlockSwitcher.layout,this.searchContainer);if(!this.getIblocks()||this.getIblocks().length<2){void h(this.iBlockSwitcher.layout,{display:"none"});void h(this.loaderContainer,{top:"182px"});void h(this.listContainer,{"margin-top":"94px"})}else{void h(this.iBlockSwitcher.layout,{display:null});void h(this.loaderContainer,{top:null});void h(this.listContainer,{"margin-top":null})}},onSearch:function(){this.showLoader();clearTimeout(this.searchTimeout);this.searchTimeout=setTimeout(function(){this.search(this.searchField.getValue()).then(l(this.renderResponse,this)).then(l(this.initResponseItems,this)).then(function(){this.hideLoader()}.bind(this))}.bind(this),500)},showLoader:function(){if(!this.loader){this.loader=new BX.Loader({offset:{top:"-70px"}});this.loaderContainer=i("div",{props:{className:"landing-ui-panel-catalog-loader-container"},children:[this.loader.layout]});n(this.loaderContainer,this.listContainer);this.loader.show()}this.loaderContainer.hidden=false},hideLoader:function(){if(this.loaderContainer){this.loaderContainer.hidden=true}},onItemClick:function(t){this.resolver(t);this.hide()}}})();
/* End */
;
; /* Start:"a:4:{s:4:"full";s:62:"/bitrix/js/landing/ui/panel/status_panel.min.js?16322955831345";s:6:"source";s:43:"/bitrix/js/landing/ui/panel/status_panel.js";s:3:"min";s:47:"/bitrix/js/landing/ui/panel/status_panel.min.js";s:3:"map";s:47:"/bitrix/js/landing/ui/panel/status_panel.map.js";}"*/
(function(){"use strict";BX.namespace("BX.Landing.UI.Panel");var n=BX.Landing.Utils.addClass;var a;var t=new Date;var e=[["s","sago"],["i","iago"],["H","Hago"],["d","dago"],["m100","mago"],["m","mago"]];BX.Landing.UI.Panel.StatusPanel=function(a){BX.Landing.UI.Panel.BasePanel.apply(this,arguments);n(this.layout,"landing-ui-panel-status");if(!!document.body.querySelector(".landing-edit-mode")){document.body.appendChild(this.layout)}this.runInterval();this.updateTime()};BX.Landing.UI.Panel.StatusPanel.setLastModified=function(n){t=new Date(n*1e3)};BX.Landing.UI.Panel.StatusPanel.getInstance=function(){return BX.Landing.UI.Panel.StatusPanel.instance||(BX.Landing.UI.Panel.StatusPanel.instance=new BX.Landing.UI.Panel.StatusPanel)};BX.Landing.UI.Panel.StatusPanel.prototype={constructor:BX.Landing.UI.Panel.StatusPanel,__proto__:BX.Landing.UI.Panel.BasePanel.prototype,runInterval:function(){clearInterval(a);a=setInterval(this.updateTime.bind(this),10*1e3)},updateTime:function(){this.setContent([BX.Landing.Loc.getMessage("LANDING_PAGE_STATUS_UPDATED"),BX.date.format(e,t.getTime()/1e3,(new Date).getTime()/1e3)].join(" "))},update:function(){this.show().then(function(){this.runInterval();t=new Date;this.setContent(BX.Landing.Loc.getMessage("LANDING_PAGE_STATUS_UPDATED_NOW"))}.bind(this))}}})();
/* End */
;
; /* Start:"a:4:{s:4:"full";s:67:"/bitrix/js/landing/ui/panel/detail_page_panel.min.js?16322955794330";s:6:"source";s:48:"/bitrix/js/landing/ui/panel/detail_page_panel.js";s:3:"min";s:52:"/bitrix/js/landing/ui/panel/detail_page_panel.min.js";s:3:"map";s:52:"/bitrix/js/landing/ui/panel/detail_page_panel.map.js";}"*/
(function(){"use strict";BX.namespace("BX.Landing.UI.Panel");BX.Landing.UI.Panel.DetailPage=function(n,e){BX.Landing.UI.Panel.URLList.apply(this,arguments);this.layout.classList.add("landing-ui-panel-detail-page");this.overlay.classList.add("landing-ui-panel-detail-page");this.cache=new BX.Cache.MemoryCache;document.body.appendChild(this.layout)};BX.Landing.UI.Panel.DetailPage.instance=null;BX.Landing.UI.Panel.DetailPage.getInstance=function(){if(!BX.Landing.UI.Panel.DetailPage.instance){BX.Landing.UI.Panel.DetailPage.instance=new BX.Landing.UI.Panel.DetailPage("detail_page_panel",{title:BX.Landing.Loc.getMessage("LANDING_BLOCK__DETAIL_PAGE_PANEL_TITLE")})}return BX.Landing.UI.Panel.DetailPage.instance};BX.Landing.UI.Panel.DetailPage.prototype={constructor:BX.Landing.UI.Panel.DetailPage,__proto__:BX.Landing.UI.Panel.URLList.prototype,getSources:function(){return this.cache.remember("sources",function(){var n=BX.Landing.PageObject.getRootWindow();return n.BX.Landing.Main.getInstance().options.sources})},onSourceClick:function(n){this.sidebarButtons.forEach(function(e){if(e.id===n.id){e.activate();return}e.deactivate()});this.content.innerHTML="";this.showLoader();this.content.appendChild(BX.create("div",{props:{className:"ui-alert ui-alert-warning landing-ui-panel-list-description"},children:[BX.create("span",{props:{className:"ui-alert-message"},html:BX.Landing.Loc.getMessage("LANDING_BLOCK__DETAIL_PAGE_LIST_DESCRIPTION")})]}));BX.Landing.Backend.getInstance().getDynamicTemplates(n.id).then(function(n){n.forEach(function(n){this.appendCard(this.createTemplatePreview(n))},this);this.loader.hide()}.bind(this))},createTemplatePreview:function(n){return new BX.Landing.UI.Card.LandingPreviewCard({title:n.TITLE,description:n.DESCRIPTION,preview:n.PREVIEW2X,onClick:this.onTemplateClick.bind(this,n)})},onTemplateClick:function(n){this.loader.show();var e=BX.Landing.Backend.getInstance();e.action("Utils::checkMultiFeature",{code:["create_page","publication_page"]}).then(function(t){if(!t||t==="false"){var i=BX.Landing.PageObject.getRootWindow();i.BX.Landing.PaymentAlertShow({message:BX.Landing.Loc.getMessage("LANDING_PUBLIC_PAGE_REACHED")});this.loader.hide()}else{e.action("Landing::addByTemplate",{siteId:e.getSiteId(),code:n.ID}).then(function(e){this.loader.hide();this.onChange({type:"landing",id:e,name:n.TITLE});var t=this.sidebarButtons.getActive();if(t){var i=t.id;var a=BX.Landing.Env.getInstance();var s=a.getOptions();var o=s.sources.find(function(n){return n.id===i});if(o){o.default.detail="#landing"+e}a.setOptions(s)}}.bind(this))}}.bind(this))},showSourcesButtons:function(){this.appendSidebarButton(new BX.Landing.UI.Button.SidebarButton("templates",{text:BX.Landing.Loc.getMessage("LANDING_BLOCK__DETAIL_PAGE_PANEL_TEMPLATES")}));this.getSources().forEach(function(n){if(n.settings.detailPage){this.appendSidebarButton(new BX.Landing.UI.Button.SidebarButton(n.id,{text:n.name,child:true,onClick:this.onSourceClick.bind(this,n)}))}},this)},showSitesButtons:function(){this.appendSidebarButton(new BX.Landing.UI.Button.SidebarButton("my_sites",{text:BX.Landing.Loc.getMessage("LANDING_LINKS_PANEL_MY_SITES")}));return BX.Landing.Backend.getInstance().getSites().then(function(n){n.forEach(function(n){this.appendSidebarButton(new BX.Landing.UI.Button.SidebarButton(n.ID,{text:n.TITLE,onClick:this.onSiteClick.bind(this,n.ID,false),child:true}))},this)}.bind(this))},showCreatePageButton:function(){this.appendSidebarButton(new BX.Landing.UI.Button.SidebarButton("feedback_button",{className:"landing-ui-button-sidebar-feedback",text:BX.Landing.Loc.getMessage("LANDING_BLOCK__DETAIL_PAGE_PANEL_ADD_PAGE_BUTTON"),onClick:function(){var n=BX.Landing.Main.getInstance().options;var e=n.params.sef_url.site_show;var t=n.site_id;var i=e.replace("#site_show#",t)+"#createPage";window.open(i,"_blank")}}))},buildSidebar:function(){return Promise.all([this.showSourcesButtons(),this.showSitesButtons().then(function(){this.showCreatePageButton()}.bind(this))])},show:function(n){BX.Landing.UI.Panel.Content.prototype.show.call(this);this.clear();this.showLoader();this.buildSidebar();var e=this.sidebarButtons.find(function(e){return e.id===n.source});if(e){e.layout.click()}return new Promise(function(n){this.promiseResolve=n}.bind(this))}}})();
/* End */
;
; /* Start:"a:4:{s:4:"full";s:62:"/bitrix/js/landing/ui/field/image_field.min.js?163229557215024";s:6:"source";s:42:"/bitrix/js/landing/ui/field/image_field.js";s:3:"min";s:46:"/bitrix/js/landing/ui/field/image_field.min.js";s:3:"map";s:46:"/bitrix/js/landing/ui/field/image_field.map.js";}"*/
(function(){"use strict";BX.namespace("BX.Landing.UI.Field");var i=BX.Landing.Utils.isPlainObject;var t=BX.Landing.Utils.isNumber;var e=BX.Landing.Utils.isEmpty;var n=BX.Landing.Utils.isString;var s=BX.Landing.Utils.decodeDataValue;var a=BX.Landing.Utils.clone;var d=BX.Landing.Utils.create;var o=BX.Landing.Utils.fireCustomEvent;BX.Landing.UI.Field.Image=function(t){BX.Landing.UI.Field.Text.apply(this,arguments);this.dimensions=typeof t.dimensions==="object"?t.dimensions:null;this.uploadParams=typeof t.uploadParams==="object"?t.uploadParams:{};this.onValueChangeHandler=t.onValueChange?t.onValueChange:function(){};this.layout.classList.add("landing-ui-field-image");this.type=this.content.type||"image";this.allowClear=t.allowClear;this.input.innerText=this.content.src;this.input.hidden=true;this.input2x=this.createInput();this.input2x.innerText=this.content.src2x;this.input2x.hidden=true;this.disableAltField=typeof t.disableAltField==="boolean"?t.disableAltField:false;this.fileInput=l(this.selector);this.fileInput.addEventListener("change",this.onFileInputChange.bind(this));this.linkInput=r();this.linkInput.onInputHandler=this.onLinkInput.bind(this);this.dropzone=h(this.selector);this.dropzone.hidden=true;this.dropzone.insertBefore(this.fileInput,this.dropzone.firstElementChild);this.onDragOver=this.onDragOver.bind(this);this.onDragLeave=this.onDragLeave.bind(this);this.onDrop=this.onDrop.bind(this);this.dropzone.addEventListener("dragover",this.onDragOver);this.dropzone.addEventListener("dragleave",this.onDragLeave);this.dropzone.addEventListener("drop",this.onDrop);this.clearButton=u();this.clearButton.on("click",this.onClearClick.bind(this));this.preview=c();this.preview.appendChild(this.clearButton.layout);this.preview.style.backgroundImage="url("+this.input.innerText.trim()+")";this.onImageDragEnter=this.onImageDragEnter.bind(this);this.preview.addEventListener("dragenter",this.onImageDragEnter);this.loader=new BX.Loader({target:this.preview});this.icon=p();this.image=g();this.image.appendChild(this.preview);this.image.appendChild(this.icon);this.image.dataset.fileid=this.content.id;this.image.dataset.fileid2x=this.content.id2x;this.hiddenImage=d("img",{props:{className:"landing-ui-field-image-hidden"}});if(i(this.content)&&"src"in this.content){this.hiddenImage.src=this.content.src}this.altField=f();this.altField.setValue(this.content.alt);this.left=m();this.left.appendChild(this.dropzone);this.left.appendChild(this.image);this.left.appendChild(this.hiddenImage);if(this.description){this.left.appendChild(this.description)}this.left.appendChild(this.altField.layout);this.left.appendChild(this.linkInput.layout);this.uploadButton=L();this.uploadButton.on("click",this.onUploadClick.bind(this));this.editButton=v();this.editButton.on("click",this.onEditClick.bind(this));this.right=I();this.right.appendChild(this.uploadButton.layout);this.right.appendChild(this.editButton.layout);this.form=B();this.form.appendChild(this.left);this.form.appendChild(this.right);this.layout.appendChild(this.form);this.enableTextOnly();if(!this.input.innerText.trim()||this.input.innerText.trim()===window.location.toString()){this.showDropzone()}if(this.disableAltField){this.altField.layout.hidden=true;this.altField.layout.style.display="none";this.altField.layout.classList.add("landing-ui-hide")}if(this.content.type==="icon"){this.type="icon";this.classList=this.content.classList;var e=this.content.classList;var n=[];BX.Landing.UI.Panel.IconPanel.getLibraries().then(function(i){i.forEach(function(i){i.categories.forEach(function(i){i.items.forEach(function(i){var t=i.split(" ");t.forEach(function(i){if(e.indexOf(i)!==-1&&n.indexOf(i)===-1){n.push(i)}})})})});this.icon.innerHTML='<span class="'+n.join(" ")+'"></span>'}.bind(this));this.showPreview();this.altField.layout.hidden=true}this.makeAsLinkWrapper=d("div",{props:{className:"landing-ui-field-image-make-as-link-wrapper"},children:[d("div",{props:{className:"landing-ui-field-image-make-as-link-button"},children:[]})]});this.url=new BX.Landing.UI.Field.Link({content:this.content.url||{text:"",href:""},options:{siteId:BX.Landing.Main.getInstance().options.site_id,landingId:BX.Landing.Main.getInstance().id}});this.urlCheckbox=d("input",{props:{type:"checkbox"},attrs:{style:"margin-left: 4px;"}});function s(i,t){if(i.checked){t.querySelector(".landing-ui-field-link-right").classList.remove("landing-ui-disabled");t.querySelector(".landing-ui-field-link-url-grid").classList.remove("landing-ui-disabled")}else{t.querySelector(".landing-ui-field-link-right").classList.add("landing-ui-disabled");t.querySelector(".landing-ui-field-link-url-grid").classList.add("landing-ui-disabled")}}this.urlCheckbox.addEventListener("change",function(){s(this.urlCheckbox,this.url.layout)}.bind(this));this.urlCheckbox.checked=this.content.url&&this.content.url.enabled;s(this.urlCheckbox,this.url.layout);this.url.hrefInput.header.appendChild(this.urlCheckbox);this.url.left.hidden=true;this.makeAsLinkWrapper.appendChild(this.url.layout);if(!t.disableLink){this.layout.appendChild(this.makeAsLinkWrapper)}this.content=this.getValue();BX.DOM.write(function(){this.adjustPreviewBackgroundSize()}.bind(this));if(this.getValue().type==="background"||this.allowClear){this.clearButton.layout.classList.add("landing-ui-show")}this.uploader=new BX.Landing.ImageUploader({uploadParams:this.uploadParams,additionalParams:{context:"imageeditor"},dimensions:this.dimensions,sizes:["1x","2x"]});this.adjustEditButtonState()};function l(i){return BX.create("input",{props:{className:"landing-ui-field-image-dropzone-input"},attrs:{accept:"image/*",type:"file",id:"file_"+i,name:"picture"}})}function r(){var i=new BX.Landing.UI.Field.Text({id:"path_to_image",placeholder:BX.Landing.Loc.getMessage("LANDING_IMAGE_UPLOAD_MENU_LINK_LABEL")});i.enableTextOnly();i.layout.hidden=true;return i}function h(i){return BX.create("label",{props:{className:"landing-ui-field-image-dropzone"},children:[BX.create("div",{props:{className:"landing-ui-field-image-dropzone-text"},html:'<div class="landing-ui-field-image-dropzone-title">'+BX.Landing.Loc.getMessage("LANDING_IMAGE_DROPZONE_TITLE")+"</div>"+'<div class="landing-ui-field-image-dropzone-subtitle">'+BX.Landing.Loc.getMessage("LANDING_IMAGE_DROPZONE_SUBTITLE")+"</div>"})],attrs:{for:"file_"+i}})}function u(){return new BX.Landing.UI.Button.BaseButton("clear",{className:"landing-ui-field-image-action-button-clear"})}function c(){return BX.create("div",{props:{className:"landing-ui-field-image-preview-inner"}})}function p(){return BX.create("span",{props:{className:"landing-ui-field-image-preview-icon"}})}function g(){return BX.create("div",{props:{className:"landing-ui-field-image-preview"}})}function f(){var i=new BX.Landing.UI.Field.Text({placeholder:BX.Landing.Loc.getMessage("LANDING_FIELD_IMAGE_ALT_PLACEHOLDER"),className:"landing-ui-field-image-alt",textOnly:true});return i}function m(){return BX.create("div",{props:{className:"landing-ui-field-image-left"}})}function L(){return new BX.Landing.UI.Button.BaseButton("upload",{text:BX.Landing.Loc.getMessage("LANDING_FIELD_IMAGE_UPLOAD_BUTTON"),className:"landing-ui-field-image-action-button"})}function v(){var i=new BX.Landing.UI.Button.BaseButton("edit",{text:BX.Landing.Loc.getMessage("LANDING_FIELD_IMAGE_EDIT_BUTTON"),className:"landing-ui-field-image-action-button"});return i}function I(){return BX.create("div",{props:{className:"landing-ui-field-image-right"}})}function B(){return BX.create("form",{props:{className:"landing-ui-field-image-container"},attrs:{method:"post",enctype:"multipart/form-data"},events:{submit:function(i){i.preventDefault()}}})}BX.Landing.UI.Field.Image.prototype={constructor:BX.Landing.UI.Field.Image,__proto__:BX.Landing.UI.Field.Text.prototype,superClass:BX.Landing.UI.Field.Text,onInputInput:function(){this.preview.src=this.input.innerText.trim()},onImageDragEnter:function(i){i.preventDefault();i.stopPropagation();if(!this.imageHidden){this.showDropzone();this.imageHidden=true}},onDragOver:function(i){i.preventDefault();i.stopPropagation();this.dropzone.classList.add("landing-ui-active")},onDragLeave:function(i){i.preventDefault();i.stopPropagation();this.dropzone.classList.remove("landing-ui-active");if(this.imageHidden){this.imageHidden=false;this.showPreview()}},onDrop:function(i){i.preventDefault();i.stopPropagation();this.dropzone.classList.remove("landing-ui-active");this.onFileChange(i.dataTransfer.files[0]);this.imageHidden=false},onFileChange:function(i){this.showLoader();this.upload(i).then(this.setValue.bind(this)).then(this.hideLoader.bind(this)).catch(function(i){console.error(i);this.hideLoader()}.bind(this))},onFileInputChange:function(i){this.onFileChange(i.currentTarget.files[0])},onUploadClick:function(i){this.bindElement=i.currentTarget;i.preventDefault();if(!this.uploadMenu){this.uploadMenu=BX.PopupMenu.create("upload_"+this.selector+ +new Date,this.bindElement,[{text:BX.Landing.Loc.getMessage("LANDING_IMAGE_UPLOAD_MENU_UNSPLASH"),onclick:this.onUnsplashShow.bind(this)},{text:BX.Landing.Loc.getMessage("LANDING_IMAGE_UPLOAD_MENU_GOOGLE"),onclick:this.onGoogleShow.bind(this)},{text:BX.Landing.Loc.getMessage("LANDING_IMAGE_UPLOAD_MENU_UPLOAD"),onclick:this.onUploadShow.bind(this)},{text:BX.Landing.Loc.getMessage("LANDING_IMAGE_UPLOAD_MENU_LINK"),onclick:this.onLinkShow.bind(this)}],{events:{onPopupClose:function(){this.bindElement.classList.remove("landing-ui-active");if(this.uploadMenu){this.uploadMenu.destroy();this.uploadMenu=null}}.bind(this)}});this.bindElement.parentNode.appendChild(this.uploadMenu.popupWindow.popupContainer)}this.bindElement.classList.add("landing-ui-active");this.uploadMenu.show();var t=BX.pos(this.bindElement,this.bindElement.parentNode);this.uploadMenu.popupWindow.popupContainer.style.top=t.bottom+"px";this.uploadMenu.popupWindow.popupContainer.style.left="auto";this.uploadMenu.popupWindow.popupContainer.style.right="5px"},onUnsplashShow:function(){this.uploadMenu.close();BX.Landing.UI.Panel.Image.getInstance().show("unsplash",this.dimensions,this.loader,this.uploadParams).then(this.upload.bind(this)).then(this.setValue.bind(this)).then(this.hideLoader.bind(this)).catch(function(i){console.error(i);this.hideLoader()}.bind(this))},onGoogleShow:function(){this.uploadMenu.close();BX.Landing.UI.Panel.Image.getInstance().show("google",this.dimensions,this.loader,this.uploadParams).then(this.upload.bind(this)).then(this.setValue.bind(this)).then(this.hideLoader.bind(this)).catch(function(i){BX.Landing.ErrorManager.getInstance().add({type:"error",action:"BAD_IMAGE",hideSupportLink:true});console.error(i);this.hideLoader()}.bind(this))},onUploadShow:function(){this.uploadMenu.close();this.fileInput.click()},onLinkShow:function(){this.uploadMenu.close();this.showLinkField();this.linkInput.setValue("")},onEditClick:function(i){i.preventDefault();this.edit({src:this.hiddenImage.src})},onClearClick:function(i){i.preventDefault();this.setValue({src:""});this.fileInput.value="";this.showDropzone()},showDropzone:function(){this.dropzone.hidden=false;this.image.hidden=true;this.altField.layout.hidden=true;this.linkInput.layout.hidden=true},showPreview:function(){this.dropzone.hidden=true;this.image.hidden=false;this.altField.layout.hidden=false;this.linkInput.layout.hidden=true},showLinkField:function(){this.dropzone.hidden=true;this.image.hidden=true;this.altField.layout.hidden=true;this.linkInput.layout.hidden=false},onLinkInput:function(i){var t=BX.create("img");t.src=i;t.onload=function(){this.showPreview();this.setValue({src:i,src2x:i})}.bind(this)},showLoader:function(){if(this.dropzone&&!this.dropzone.hidden){this.loader.show(this.dropzone);return}this.loader.show(this.preview)},hideLoader:function(){this.loader.hide()},onInputClick:function(i){i.preventDefault()},isChanged:function(){var i=a(this.content);var t=a(this.getValue());if(i.url&&n(i.url)){i.url=s(i.url)}if(t.url&&n(t.url)){t.url=s(t.url)}return JSON.stringify(i)!==JSON.stringify(t)},adjustPreviewBackgroundSize:function(){var i=BX.create("img",{attrs:{src:this.getValue().src}});i.onload=function(){var t=this.preview.getBoundingClientRect();var e="cover";if(i.width>t.width||i.height>t.height){e="contain"}if(i.width<t.width&&i.height<t.height){e="auto"}BX.DOM.write(function(){this.preview.style.backgroundSize=e}.bind(this))}.bind(this)},setValue:function(i){if(i.type!=="icon"){if(!i||!i.src){this.input.innerText="";this.preview.removeAttribute("style");this.input.dataset.ext=""}else{this.input.innerText=i.src;this.input2x.innerText=i.src2x;this.preview.style.backgroundImage='url("'+(i.src2x||i.src)+'")';this.preview.id=BX.util.getRandomString();this.hiddenImage.src=i.src2x||i.src;this.showPreview()}this.image.dataset.fileid=i&&i.id?i.id:-1;this.image.dataset.fileid2x=i&&i.id2x?i.id2x:-1;this.classList=[]}else{this.preview.style.backgroundImage=null;this.classList=i.classList;this.icon.innerHTML='<span class="'+i.classList.join(" ")+'"></span>';this.showPreview();this.type="icon";this.altField.layout.hidden=true;this.altField.setValue("");this.input.innerText=""}if(i.url){this.url.setValue(i.url)}this.adjustPreviewBackgroundSize();this.adjustEditButtonState();this.hideLoader();this.onValueChangeHandler(this);BX.fireEvent(this.layout,"input");var t=new BX.Event.BaseEvent({data:{value:this.getValue()},compatData:[this.getValue()]});this.emit("change",t)},adjustEditButtonState:function(){var i=this.getValue();if(BX.Type.isStringFilled(i.src)){this.editButton.enable()}else{this.editButton.disable()}},reset:function(){this.setValue({type:this.getValue().type,id:-1,src:"",alt:""})},getValue:function(){var i=parseInt(this.image.dataset.fileid);var t=parseInt(this.image.dataset.fileid2x);i=i===i?i:-1;t=t===t?t:-1;var e={type:"",src:"",id:i,id2x:t,src2x:"",alt:"",url:""};if(this.type==="background"){e.type="background";e.src=this.input.innerText.trim();e.src2x=this.input2x.innerText.trim();e.id=i;e.id2x=t}if(this.type==="image"){e.type="image";e.src=this.input.innerText.trim();e.src2x=this.input2x.innerText.trim();e.id=i;e.id2x=t;e.alt=this.altField.getValue()}if(this.type==="icon"){e.type="icon";e.classList=this.classList}e.url=Object.assign({},this.url.getValue(),{enabled:this.urlCheckbox.checked});return e},edit:function(i){BX.Landing.ImageEditor.edit({image:i.src,dimensions:this.dimensions}).then(function(i){return this.upload(i,{context:"imageEditor"})}.bind(this)).then(function(i){this.setValue(i)}.bind(this));var t=new Image;var e="/bitrix/images/landing/close.svg";e=BX.util.add_url_param(e,{action:"openImageEditor"});t.src=e+"?"+ +new Date},upload:function(i,t){if(i.type&&(i.type.includes("text")||i.type.includes("html"))){BX.Landing.ErrorManager.getInstance().add({type:"error",action:"BAD_IMAGE"});return Promise.reject({type:"error",action:"BAD_IMAGE"})}this.showLoader();return this.uploader.upload(i,t).then(function(i){this.hideLoader();return Object.assign({},i[0],{src2x:i[1].src,id2x:i[1].id})}.bind(this))}}})();
/* End */
;
; /* Start:"a:4:{s:4:"full";s:60:"/bitrix/js/landing/ui/field/icon_field.min.js?16322955721574";s:6:"source";s:41:"/bitrix/js/landing/ui/field/icon_field.js";s:3:"min";s:45:"/bitrix/js/landing/ui/field/icon_field.min.js";s:3:"map";s:45:"/bitrix/js/landing/ui/field/icon_field.map.js";}"*/
(function(){"use strict";BX.namespace("BX.Landing.UI.Field");var e=BX.Landing.Utils.clone;BX.Landing.UI.Field.Icon=function(e){BX.Landing.UI.Field.Image.apply(this,arguments);this.uploadButton.layout.innerText=BX.Landing.Loc.getMessage("LANDING_ICONS_FIELD_BUTTON_REPLACE");this.editButton.layout.hidden=true;this.clearButton.layout.hidden=true;this.dropzone.removeEventListener("dragover",this.onDragOver);this.dropzone.removeEventListener("dragleave",this.onDragLeave);this.dropzone.removeEventListener("drop",this.onDrop);this.preview.removeEventListener("dragenter",this.onImageDragEnter);BX.Landing.UI.Panel.IconPanel.getLibraries().then(function(e){if(e.length===0){this.uploadButton.disable()}}.bind(this))};BX.Landing.UI.Field.Icon.prototype={constructor:BX.Landing.UI.Field.Icon,__proto__:BX.Landing.UI.Field.Image.prototype,onUploadClick:function(e){e.preventDefault();BX.Landing.UI.Panel.IconPanel.getInstance().show().then(function(e){this.setValue({type:"icon",classList:e.split(" ")})}.bind(this))},isChanged:function(){return this.getValue().classList.some(function(e){return this.content.classList.indexOf(e)===-1},this)},getValue:function(){var t=this.classList;if(this.selector){var n=this.selector.split("@")[0].replace(".","");t=e(this.classList).concat([n]);t=BX.Landing.Utils.arrayUnique(t)}return{type:"icon",src:"",id:-1,alt:"",classList:t,url:Object.assign({},this.url.getValue(),{enabled:this.urlCheckbox.checked})}},reset:function(){this.setValue({type:"icon",src:"",id:-1,alt:"",classList:[],url:""})}}})();
/* End */
;
; /* Start:"a:4:{s:4:"full";s:61:"/bitrix/js/landing/ui/field/link_field.min.js?163229557211318";s:6:"source";s:41:"/bitrix/js/landing/ui/field/link_field.js";s:3:"min";s:45:"/bitrix/js/landing/ui/field/link_field.min.js";s:3:"map";s:45:"/bitrix/js/landing/ui/field/link_field.map.js";}"*/
(function(){"use strict";BX.namespace("BX.Landing.UI.Field");var t=BX.Landing.Utils.trim;var e=BX.Landing.Utils.clone;var i=BX.Landing.Utils.isPlainObject;var n=BX.Landing.Utils.decodeDataValue;var a=BX.Landing.Utils.fireCustomEvent;var s=BX.Landing.Utils.htmlToElement;var d=BX.Landing.Utils.style;var l=BX.Landing.Utils.escapeText;BX.Landing.UI.Field.Link=function(n){BX.Landing.UI.Field.BaseField.apply(this,arguments);this.options=n.options||{};BX.remove(this.input);this.onValueChangeHandler=n.onValueChange?n.onValueChange:function(){};this.content=i(this.content)?this.content:{};this.content=e(this.content);this.content.text=t(this.content.text);this.content.href=t(l(this.content.href));this.content.target=t(l(this.content.target));this.skipContent=n.skipContent;this.customUrlDisabled=n.disableCustomURL;this.detailPageMode=n.detailPageMode===true;if(!this.containsImage()&&!this.containsHtml()){if(BX.Type.isStringFilled(this.content.text)){this.content.text=this.content.text.replace("&nbsp;"," ")}this.content.text=l(this.content.text)}this.input=new BX.Landing.UI.Field.Text({placeholder:BX.Landing.Loc.getMessage("FIELD_LINK_TEXT_LABEL"),selector:this.selector,content:this.content.text,textOnly:true,onValueChange:function(){this.onValueChangeHandler(this);var t=this.hrefInput.getValue();if(t==="#landing0"){var e=this.input.getValue();var i=this.hrefInput.input.firstElementChild;if(i){var n=i.querySelector(".landing-ui-field-url-placeholder-text");n.innerText=BX.Text.decode(e.replace(/&nbsp;/g," "))}}var a=new BX.Event.BaseEvent({data:{value:this.getValue()},compatData:[this.getValue()]});this.emit("change",a)}.bind(this)});if(this.skipContent){this.input.layout.hidden=true;this.header.hidden=true}this.hrefInput=new BX.Landing.UI.Field.LinkURL({title:BX.Landing.Loc.getMessage("FIELD_LINK_HREF_LABEL"),placeholder:BX.Landing.Loc.getMessage("FIELD_LINK_HREF_PLACEHOLDER"),selector:this.selector,content:this.content.href,onInput:this.onHrefInput.bind(this),textOnly:true,options:this.options,disallowType:n.disallowType,disableBlocks:n.disableBlocks,disableCustomURL:n.disableCustomURL,allowedTypes:n.allowedTypes,detailPageMode:n.detailPageMode===true,sourceField:n.sourceField,onValueChange:function(){this.onValueChangeHandler(this);this.onHrefValueChange();var t=new BX.Event.BaseEvent({data:{value:this.getValue()},compatData:[this.getValue()]});this.emit("change",t)}.bind(this),onNewPage:function(){var t=this.input.getValue();var e=this.hrefInput.input.firstElementChild;if(e){var i=e.querySelector(".landing-ui-field-url-placeholder-text");i.innerHTML=t.replace(/&nbsp;/g," ")}}.bind(this)});this.targetInput=new BX.Landing.UI.Field.DropdownInline({title:BX.Landing.Loc.getMessage("FIELD_LINK_TARGET_LABEL"),selector:this.selector,className:"landing-ui-field-dropdown-inline",content:this.content.target,items:{_self:BX.Landing.Loc.getMessage("FIELD_LINK_TARGET_SELF"),_blank:BX.Landing.Loc.getMessage("FIELD_LINK_TARGET_BLANK"),_popup:BX.Landing.Loc.getMessage("FIELD_LINK_TARGET_POPUP")},onValueChange:function(){this.onValueChangeHandler(this);var t=new BX.Event.BaseEvent({data:{value:this.getValue()},compatData:[this.getValue()]});this.emit("change",t)}.bind(this)});this.mediaButton=new BX.Landing.UI.Button.BaseButton(this.selector+"_media",{html:'<span class="fa fa-bolt"></span>&nbsp;'+BX.Landing.Loc.getMessage("LANDING_CONTENT_URL_MEDIA_BUTTON"),className:"landing-ui-field-link-media",onClick:this.onMediaClick.bind(this),disabled:true});this.mediaLayout=BX.create("div",{props:{className:"landing-ui-field-link-media-layout"}});this.mediaHelpButton=new BX.Landing.UI.Button.BaseButton(this.selector+"_media_qa",{html:'<span class="fa fa-question-circle"></span>&nbsp;',className:"landing-ui-field-link-media-help"});this.mediaHelpButton.layout.addEventListener("mouseover",this.onMediaHelpButtonMouseover.bind(this));this.mediaHelpButton.layout.addEventListener("mouseout",this.onMediaHelpButtonMouseout.bind(this));if(this.containsImage()||this.containsHtml()){this.input.layout.hidden=true;this.header.hidden=true;this.hrefInput.header.innerHTML=this.header.innerHTML}this.wrapper=BX.Landing.UI.Field.Link.createWrapper();this.left=BX.Landing.UI.Field.Link.createLeft();this.center=BX.Landing.UI.Field.Link.createCenter();this.right=BX.Landing.UI.Field.Link.createRight();this.left.appendChild(this.input.layout);this.center.appendChild(this.hrefInput.layout);this.right.appendChild(this.targetInput.layout);this.right.appendChild(this.mediaButton.layout);this.right.appendChild(this.mediaHelpButton.layout);this.wrapper.appendChild(this.left);this.wrapper.appendChild(this.center);this.wrapper.appendChild(this.right);this.layout.appendChild(this.wrapper);this.layout.appendChild(this.mediaLayout);this.layout.classList.add("landing-ui-field-link");if(!this.customUrlDisabled){this.adjustVideo()}if(this.content.target==="_popup"){this.adjustVideo()}this.adjustEditLink();this.adjustTarget()};BX.Landing.UI.Field.Link.createWrapper=function(){return BX.create("div",{props:{className:"landing-ui-field-link-wrapper"}})};BX.Landing.UI.Field.Link.createCenter=function(){return BX.create("div",{props:{className:"landing-ui-field-link-center"}})};BX.Landing.UI.Field.Link.createLeft=function(){return BX.create("div",{props:{className:"landing-ui-field-link-left"}})};BX.Landing.UI.Field.Link.createRight=function(){return BX.create("div",{props:{className:"landing-ui-field-link-right"}})};BX.Landing.UI.Field.Link.prototype={constructor:BX.Landing.UI.Field.Link,__proto__:BX.Landing.UI.Field.BaseField.prototype,superClass:BX.Landing.UI.Field.BaseField,onHrefValueChange:function(){},adjustEditLink:function(){var t=this.hrefInput.getPlaceholderType();var e=BX.Landing.Env.getInstance().getType();if(t==="PAGE"&&e!=="KNOWLEDGE"&&e!=="GROUP"){var i=this.hrefInput.getValue();if(BX.type.isString(i)&&i.length>0){this.hrefInput.getPageData(i).then(function(t){var e=BX.Landing.Main.getInstance().options.params.sef_url.landing_view;var i=e.replace("#site_show#",t.siteId).replace("#landing_edit#",t.id);[].slice.call(this.layout.querySelectorAll(".landing-ui-field-edit-link")).forEach(BX.remove);this.editLink=this.createEditLink(BX.Landing.Loc.getMessage("LANDING_LINK_FILED__EDIT_PAGE_LINK_LABEL"),i);this.layout.appendChild(this.editLink)}.bind(this))}}},createEditLink:function(t,e){return BX.create("div",{props:{className:"landing-ui-field-edit-link"},children:[BX.create("a",{attrs:{href:e,target:"_blank",title:BX.Landing.Loc.getMessage("LANDING_LINK_FILED__EDIT_LINK_TITLE")},text:t})]})},isChanged:function(){return JSON.stringify(this.content)!==JSON.stringify(this.getValue())},containsImage:function(){return!!BX.create("div",{html:this.content.text}).querySelector("img")},containsHtml:function(){var t=s(this.content.text);return!!t&&!t.matches("br")},getValue:function(){var e=this.input.getValue().replace(/&nbsp;/g," ");var a={text:n(t(e)),href:t(this.hrefInput.getValue()),target:t(this.targetInput.getValue())};if(this.isAvailableMedia()&&this.isEnabledMedia()&&this.mediaService){a.attrs={"data-url":t(this.mediaService.getEmbedURL())}}if(this.hrefInput.getDynamic()){if(!i(a.attrs)){a.attrs={}}if(this.hrefInput.input.firstElementChild){a.attrs["data-url"]=this.hrefInput.input.firstElementChild.getAttribute("data-url")}a.attrs["data-dynamic"]=this.hrefInput.getDynamic()}if(this.skipContent){delete a["text"]}return a},setValue:function(t){if(i(t)){this.input.setValue(l(t.text));this.hrefInput.setValue(t.href);this.targetInput.setValue(l(t.target))}this.adjustEditLink();this.adjustTarget()},adjustTarget:function(){if(!this.isAvailableMedia()){var t=BX.Landing.Env.getInstance().getType();var e=this.getValue();this.targetInput.enable();if(t==="KNOWLEDGE"||t==="GROUP"){this.targetInput.disable();if(/^#(\w+)([0-9])$/.test(e.href)){this.targetInput.setValue("_self")}else{this.targetInput.setValue("_blank")}}else{if(e.href.startsWith("#crmFormPopup")){this.targetInput.disable()}if(e.href.startsWith("#crmPhone")){this.targetInput.disable()}}}},reset:function(){this.setValue({text:"",href:"",target:"_self"})},enableMedia:function(){this.mediaButton.enable();this.targetInput.disable();this.targetInput.closePopup();this.targetInput.setValue("_popup");this.showMediaPreview()},disableMedia:function(){if(this.isEnabledMedia()){this.mediaButton.disable();this.targetInput.enable();this.targetInput.closePopup();this.targetInput.setValue("_self");this.hideMediaPreview();this.hideMediaSettings()}},isEnabledMedia:function(){return this.mediaButton.isEnabled()},showMediaSettings:function(){if(this.isAvailableMedia()){this.hideMediaSettings();this.mediaSettings=this.mediaService.getSettingsForm();if(this.mediaSettings){this.mediaLayout.appendChild(this.mediaSettings.layout)}}},hideMediaSettings:function(){if(this.mediaSettings){BX.remove(this.mediaSettings.layout)}},isAvailableMedia:function(){var t=new BX.Landing.MediaService.Factory;return!!t.create(this.hrefInput.getValue())},onMediaClick:function(){if(this.isAvailableMedia()){if(!this.isEnabledMedia()){if(!this.mediaService){this.adjustVideo()}else{this.enableMedia()}}else{this.disableMedia()}}},onMediaHelpButtonMouseover:function(t){BX.Landing.UI.Tool.Suggest.getInstance().show(this.mediaHelpButton.layout,{description:BX.create("div",{props:{className:"landing-ui-field-link-media-help-popup-content"},children:[BX.create("div",{props:{className:"landing-ui-field-link-media-help-popup-content-title"},html:BX.Landing.Loc.getMessage("LANDING_CONTENT_URL_MEDIA_HELP_TITLE")}),BX.create("div",{props:{className:"landing-ui-field-link-media-help-popup-content-content"},html:BX.Landing.Loc.getMessage("LANDING_CONTENT_URL_MEDIA_HELP")})]}).outerHTML,angleOffset:53})},onMediaHelpButtonMouseout:function(){BX.Landing.UI.Tool.Suggest.getInstance().hide()},onVideoPreviewClick:function(){$.fancybox.open({src:this.mediaService.getEmbedURL(),type:"iframe",afterShow:function(t,e){var i=e.$slide.find("iframe")[0];void BX.Landing.MediaPlayer.Factory.create(i)}},{iframe:{scrolling:"auto"}})},showMediaPreview:function(){var t=new BX.Loader({target:this.mediaLayout,mode:"inline",offset:{top:"calc(50% - 55px)",left:"calc(50% - 55px)"}});this.video=t.layout;t.show();this.mediaService.getURLPreviewElement().then(function(t){BX.remove(this.video);this.video=t;this.video.title=BX.Landing.Loc.getMessage("LANDING_CONTENT_URL_PREVIEW_TITLE");this.mediaLayout.appendChild(this.video);this.video.addEventListener("click",this.onVideoPreviewClick.bind(this));this.showMediaSettings()}.bind(this),function(){this.hideMediaSettings();BX.remove(this.video)}.bind(this))},hideMediaPreview:function(){if(this.video){BX.remove(this.video)}},adjustVideo:function(){var t=BX.Landing.Env.getInstance().getType();if(t!=="KNOWLEDGE"&&t!=="GROUP"){var e="attrs"in this.content&&"data-url"in this.content.attrs?this.content.attrs["data-url"]:"";var i=new BX.Landing.MediaService.Factory;this.mediaService=i.create(this.hrefInput.getValue(),BX.Landing.Utils.getQueryParams(e));if(this.mediaService){this.mediaService.url=this.hrefInput.getValue();this.disableMedia();if(this.isAvailableMedia()){this.enableMedia()}}else{this.disableMedia()}}},onHrefInput:function(){if(!this.customUrlDisabled){this.adjustVideo()}this.adjustEditLink();this.adjustTarget()}}})();
/* End */
;
; /* Start:"a:4:{s:4:"full";s:64:"/bitrix/js/landing/ui/field/dropdown_field.min.js?16322955713138";s:6:"source";s:45:"/bitrix/js/landing/ui/field/dropdown_field.js";s:3:"min";s:49:"/bitrix/js/landing/ui/field/dropdown_field.min.js";s:3:"map";s:49:"/bitrix/js/landing/ui/field/dropdown_field.map.js";}"*/
(function(){"use strict";BX.namespace("BX.Landing.UI.Field");var t=BX.Landing.Utils.setTextContent;var i=BX.Landing.Utils.escapeText;var n=BX.Landing.Utils.data;var e=BX.Landing.Utils.offsetTop;var p=BX.Landing.Utils.offsetLeft;BX.Landing.UI.Field.Dropdown=function(i){this.items="items"in i&&i.items?i.items:{};BX.Landing.UI.Field.BaseField.apply(this,arguments);this.setEventNamespace("BX.Landing.UI.Field.Dropdown");this.subscribeFromOptions(BX.Landing.UI.Component.fetchEventsFromOptions(i));this.onChangeHandler=typeof i.onChange==="function"?i.onChange:function(){};this.layout.classList.add("landing-ui-field-dropdown");this.popup=null;this.input.addEventListener("click",this.onInputClick.bind(this));document.addEventListener("click",this.onDocumentClick.bind(this));var e=BX.Landing.PageObject.getRootWindow();e.document.addEventListener("click",this.onDocumentClick.bind(this));if(BX.type.isPlainObject(this.items)){var p=Object.keys(this.items);this.items=p.map(function(t){return{name:this.items[t],value:t}},this)}t(this.input,this.items[0].name);n(this.input,"value",this.items[0].value);if(this.content!==""){this.setValue(this.content)}};BX.Landing.UI.Field.Dropdown.prototype={constructor:BX.Landing.UI.Field.Dropdown,__proto__:BX.Landing.UI.Field.BaseField.prototype,onInputClick:function(t){t.stopPropagation();if(!this.popup||this.popupRoot&&!this.popupRoot.contains(this.popup.popupWindow.popupContainer)){this.popup=new BX.PopupMenuWindow({id:"dropdown_"+ +new Date,bindElement:this.input,maxHeight:196,items:this.items.map(function(t){return{html:t.html,text:!t.html?i(t.name):undefined,onclick:function(){this.onItemClick(t)}.bind(this)}},this),events:{onPopupClose:function(){this.input.classList.remove("landing-ui-active");this.layout.classList.remove("landing-ui-active")}.bind(this)}});this.popupRoot=this.layout.parentElement.parentElement.parentElement;this.popupRoot.appendChild(this.popup.popupWindow.popupContainer);this.popupRoot.style.position="relative"}this.layout.classList.add("landing-ui-active");this.input.classList.add("landing-ui-active");if(this.popup.popupWindow.isShown()){this.popup.close()}else{this.popup.show()}var n=this.input.getBoundingClientRect();var o=p(this.input,this.popupRoot);var s=e(this.input,this.popupRoot);this.popup.popupWindow.popupContainer.style.top=s+n.height+"px";this.popup.popupWindow.popupContainer.style.left=o+"px";this.popup.popupWindow.popupContainer.style.width=n.width+"px"},onItemClick:function(i){t(this.input,i.name);n(this.input,"value",i.value);this.popup.close();this.onChangeHandler(i.value,this.items,this.postfix,this.property);this.onValueChangeHandler(this);BX.fireEvent(this.input,"input");this.emit("onChange")},getValue:function(){var t=this.input.dataset.value;if(t!=="undefined"&&typeof t!=="undefined"){return t}return this.items[0].value},setValue:function(i){this.items.forEach(function(e){if(i==e.value){t(this.input,e.name);n(this.input,"value",e.value)}},this)},isChanged:function(){return this.content!=this.getValue()},onDocumentClick:function(){if(this.popup){this.popup.close()}}}})();
/* End */
;
; /* Start:"a:4:{s:4:"full";s:72:"/bitrix/js/landing/ui/field/dropdown_preview_field.min.js?16322955712746";s:6:"source";s:53:"/bitrix/js/landing/ui/field/dropdown_preview_field.js";s:3:"min";s:57:"/bitrix/js/landing/ui/field/dropdown_preview_field.min.js";s:3:"map";s:57:"/bitrix/js/landing/ui/field/dropdown_preview_field.map.js";}"*/
(function(){"use strict";BX.namespace("BX.Landing.UI.Field");BX.Landing.UI.Field.DropdownPreview=function(i){this.items="items"in i&&i.items?i.items:{};BX.Landing.UI.Field.BaseField.apply(this,arguments);this.layout.classList.add("landing-ui-field-dropdown");this.layout.classList.add("landing-ui-field-dropdown-preview");this.frame=typeof i.frame==="object"?i.frame:null;this.format=typeof i.format==="function"?i.format:function(){};this.postfix=typeof i.postfix==="string"?i.postfix:"";this.property=typeof i.property==="string"?i.property:"";this.changeHandler=typeof i.onChange==="function"?i.onChange:function(){};this.elements=[];this.setValue(this.items[0].value,true);this.input.innerText=this.items[0].name;this.input.addEventListener("click",this.onInputClick.bind(this));this.onFrameLoad()};BX.Landing.UI.Field.DropdownPreview.CreateSelect=function(){return BX.create("select",{props:{className:"landing-ui-field-input landing-ui-field-dropdown"}})};BX.Landing.UI.Field.DropdownPreview.prototype={constructor:BX.Landing.UI.Field.DropdownPreview,__proto__:BX.Landing.UI.Field.BaseField.prototype,superClass:BX.Landing.UI.Field.BaseField,onInputClick:function(i){i.preventDefault();if(!this.popup){var t=this;var e=this.items.map(function(i){return{text:i.name,className:"landing-ui-field-dropdown-preview-item",menuShowDelay:0,subMenuOffsetX:10,items:[{text:'<div class="landing-ui-field-dropdown-preview-item-preview '+i.value+'">Text</div>',className:"landing-ui-field-dropdown-preview-item-child"}],onclick:function(){this.close();t.onChange(i)}}});this.popup=new BX.PopupMenuWindow({id:this.selector+this.property,bindElement:this.input,items:e,zIndex:9e3,angle:false,bindOptions:{forceBindPosition:true},events:{onPopupClose:function(){this.input.classList.remove("landing-ui-active")}.bind(this)}});this.input.parentNode.appendChild(this.popup.popupWindow.popupContainer)}this.input.classList.add("landing-ui-active");var n=BX.pos(this.input,this.input.parentNode);this.popup.popupWindow.popupContainer.style.top=n.bottom+"px";this.popup.popupWindow.popupContainer.style.left="0px";this.popup.popupWindow.popupContainer.style.right=""},onFrameLoad:function(){this.elements=[].slice.call(this.frame.document.querySelectorAll(this.selector));if(this.elements.length){this.items.some(function(i){if(this.elements[0].classList.contains(i.value)){this.setValue(i.value,true)}},this)}},onChange:function(i,t){this.setValue(i.value);this.input.innerText=i.name;if(!t){this.changeHandler(this.getValue(),this.items,this.postfix,this.property);BX.fireEvent(this.layout,"input")}},setValue:function(i){this.input.dataset.value=i},getValue:function(){return this.input.dataset.value}}})();
/* End */
;
; /* Start:"a:4:{s:4:"full";s:60:"/bitrix/js/landing/ui/field/unit_field.min.js?16322955752463";s:6:"source";s:41:"/bitrix/js/landing/ui/field/unit_field.js";s:3:"min";s:0:"";s:3:"map";s:0:"";}"*/
(function(){"use strict";BX.namespace("BX.Landing.UI.Field");BX.Landing.UI.Field.Unit=function(t){BX.Landing.UI.Field.Text.apply(this,arguments);this.layout.classList.add("landing-ui-field-unit");this.unit=BX.Landing.UI.Field.Unit.createUnit();this.onInputHandler=typeof t.onInput==="function"?t.onInput:function(){};this.input.addEventListener("keydown",this.onInputKeydown.bind(this));this.input.addEventListener("input",BX.debounce(this.onInputInput,200,this));this.input.addEventListener("input",this.onInputInputWithoutDebounce.bind(this));this.input.value=t.content;this.input.placeholder=this.placeholder;this.items=t.items;this.unit.innerText=typeof t.unit==="string"?t.unit:"";this.input.min=typeof t.min==="number"?t.min:0;this.input.max=typeof t.max==="number"?t.max:Infinity;this.input.step=typeof t.step==="number"?t.step:1;this.frame=typeof t.frame==="object"?t.frame:null;this.selector=typeof t.selector==="string"?t.selector:null;this.property=typeof t.property==="string"?t.property:null;this.postfix=typeof t.postfix==="string"?t.postfix:"";this.format=typeof t.format==="function"?t.format:function(){};this.elements=null;if(this.frame){this.onFrameLoad()}this.layout.appendChild(this.unit);this.enableTextOnly()};BX.Landing.UI.Field.Unit.createUnit=function(){return BX.create("div",{props:{className:"landing-ui-field-unit-unit"}})};BX.Landing.UI.Field.Unit.prototype={constructor:BX.Landing.UI.Field.Unit,__proto__:BX.Landing.UI.Field.Text.prototype,onFrameLoad:function(){this.elements=[].slice.call(this.frame.document.querySelectorAll(this.selector));if(this.elements.length){var t=parseFloat(BX.style(this.elements[0],this.property));t=t===t?t:0;this.setValue(t)}},onInputInput:function(){this.onInputHandler(this)},onInputInputWithoutDebounce:function(){if(!!this.elements){this.elements.forEach(function(t){this.format(t,this.getValue(),this.items)},this)}},onInputKeydown:function(t){if(t.keyCode===13){t.preventDefault()}},createInput:function(){return BX.create("input",{props:{className:"landing-ui-field-input",type:"number"}})},setValue:function(t){this.input.value=t;BX.fireEvent(this.input,"input")},getValue:function(){return this.input.value},enableEdit:function(){if(this!==BX.Landing.UI.Field.BaseField.currentField&&BX.Landing.UI.Field.BaseField.currentField!==null){BX.Landing.UI.Field.BaseField.currentField.disableEdit()}BX.Landing.UI.Field.BaseField.currentField=this;this.input.focus()},disableEdit:function(){}}})();
/* End */
;
; /* Start:"a:4:{s:4:"full";s:61:"/bitrix/js/landing/ui/field/range_field.min.js?16322955738213";s:6:"source";s:42:"/bitrix/js/landing/ui/field/range_field.js";s:3:"min";s:46:"/bitrix/js/landing/ui/field/range_field.min.js";s:3:"map";s:46:"/bitrix/js/landing/ui/field/range_field.map.js";}"*/
(function(){"use strict";BX.namespace("BX.Landing.UI.Field");BX.Landing.UI.Field.Range=function(t){this.items=BX.type.isArray(t.items)?t.items:[];this.values=new BX.Landing.Collection.BaseCollection;this.isMultiple=typeof t.type==="string"&&t.type==="multiple";this.inputInner=this.createInputInner();this.container=BX.create("div",{props:{className:"landing-ui-field-range-container"}});this.output=this.createOutput();this.sliderFrom=null;this.sliderTo=this.createSlider();this.sliderValue=this.createValue();this.elements=[];this.frame=typeof t.frame==="object"?t.frame:null;this.format=typeof t.format==="function"?t.format:function(){};this.postfix=typeof t.postfix==="string"?t.postfix:"";this.changeHandler=typeof t.onChange==="function"?t.onChange:function(){};this.onValueChangeHandler=t.onValueChange?t.onValueChange:function(){};this.dragStartHandler=typeof t.onDragStart==="function"?t.onDragStart:function(){};this.dragEndHandler=typeof t.onDragEnd==="function"?t.onDragEnd:function(){};var e=BX.Landing.PageObject.getRootWindow();this.jsDD=this.frame?e.jsDD:window.jsDD;this.value=null;this.valueFrom=null;this.valueTo=null;BX.Landing.UI.Field.BaseField.apply(this,arguments);this.layout.classList.add("landing-ui-field-range");this.stepPercent=100/this.values.length;if(this.content===null||this.content===undefined||this.content===""){if(this.isMultiple){this.content={from:this.items[0].value,to:this.items[this.items.length-1].value}}else{this.content=this.items[0].value;this.value=this.items[0].value}}var i=function(t){this.jsDD.stopDrag(t)}.bind(this);BX.Event.bind(window,"mouseup",i);BX.Event.bind(e,"mouseup",i);BX.Event.bind(window.top,"mouseup",i);this.setValue(this.content,true)};BX.Landing.UI.Field.Range.prototype={constructor:BX.Landing.UI.Field.Range,__proto__:BX.Landing.UI.Field.BaseField.prototype,init:function(){this.input.appendChild(this.inputInner);this.input.appendChild(this.sliderValue);this.layout.appendChild(this.container);this.container.appendChild(this.input);if(!this.isMultiple){this.container.appendChild(this.output)}if(this.isMultiple){this.sliderFrom=this.createSlider();this.inputInner.appendChild(this.sliderFrom)}this.inputInner.appendChild(this.sliderTo);this.items.forEach(function(t,e){this.values.add({value:t.value,valuePercent:this.valueToPercent(e),left:this.valueToLeftPercent(t.value),name:t.name})},this);if(this.isMultiple){this.sliderFrom.onbxdragstart=this.onDragStart.bind(this);this.sliderFrom.onbxdrag=this.onDrag.bind(this);this.sliderFrom.onbxdragstop=this.onDragEnd.bind(this);this.jsDD.registerObject(this.sliderFrom)}this.sliderTo.onbxdragstart=this.onDragStart.bind(this);this.sliderTo.onbxdrag=this.onDrag.bind(this);this.sliderTo.onbxdragstop=this.onDragEnd.bind(this);this.jsDD.registerObject(this.sliderTo);if(this.isMultiple){requestAnimationFrame(function(){this.sliderFrom.style.transform="translateX(-"+this.values[this.values.length-1].valuePercent+"%)";this.sliderFrom.style.left=this.values[this.values.length-1].valuePercent+"%"}.bind(this))}if(this.frame){this.onFrameLoad()}},createOutput:function(){this.outputInput=BX.create("div",{props:{className:"landing-ui-field-range-output-input"},text:"0"});return BX.create("div",{props:{className:"landing-ui-field-range-output"},children:[this.outputInput,BX.create("div",{props:{className:"landing-ui-field-range-output-arrows"},children:[BX.create("div",{props:{className:"landing-ui-field-range-output-arrows-up"},events:{click:this.onArrowUpClick.bind(this)}}),BX.create("div",{props:{className:"landing-ui-field-range-output-arrows-down"},events:{click:this.onArrowDownClick.bind(this)}})]})]})},onArrowUpClick:function(){var t=!!this.value?this.values.length-1:0;var e;this.values.forEach(function(e,i){if(e.value===this.value){t=i}},this);e=this.values[t+1]?this.values[t+1]:this.values[t];this.setValue(e.value)},onArrowDownClick:function(){var t=0;var e;this.values.forEach(function(e,i){if(e.value==this.value){t=i}},this);e=this.values[t-1]?this.values[t-1]:this.values[t];this.setValue(e.value)},onFrameLoad:function(){this.elements=[].slice.call(this.frame.document.querySelectorAll(this.selector));if(this.elements.length){var t=this.elements[0];if(this.isMultiple){var e=this.values.find(function(e){return t.classList.contains(e.value)});var i=this.values.find(function(i){return t.classList.contains(i.value)&&i.value!==e});this.setValue({from:!!e?e.value:null,to:!!i?i.value:null},true)}else{var n=this.values.find(function(e){return t.classList.contains(e.value)});this.setValue(!!n?n.value:null,true)}}},getStartXOffset:function(){var t=parseFloat(this.jsDD.current_node.style.left)*(this.inputInner.getBoundingClientRect().width/100);return this.jsDD.current_node.getBoundingClientRect().left+window.pageXOffset-(t===t?t:0)},onDragStart:function(){this.offset=this.getStartXOffset();this.dragStartHandler()},onDrag:function(t){t=(t-this.offset)/this.inputInner.getBoundingClientRect().width*100;t=t<0?0:t>100?100:t;var e=t;var i;var n=parseFloat(this.jsDD.current_node.style.left);n=n===n?n:0;if(t>this.lastPos){e+=this.stepPercent/2;i=this.values.filter(function(t){return e>=t.valuePercent&&t.valuePercent>n},this);i=i[i.length-1]}else{e-=this.stepPercent/2;i=this.values.filter(function(t){return e<=t.valuePercent&&t.valuePercent<n},this);i=i[0]}if(i){if(this.isMultiple){if(this.jsDD.current_node===this.sliderFrom){this.valueFrom=i.value}if(this.jsDD.current_node===this.sliderTo){this.valueTo=i.value}this.setValue({from:this.valueFrom,to:this.valueTo})}else{this.setValue(i.value)}}this.lastPos=t},onChange:function(){this.changeHandler(this.getValue(),this.items,this.postfix,this.property);this.onValueChangeHandler(this)},onDragEnd:function(){this.dragEndHandler()},getValue:function(){var t;if(this.isMultiple){t={from:this.toPercent<this.fromPercent?this.valueTo:this.valueFrom,to:this.toPercent>this.fromPercent?this.valueTo:this.valueFrom}}else{t=this.value}return t},setValue:function(t,e){if(t&&typeof t==="object"){var i=this.values.filter(function(e){return e.value==t.from});var n=this.values.filter(function(e){return e.value==t.to});i=i.length?i[0]:this.values[0];n=n.length?n[0]:this.values[this.values.length-1];if(i){requestAnimationFrame(function(){this.sliderFrom.style.transform="translateX(-"+i.valuePercent+"%)";this.sliderFrom.style.left=i.valuePercent+"%"}.bind(this));this.valueFrom=i.value;this.fromPercent=i.valuePercent}if(n){requestAnimationFrame(function(){this.sliderTo.style.transform="translateX(-"+n.valuePercent+"%)";this.sliderTo.style.left=n.valuePercent+"%"}.bind(this));this.valueTo=n.value;this.toPercent=n.valuePercent}this.updateValuePosition(i.valuePercent,n.valuePercent)}else if(t){var s=this.values.filter(function(e){return e.value==t});s=s.length?s[0]:null;if(s){requestAnimationFrame(function(){this.sliderTo.style.transform="translateX(-"+s.valuePercent+"%)";this.sliderTo.style.left=s.valuePercent+"%"}.bind(this));this.value=t;this.updateValuePosition(s.valuePercent)}}if(!e){this.onChange()}},updateValuePosition:function(t,e){if(typeof t!=="number"&&typeof e!=="number"){t=0;e=100}if(typeof t==="number"&&typeof e!=="number"){e=t;t=0}requestAnimationFrame(function(){this.sliderValue.style.left=Math.min(t,e)+"%";this.sliderValue.style.right=100-Math.max(t,e)+"%"}.bind(this));var i=this.values.filter(function(t){return t.valuePercent==e});i=i.length?i[0]:null;this.outputInput.innerText=!!i?i.name:0},createInputInner:function(){return BX.create("div",{props:{className:"landing-ui-field-range-input-inner"}})},createValue:function(){return BX.create("div",{props:{className:"landing-ui-field-range-value"}})},createSlider:function(){return BX.create("div",{props:{className:"landing-ui-field-range-input-slider"}})},createInput:function(){return BX.create("div",{props:{className:"landing-ui-field-input landing-ui-field-range-input"}})},valueToPercent:function(t){return t/(this.items.length-1)*100},valueToLeftPercent:function(t){return t/this.inputInner.getBoundingClientRect().width*100},isChanged:function(){if(this.isMultiple){return JSON.stringify(this.content)!==JSON.stringify(this.getValue())}return this.content!=this.getValue()}}})();
/* End */
;
; /* Start:"a:4:{s:4:"full";s:68:"/bitrix/js/landing/ui/field/button_group_field.min.js?16322955702679";s:6:"source";s:49:"/bitrix/js/landing/ui/field/button_group_field.js";s:3:"min";s:53:"/bitrix/js/landing/ui/field/button_group_field.min.js";s:3:"map";s:53:"/bitrix/js/landing/ui/field/button_group_field.map.js";}"*/
(function(){"use strict";BX.namespace("BX.Landing.UI.Field");var t=BX.Landing.Utils.isArray;BX.Landing.UI.Field.ButtonGroup=function(t){this.items="items"in t&&t.items?t.items:[];BX.Landing.UI.Field.BaseField.apply(this,arguments);this.layout.classList.add("landing-ui-field-button-group");this.frame=typeof t.frame==="object"?t.frame:null;this.format=typeof t.format==="function"?t.format:function(){};this.postfix=typeof t.postfix==="string"?t.postfix:"";this.property=typeof t.property==="string"?t.property:"";this.multiple=typeof t.multiple==="boolean"?t.multiple:false;this.changeHandler=typeof t.onChange==="function"?t.onChange:function(){};this.elements=[];this.buttons=new BX.Landing.UI.Collection.ButtonCollection;this.value=this.getValue();this.onButtonClick=this.onButtonClick.bind(this);this.input.innerHTML="";this.items.forEach(function(t){var e=this.createButtonByItem(t);this.buttons.add(e);this.input.appendChild(e.layout)},this);if(this.content){this.setValue(this.content,true)}if(this.frame){this.onFrameLoad()}};BX.Landing.UI.Field.ButtonGroup.prototype={constructor:BX.Landing.UI.Field.ButtonGroup,__proto__:BX.Landing.UI.Field.BaseField.prototype,superClass:BX.Landing.UI.Field.BaseField,onFrameLoad:function(){this.elements=[].slice.call(this.frame.document.querySelectorAll(this.selector));if(this.elements.length){this.items.some(function(t){if(this.elements[0].classList.contains(t.value)){this.buttons.getByValue(t.value).activate();return!this.multiple}},this)}},createButtonByItem:function(t){return new BX.Landing.UI.Button.BaseButton(t.id||t.value,{html:t.name,active:t.active,attrs:{value:t.value,title:t.title?BX.Landing.Utils.escapeText(t.title):null},onClick:this.onButtonClick})},onButtonClick:function(t){var e=this.buttons.getByNode(t.currentTarget);var i=e.layout.value;if(this.multiple){if(e.isActive()){e.deactivate()}else{e.activate()}}else{this.deactivateAll();e.activate()}this.onChange(i)},onChange:function(t){if(!this.multiple){this.changeHandler(t,this.items,this.postfix,this.property)}else{this.elements.forEach(function(e){e.classList.toggle(t)},this);this.changeHandler()}this.onValueChangeHandler(this)},isChanged:function(){return this.value!==this.getValue()},setValue:function(e,i){this.deactivateAll();if(this.multiple){e=t(e)?e:[e];e.forEach(function(t){var e=this.buttons.getByValue(t);if(e){e.activate()}},this)}else{var n=this.buttons.getByValue(e);if(n){n.activate()}}if(!i){this.onChange(e)}},deactivateAll:function(){this.buttons.forEach(function(t){t.deactivate()})},getValue:function(){var t=this.buttons.getActive();if(t){return t.layout.value}return null}}})();
/* End */
;
; /* Start:"a:4:{s:4:"full";s:61:"/bitrix/js/landing/ui/field/color_field.min.js?16322955702098";s:6:"source";s:42:"/bitrix/js/landing/ui/field/color_field.js";s:3:"min";s:46:"/bitrix/js/landing/ui/field/color_field.min.js";s:3:"map";s:46:"/bitrix/js/landing/ui/field/color_field.map.js";}"*/
(function(){"use strict";BX.namespace("BX.Landing.UI.Field");BX.Landing.UI.Field.Color=function(t){BX.Landing.UI.Field.ButtonGroup.apply(this,arguments);this.pseudoElement=typeof t.pseudoElement==="string"?t.pseudoElement:null;this.pseudoClass=typeof t.pseudoClass==="string"?t.pseudoClass:null;this.layout.classList.add("landing-ui-field-color");this.stylePath=t.stylePath;this.initButtons()};function t(t,e,s){var n=document.styleSheets;var o=n.length;for(var l=0;l<o;l++){if("href"in document.styleSheets[l]&&(document.styleSheets[l].href&&document.styleSheets[l].href.indexOf("/templates/landing24/")!==-1||document.styleSheets[l].href&&document.styleSheets[l].href.indexOf("/landing24/template_")!==-1||document.styleSheets[l].href&&document.styleSheets[l].href.indexOf("/landing24/kernel_landing_assets_")!==-1)||s&&document.styleSheets[l].href&&document.styleSheets[l].href.indexOf(s)!==-1){var i=document.styleSheets[l].cssRules;if(i){var a=i.length;for(var u=0;u<a;u++){if(i[u].selectorText===t){return i[u].style[e]}}}}}}BX.Landing.UI.Field.Color.prototype={constructor:BX.Landing.UI.Field.Color,__proto__:BX.Landing.UI.Field.ButtonGroup.prototype,initButtons:function(){this.buttons.forEach(function(e){e.layout.classList.add(e.layout.value);e.layout.innerHTML='<span class="landing-ui-button-inner landing-ui-pattern-transparent"></span>';var s=BX.Landing.UI.Adapter.CSSProperty.get(this.property);if((s!=="background-image"&&s!=="background-color"||this.pseudoElement)&&!this.pseudoClass){BX.DOM.read(function(){var t=getComputedStyle(e.layout,this.pseudoElement).getPropertyValue(s);BX.DOM.write(function(){e.layout.classList.remove(e.layout.value);e.layout.style["background-color"]=t})}.bind(this))}else if(this.pseudoClass){BX.DOM.read(function(){var n=t("."+e.layout.value+this.pseudoClass,s,this.stylePath);BX.DOM.write(function(){e.layout.classList.remove(e.layout.value);e.layout.style["background-color"]=n})}.bind(this))}},this)},reset:function(){this.buttons.forEach(function(t){t.layout.classList.remove("landing-ui-active")})}}})();
/* End */
;
; /* Start:"a:4:{s:4:"full";s:65:"/bitrix/js/landing/ui/field/link_url_field.min.js?163229557216049";s:6:"source";s:45:"/bitrix/js/landing/ui/field/link_url_field.js";s:3:"min";s:49:"/bitrix/js/landing/ui/field/link_url_field.min.js";s:3:"map";s:49:"/bitrix/js/landing/ui/field/link_url_field.map.js";}"*/
(function(){"use strict";BX.namespace("BX.Landing.UI.Field");var e=BX.Landing.Utils.isBoolean;var t=BX.Landing.Utils.isArray;var i=BX.Landing.Utils.isString;var n=BX.Landing.Utils.isEmpty;var a=BX.Landing.Utils.append;var s=BX.Landing.Utils.remove;var l=BX.Landing.Utils.data;var o=BX.Landing.Utils.attr;var r=BX.Landing.Utils.addClass;var h=BX.Landing.Utils.removeClass;var c=BX.Landing.Utils.proxy;var d=BX.Landing.Utils.htmlToElement;var u=BX.Landing.Utils.bind;var g=BX.Landing.Utils.unbind;var L=BX.Landing.Utils.join;var p=BX.Landing.Utils.fireEvent;var f=BX.Landing.Utils.hash;var m=BX.Landing.Utils.encodeDataValue;var y=BX.Landing.Utils.capitalize;var T=BX.Landing.Utils.style;var b=BX.Landing.UI.Button.BaseButton;var B=BX.Landing.UI.Field.Dropdown;var v="block";var I="alias";var _="landing";var E="crmFormPopup";var P="crmPhone";var w="system";var k="catalog";var U="element";var N="section";var C="";var S="tel:";var X="skype:";var D="sms:";var R="mailto:";var F={catalog:new RegExp("^#catalog#(Element|Section)([0-9]+)"),catalogElement:new RegExp("^#catalogElement([0-9]+)"),catalogSection:new RegExp("^#catalogSection([0-9]+)"),block:new RegExp("^#block([0-9]+)"),page:new RegExp("^#landing([0-9]+)"),crmForm:new RegExp("^#crmFormPopup([0-9]+)"),crmPhone:new RegExp("^#crmPhone([0-9]+)"),system:new RegExp("^#system_[a-z_-]+"),alias:new RegExp("^#.*")};BX.Landing.UI.Field.LinkURL=function(i){BX.Landing.UI.Field.Text.apply(this,arguments);r(this.layout,"landing-ui-field-link-url");this.requestOptions=i.options||{};this.allowedTypes=t(i.allowedTypes)?i.allowedTypes:[v,_];this.disableBlocks=e(i.disableBlocks)?i.disableBlocks:false;this.disableCustomURL=e(i.disableCustomURL)?i.disableCustomURL:false;this.disallowType=e(i.disallowType)?i.disallowType:false;this.iblocks=t(i.iblocks)?i.iblocks:null;this.allowedCatalogEntityTypes=t(i.allowedCatalogEntityTypes)?i.allowedCatalogEntityTypes:null;this.onInitHandler=BX.type.isFunction(i.onInit)?i.onInit:function(){};this.onNewPageHandler=BX.type.isFunction(i.onNewPage)?i.onNewPage:function(){};this.enableAreas=i.enableAreas;this.customPlaceholder=i.customPlaceholder;this.detailPageMode=i.detailPageMode===true;this.sourceField=i.sourceField;this.currentPageOnly=i.currentPageOnly;this.panelTitle=i.panelTitle;this.onListShow=this.onListShow.bind(this,this.requestOptions);this.onSelectButtonClick=this.onSelectButtonClick.bind(this);this.onTypeChange=this.onTypeChange.bind(this);this.onListItemClick=this.onListItemClick.bind(this);this.popup=null;this.dynamic=null;this.value=null;this.button=this.createButton();this.hrefTypeSwithcer=this.createTypeSwitcher();this.grid=this.createGridLayout();this.gridLeftCell=this.grid.querySelector('[class*="left"]');this.gridCenterCell=this.grid.querySelector('[class*="center"]');this.gridRightCell=this.grid.querySelector('[class*="right"]');s(this.hrefTypeSwithcer.header);a(this.hrefTypeSwithcer.layout,this.gridLeftCell);a(this.input,this.gridCenterCell);a(this.button.layout,this.gridRightCell);a(this.grid,this.layout);this.setHrefPlaceholderByType(this.getHrefStringType());this.setHrefTypeSwitcherValue(this.getHrefStringType());this.removeHrefTypeFromHrefString();this.makeDisplayedHrefValue();if(this.disallowType){void T(this.gridLeftCell,{display:"none"})}};BX.Landing.UI.Field.LinkURL.cache=new BX.Cache.MemoryCache;BX.Landing.UI.Field.LinkURL.TYPE_BLOCK=v;BX.Landing.UI.Field.LinkURL.TYPE_PAGE=_;BX.Landing.UI.Field.LinkURL.TYPE_CRM_FORM=E;BX.Landing.UI.Field.LinkURL.TYPE_CRM_PHONE=P;BX.Landing.UI.Field.LinkURL.TYPE_CATALOG=k;BX.Landing.UI.Field.LinkURL.TYPE_CATALOG_ELEMENT=U;BX.Landing.UI.Field.LinkURL.TYPE_CATALOG_SECTION=N;BX.Landing.UI.Field.LinkURL.matchers=F;BX.Landing.UI.Field.LinkURL.prototype={constructor:BX.Landing.UI.Field.LinkURL,__proto__:BX.Landing.UI.Field.Text.prototype,setIblocks:function(e){this.iblocks=t(e)?e:null},makeDisplayedHrefValue:function(){var e=this.getValue();var t=this.getPlaceholderType();var i;switch(t){case v:i=this.getBlockData(e);break;case _:i=this.getPageData(e);break;case E:i=this.getCrmFormData(e);break;case P:i=this.getCrmPhoneData(e);break;case U:i=this.getCatalogElementData(e);break;case N:i=this.getCatalogSectionData(e);break;case w:i=this.getSystemPage(e);break}if(i){i.then(c(this.createPlaceholder,this)).then(function(e){this.setValue(e,true);if(!this.inited){this.inited=true;this.onInitHandler()}return e}.bind(this)).catch(function(){});this.disableHrefTypeSwitcher();this.setHrefTypeSwitcherValue(C)}this.enableHrefTypeSwitcher()},getPlaceholderData:function(e){e=e||this.getValue();var t=this.getPlaceholderType(e);var i=Promise.resolve({});switch(t){case v:i=this.getBlockData(e);break;case _:i=this.getPageData(e);break;case U:i=this.getCatalogElementData(e);break;case N:i=this.getCatalogSectionData(e);break;case w:i=this.getSystemPage(e);break}return i},removeHrefTypeFromHrefString:function(){var e=this.getValue().replace(new RegExp(this.getHrefStringType(),"g"),"");this.setValue(e,true)},setHrefTypeSwitcherValue:function(e){this.hrefTypeSwithcer.setValue(e)},disableHrefTypeSwitcher:function(){this.hrefTypeSwithcer.disable()},enableHrefTypeSwitcher:function(){this.hrefTypeSwithcer.enable()},getSelectedHrefType:function(){return this.hrefTypeSwithcer.getValue()},getHrefStringType:function(){var e=this.getValue().split(":")[0];var t=C;switch(L(e,":")){case S:t=S;break;case D:t=D;break;case X:t=X;break;case R:t=R;break}return t},setHrefPlaceholderByType:function(e){var t=this.placeholder||BX.Landing.Loc.getMessage("FIELD_LINK_HREF_PLACEHOLDER");switch(e){case C:if(this.disableBlocks&&this.disableCustomURL){t=BX.Landing.Loc.getMessage("FIELD_LINK_HREF_PLACEHOLDER_PAGES_ONLY")}if(!this.disableBlocks&&this.disableCustomURL){t=BX.Landing.Loc.getMessage("FIELD_LINK_HREF_PLACEHOLDER_WITHOUT_CUSTOM_URL")}if(this.allowedTypes.length===1&&this.allowedTypes[0]===k){t=BX.Landing.Loc.getMessage("FIELD_LINK_HREF_PLACEHOLDER_CATALOG_ONLY")}if(this.customPlaceholder){t=this.customPlaceholder}break;case S:t=BX.Landing.Loc.getMessage("LANDING_LINK_FIELD_URL_TYPE_PHONE_PLACEHOLDER");break;case X:t=BX.Landing.Loc.getMessage("LANDING_LINK_FIELD_URL_TYPE_SKYPE_PLACEHOLDER");break;case D:t=BX.Landing.Loc.getMessage("LANDING_LINK_FIELD_URL_TYPE_SMS_PLACEHOLDER");break;case R:t=BX.Landing.Loc.getMessage("LANDING_LINK_FIELD_URL_TYPE_EMAIL_PLACEHOLDER");break}l(this.input,"data-placeholder",t)},getPlaceholderType:function(e){e=e||this.getValue();if(F.block.test(e)){return v}if(F.page.test(e)){return _}if(F.crmForm.test(e)){return E}if(F.crmPhone.test(e)){return P}if(F.catalogElement.test(e)){return U}if(F.catalogSection.test(e)){return N}if(F.system.test(e)){return w}if(F.alias.test(e)){return I}return C},containsPlaceholder:function(){return this.input.innerHTML.indexOf("span")!==-1},createGridLayout:function(){return d('<div class="landing-ui-field-link-url-grid">'+'<div class="landing-ui-field-link-url-grid-left"></div>'+'<div class="landing-ui-field-link-url-grid-center"></div>'+'<div class="landing-ui-field-link-url-grid-right"></div>'+"</div>")},createTypeSwitcher:function(){return new B({items:[{name:BX.Landing.Loc.getMessage("LANDING_LINK_FIELD_URL_TYPE_LINK"),value:C},{name:BX.Landing.Loc.getMessage("LANDING_LINK_FIELD_URL_TYPE_PHONE"),value:S},{name:BX.Landing.Loc.getMessage("LANDING_LINK_FIELD_URL_TYPE_SKYPE"),value:X},{name:BX.Landing.Loc.getMessage("LANDING_LINK_FIELD_URL_TYPE_SMS"),value:D},{name:BX.Landing.Loc.getMessage("LANDING_LINK_FIELD_URL_TYPE_EMAIL"),value:R}],onValueChange:this.onTypeChange})},createButton:function(){return new b("dropdown_button",{text:BX.Landing.Loc.getMessage("LINK_URL_SUGGESTS_SELECT"),className:"landing-ui-button-select-link",onClick:this.onSelectButtonClick})},onTypeChange:function(e){var t=e.getValue();switch(t){case C:g(this.gridRightCell,"mouseover",c(this.onButtonMouseover,this));g(this.gridRightCell,"mouseout",c(this.onButtonMouseout,this));this.button.enable();break;case S:case D:case X:case R:u(this.gridRightCell,"mouseover",c(this.onButtonMouseover,this));u(this.gridRightCell,"mouseout",c(this.onButtonMouseout,this));this.button.disable();break}this.setHrefPlaceholderByType(t)},onButtonMouseover:function(){this.customTypeSuggestTimeout=setTimeout(function(){BX.Landing.UI.Tool.Suggest.getInstance().show(this.button.layout,{description:BX.Landing.Loc.getMessage("LANDING_LINK_FIELD_URL_TYPE_CUSTOM_BUTTON_TITLE")});this.pulseTimeout=setTimeout(function(){r(this.hrefTypeSwithcer.input,"landing-ui-pulse")}.bind(this),1e3)}.bind(this),100)},onButtonMouseout:function(){clearTimeout(this.customTypeSuggestTimeout);BX.Landing.UI.Tool.Suggest.getInstance().hide();clearTimeout(this.pulseTimeout);h(this.hrefTypeSwithcer.input,"landing-ui-pulse")},getBlockData:function(e){return BX.Landing.Backend.getInstance().getBlock({blockId:e.replace("#block","")}).then(function(e){return e.type="block",e})},getPageData:function(e){return BX.Landing.UI.Field.LinkURL.cache.remember(e,function(){var t=parseInt(e.replace("#landing",""));return BX.Landing.Backend.getInstance().getLanding({landingId:t}).then(function(e){if(!e){if(BX.Text.toNumber(t)===0){this.onNewPageHandler();return{type:"landing",id:0,name:BX.Landing.Loc.getMessage("LANDING_LINK_PLACEHOLDER_NEW_PAGE"),siteId:BX.Landing.Main.getInstance().options.site_id}}else{return null}}return{type:"landing",id:e.ID,name:e.TITLE,siteId:e.SITE_ID}}.bind(this))}.bind(this))},getCrmFormData:function(e){return BX.Landing.UI.Field.LinkURL.cache.remember(e,function(){var t=e.replace("#crmFormPopup","");return BX.Landing.Backend.getInstance().action("Form::getList").then(function(e){var i=e.find(function(e){return String(e.ID)===String(t)});if(i){return{type:"crmFormPopup",id:i.ID,name:i.NAME}}return null}.bind(this))}.bind(this))},getCrmPhoneData:function(e){return new Promise(function(t){var i=e.replace("#crmPhone","");var n=BX.Landing.Env.getInstance().getOptions().references.find(function(e){return String(e.value)===String(i)});if(n){t({type:"crmPhone",id:n.value,name:n.text})}else{t(null)}}.bind(this))},getSystemPage:function(e){return BX.Landing.UI.Field.LinkURL.cache.remember(e,function(){var e=this.content.replace("#system_","");var t=BX.Landing.Main.getInstance().options.syspages;if(e in t){return Promise.resolve({type:"system",id:"_"+e,name:t[e].name})}return Promise.reject()}.bind(this))},getCatalogElementData:function(e){return BX.Landing.UI.Field.LinkURL.cache.remember(e,function(){var t=e.match(F.catalogElement)[1];var i={elementId:t};return BX.Landing.Backend.getInstance().action("Utils::getCatalogElement",i)}.bind(this))},getCatalogSectionData:function(e){return BX.Landing.UI.Field.LinkURL.cache.remember(e,function(){var t=e.match(F.catalogSection)[1];var i={sectionId:t};return BX.Landing.Backend.getInstance().action("Utils::getCatalogSection",i)}.bind(this))},createPopup:function(){var e=[];if(this.allowedTypes.includes(v)){e.push({text:BX.Landing.Loc.getMessage("LANDING_LINKS_BUTTON_BLOCKS"),onclick:this.onListShow.bind(this,v)})}if(this.allowedTypes.includes(_)){e.push({text:BX.Landing.Loc.getMessage("LANDING_LINKS_BUTTON_LANDINGS"),onclick:this.onListShow.bind(this,_)})}if(this.allowedTypes.includes(E)){e.push({text:BX.Landing.Loc.getMessage("LANDING_LINKS_BUTTON_FORMS"),onclick:this.onListShow.bind(this,E)})}if(this.allowedTypes.includes(P)){e.push({text:BX.Landing.Loc.getMessage("LANDING_LINKS_BUTTON_PHONES"),onclick:this.onListShow.bind(this,P)})}if(this.allowedTypes.includes(k)){e.push({text:BX.Landing.Loc.getMessage("LANDING_LINKS_BUTTON_CATALOG"),onclick:this.onListShow.bind(this,k)})}this.popup=new BX.PopupMenuWindow({id:"link_list_"+ +new Date,bindElement:this.button.layout,items:e,autoHide:true,events:{onPopupClose:this.button.deactivate.bind(this.button)}});a(this.popup.popupWindow.popupContainer,this.button.layout.parentNode);return this.popup},onSelectButtonClick:function(){if(this.allowedTypes.length===1){this.onListShow(this.allowedTypes[0]);return}this.popup=this.popup||this.createPopup();this.button.enable();this.popup.show();var e=BX.pos(this.button.layout,this.button.layout.parentNode);this.popup.popupWindow.popupContainer.style.top=e.bottom+"px";this.popup.popupWindow.popupContainer.style.left="auto";this.popup.popupWindow.popupContainer.style.right="0"},onListShow:function(e,i){if(this.popup){this.popup.close()}if(i===k){var n=this.iblocks;if(!t(n)){n=BX.Landing.Main.getInstance().options.iblocks}void BX.Landing.UI.Panel.Catalog.getInstance().show(n,this.allowedCatalogEntityTypes).then(this.onListItemClick);return}e.enableAreas=this.enableAreas;e.dynamicMode=true;e.currentPageOnly=this.currentPageOnly;e.panelTitle=this.panelTitle;if(this.detailPageMode){e.source=this.sourceField.getValue().source;void BX.Landing.UI.Panel.DetailPage.getInstance().show(e).then(this.onListItemClick)}else{var a=BX.Landing.UI.Panel.URLList.getInstance();void a.show(i,e).then(this.onListItemClick)}},isEditPrevented:function(){if(!e(this.editPrevented)){this.editPrevented=this.disableCustomURL||this.containsPlaceholder()}return this.editPrevented},setEditPrevented:function(e){this.editPrevented=e},enableEdit:function(){if(!this.isEditPrevented()&&!this.disableCustomURL){BX.Landing.UI.Field.Text.prototype.enableEdit.apply(this)}},createPlaceholder:function(e){if(i(e)){return e}var t=d('<span class="landing-ui-field-url-placeholder">'+'<span class="landing-ui-field-url-placeholder-preview"></span>'+'<span class="landing-ui-field-url-placeholder-text">'+m(e.name)+"</span>"+'<span class="landing-ui-field-url-placeholder-delete"></span>'+"</span>");var a=t.querySelector('[class*="delete"]');u(a,"click",c(this.onPlaceholderRemoveClick,this));if(!n(e.image)&&i(e.image)){var s=t.querySelector('[class*="preview"]');o(s,{style:"background-image: url('"+e.image+"')"});if(e.subType===N){r(s,"section")}}if(e.type===k){e.chain.push(e.name);var l=L(e.name,"\n",e.chain.join(" / "));o(t,{"data-dynamic":{type:L(k,y(e.subType)),value:e.id},"data-placeholder":L("#",e.type,y(e.subType),e.id),"data-url":L("#",e.type,y(e.subType),e.id)});t.setAttribute("title",l);return t}o(t,{"data-placeholder":L("#",e.type,e.id),"data-url":L("#",e.type,e.id)});t.setAttribute("title",e.name);return t},onPlaceholderRemoveClick:function(e){this.setEditPrevented(false);this.enableEdit();s(e.target.parentNode);this.setValue("");p(this.layout,"input");this.onInputHandler(this.input.innerText)},onListItemClick:function(e){var t=Promise.resolve(e);if(e.type==="block"){t=this.getBlockData("#block"+e.id)}t.then(function(e){this.setValue(this.createPlaceholder(e));this.disableHrefTypeSwitcher();this.setHrefTypeSwitcherValue(C);p(this.layout,"input")}.bind(this))},getNewLabel:function(){if(!this.newLabel){this.newLabel=BX.create({tag:"div",props:{className:"landing-ui-field-link-new-label"},text:BX.Landing.Loc.getMessage("LANDING_LINK_NEW_PAGE_LABEL")})}return this.newLabel},showNewLabel:function(){BX.Dom.style(this.gridCenterCell,{position:"relative",overflow:"visible"});BX.Dom.append(this.getNewLabel(),this.gridCenterCell)},hideNewLabel:function(){BX.Dom.style(this.gridCenterCell,"overflow",null);BX.Dom.remove(this.getNewLabel())},setValue:function(e,t){if(typeof e==="object"&&!BX.Type.isNil(e)){this.disableEdit();this.setEditPrevented(true);this.input.innerHTML="";a(e,this.input);this.value=e.dataset.placeholder;this.dynamic=e.dataset.dynamic;if(this.value==="#landing0"){this.showNewLabel()}else{this.hideNewLabel()}if(!t){this.onInputHandler(this.input.innerText)}}else if(!BX.Type.isNil(e)){this.setEditPrevented(false);this.input.innerText=e.toString().trim();this.value=null;this.dynamic=null;this.enableHrefTypeSwitcher();this.hideNewLabel()}if(!t){if(BX.type.isString(this.value)){this.getPlaceholderData(this.value).then(function(e){this.onValueChangeHandler(e)}.bind(this)).catch(function(){});return}this.onValueChangeHandler(null)}},getDynamic:function(){return this.dynamic},getValue:function(){return this.getSelectedHrefType()+(this.value?this.value:this.input.innerText)}}})();
/* End */
;
; /* Start:"a:4:{s:4:"full";s:65:"/bitrix/js/landing/ui/field/dropdown_inline.min.js?16322955712126";s:6:"source";s:46:"/bitrix/js/landing/ui/field/dropdown_inline.js";s:3:"min";s:50:"/bitrix/js/landing/ui/field/dropdown_inline.min.js";s:3:"map";s:50:"/bitrix/js/landing/ui/field/dropdown_inline.map.js";}"*/
(function(){"use strict";BX.namespace("BX.Landing.UI.Field");BX.Landing.UI.Field.DropdownInline=function(t){this.items="items"in t&&t.items?t.items:{};BX.Landing.UI.Field.BaseField.apply(this,arguments);this.setEventNamespace("BX.Landing.UI.Field.DropdownInline");this.subscribeFromOptions(BX.Landing.UI.Component.fetchEventsFromOptions(t));this.popup=null;this.input.addEventListener("click",this.onInputClick.bind(this));this.layout.classList.add("landing-ui-field-dropdown-inline");if(BX.type.isPlainObject(this.items)){var i=Object.keys(this.items);this.items=i.map(function(t){return{name:this.items[t],value:t}},this)}this.input.innerText=this.items[0].name;this.input.dataset.value=this.items[0].value;this.setValue(this.content,this.options.skipInitialEvent)};BX.Landing.UI.Field.DropdownInline.prototype={constructor:BX.Landing.UI.Field.DropdownInline,__proto__:BX.Landing.UI.Field.BaseField.prototype,onInputClick:function(){if(!this.popup){this.popup=new BX.PopupMenuWindow({id:this.selector+"_dropdown_popup_",bindElement:this.input,items:this.items.map(function(t){return{text:t.name,onclick:function(){this.onItemClick(t)}.bind(this)}},this)});this.layout.appendChild(this.popup.popupWindow.popupContainer)}this.popup.show();var t=BX.pos(this.input,this.layout);this.popup.popupWindow.popupContainer.style.top=t.bottom+"px";this.popup.popupWindow.popupContainer.style.left=t.left+"px"},closePopup:function(){if(this.popup){this.popup.close()}},onItemClick:function(t){this.input.innerText=t.name;this.input.dataset.value=t.value;this.popup.close();BX.fireEvent(this.input,"input");this.emit("onChange")},getValue:function(){return typeof this.input.dataset.value!=="undefined"?this.input.dataset.value:this.items[0].value},setValue:function(t,i){this.items.forEach(function(n){if(t===n.value){this.input.innerText=n.name;this.input.dataset.value=n.value;if(!i){this.emit("onChange")}}},this)},setItems:function(t){if(BX.type.isArray(t)){this.items=BX.clone(t);this.popup=null;this.input.innerText=this.items[0].name;this.input.dataset.value=this.items[0].value}}}})();
/* End */
;
; /* Start:"a:4:{s:4:"full";s:58:"/bitrix/js/landing/ui/field/dnd_list.min.js?16322955719052";s:6:"source";s:39:"/bitrix/js/landing/ui/field/dnd_list.js";s:3:"min";s:43:"/bitrix/js/landing/ui/field/dnd_list.min.js";s:3:"map";s:43:"/bitrix/js/landing/ui/field/dnd_list.map.js";}"*/
(function(){"use strict";BX.namespace("BX.Landing.UI.Field");var t=BX.Landing.Utils.addClass;var e=BX.Landing.Utils.removeClass;var i=BX.Landing.Utils.hasClass;var n=BX.Landing.Utils.isBoolean;var a=BX.Landing.Utils.isArray;var s=BX.Landing.Utils.create;var o=BX.Landing.Utils.append;var r=BX.Landing.Utils.insertAfter;var l=BX.Landing.Utils.insertBefore;var h=BX.Landing.Utils.attr;var d=BX.Landing.Utils.slice;var u=BX.Landing.Utils.style;var p=BX.Landing.Utils.bind;var c=BX.Landing.Utils.unbind;var g=BX.Landing.Utils.data;var v=BX.Landing.Utils.remove;var m=BX.Landing.Utils.nextSibling;var f=BX.Landing.Utils.prevSibling;var L=BX.Landing.Utils.escapeHtml;var B=BX.Landing.Utils.findParent;var A=BX.Landing.Utils.offsetTop;var D=BX.Landing.Utils.offsetLeft;BX.Landing.UI.Field.DragAndDropList=function(e){BX.Landing.UI.Field.BaseField.apply(this,arguments);t(this.layout,"landing-ui-field-dnd-list");this.isMultiple=n(e.multiple)?e.multiple:false;this.items=a(e.items)?e.items:[];this.value=a(e.value)?e.value:[];this.onDragStart=this.onDragStart.bind(this);this.onDragEnd=this.onDragEnd.bind(this);this.onDragOver=this.onDragOver.bind(this);this.onItemDragOver=this.onItemDragOver.bind(this);this.onItemDragLeave=this.onItemDragLeave.bind(this);this.onDragLeave=this.onDragLeave.bind(this);this.onDrop=this.onDrop.bind(this);this.onDrag=this.onDrag.bind(this);this.onRemoveClick=this.onRemoveClick.bind(this);this.onElementClick=this.onElementClick.bind(this);this.onMouseWheel=this.onMouseWheel.bind(this);this.onMouseOver=this.onMouseOver.bind(this);this.onMouseLeave=this.onMouseLeave.bind(this);if(typeof window.onwheel!=="undefined"){this.wheelEventName="wheel"}else if(typeof window.onmousewheel!=="undefined"){this.wheelEventName="mousewheel"}this.target=s("div",{props:{className:"landing-ui-field-dnd-target"},children:[s("div",{props:{className:"landing-ui-field-dnd-target-browser-header"},children:[s("span"),s("span"),s("span")]})]});this.addButton=new BX.Landing.UI.Button.BaseButton("add_catalog_item",{onClick:this.onAddItemClick.bind(this),className:"landing-ui-field-dnd-add-button"});this.valueArea=s("div",{props:{classList:"landing-ui-field-dnd-list-value"}});this.itemsArea=s("div",{props:{classList:"landing-ui-field-dnd-list-items"}});o(this.valueArea,this.target);o(this.target,this.input);o(this.addButton.layout,this.target);p(this.valueArea,"dragover",this.onDragOver);p(this.valueArea,"dragleave",this.onDragLeave);p(this.valueArea,"drop",this.onDrop);this.items.forEach(function(t){o(this.createItem(t),this.itemsArea)},this);this.value.forEach(function(t){var e=this.getItem(t);if(e){o(this.createItem(e),this.valueArea)}},this);this.adjustPlaceholder();this.value=this.getValue()};BX.Landing.UI.Field.DragAndDropList.prototype={constructor:BX.Landing.UI.Field.DragAndDropList,__proto__:BX.Landing.UI.Field.BaseField.prototype,onDragStart:function(e){this.dragItem=e.currentTarget;this.dragIndex=d(this.valueArea.children).findIndex(function(t){return t===e.currentTarget});this.valueAreaRect=this.valueArea.getBoundingClientRect();t(this.dragItem,"landing-ui-ondrag");t(this.valueArea,"landing-ui-ondrag")},onDragEnd:function(){e(this.valueArea,"landing-ui-over");e(this.dragItem,"landing-ui-ondrag");e(this.valueArea,"landing-ui-ondrag");d(this.valueArea.children).forEach(function(t){u(t,null)});this.cloned=null;this.dragItem=null;if(this.isChanged()){this.onValueChangeHandler(this);this.value=this.getValue()}},onDragOver:function(e){e.preventDefault();e.dataTransfer.dropEffect="copy";t(e.currentTarget,"landing-ui-over")},onItemDragOver:function(t){var e=t.currentTarget;if(this.itemsArea.contains(this.dragItem)||this.valueArea.contains(this.dragItem)){if(this.valueArea.contains(e)&&e!==this.cloned){var i=e.getBoundingClientRect();var n=i.top+i.height/2;if(!this.cloned&&!this.valueArea.contains(this.dragItem)){this.cloned=this.createItemFromElement(this.dragItem);o(this.cloned,this.valueArea)}if(!this.cloned&&this.valueArea.contains(this.dragItem)){this.cloned=this.dragItem}if(t.clientY>n&&m(e)!==this.cloned){return r(this.cloned,e)}if(t.clientY<n&&f(e)!==this.cloned){return l(this.cloned,e)}}}this.adjustPopupPosition()},onAddItemClick:function(t){t.preventDefault();t.stopPropagation();if(!this.popup){this.popup=new BX.Main.Popup({id:"catalog_blocks_list",bindElement:this.addButton.layout,content:this.itemsArea,autoHide:true,height:176});this.popup.contentContainer.style.overflowX="hidden";p(this.popup.popupContainer,"mouseover",this.onMouseOver);p(this.popup.popupContainer,"mouseleave",this.onMouseLeave);var e=BX.Landing.PageObject.getRootWindow();p(e.document,"click",this.onDocumentClick.bind(this));o(this.popup.popupContainer,B(this.addButton.layout,{className:"landing-ui-panel-content-body-content"}))}if(this.popup.isShown()){this.popup.close()}else{this.popup.show()}this.adjustPopupPosition()},onMouseOver:function(){p(this.popup.popupContainer,this.wheelEventName,this.onMouseWheel);p(this.popup.popupContainer,"touchmove",this.onMouseWheel)},onMouseLeave:function(){c(this.popup.popupContainer,this.wheelEventName,this.onMouseWheel);c(this.popup.popupContainer,"touchmove",this.onMouseWheel)},onMouseWheel:function(t){t.stopPropagation();t.preventDefault();var e=BX.Landing.UI.Panel.Content.getDeltaFromEvent(t);var i=this.popup.contentContainer.scrollTop;requestAnimationFrame(function(){this.popup.contentContainer.scrollTop=i-e.y}.bind(this))},adjustPopupPosition:function(){if(this.popup){requestAnimationFrame(function(){var t=B(this.addButton.layout,{className:"landing-ui-panel-content-body-content"});var e=A(this.addButton.layout,t);var i=D(this.addButton.layout,t);var n=this.addButton.layout.getBoundingClientRect();var a=this.popup.popupContainer.getBoundingClientRect();var s=14;this.popup.popupContainer.style.top=e+n.height+s+"px";this.popup.popupContainer.style.left=i-a.width/2+n.width/2+"px";this.popup.setAngle({offset:71,position:"top"})}.bind(this))}},createItemFromElement:function(t){var e=t.querySelector("img");var i={name:t.innerText,value:g(t,"value")};if(e){i.image=e.src}return this.createItem(i)},onDragLeave:function(t){e(t.currentTarget,"landing-ui-over")},onItemDragLeave:function(t){t.stopPropagation()},onDrop:function(t){t.stopPropagation();if(this.itemsArea.contains(this.dragItem)||this.valueArea.contains(this.dragItem)){if(!this.valueArea.contains(this.dragItem)&&!this.valueArea.contains(this.cloned)){var e=this.createItemFromElement(this.dragItem);o(e,this.valueArea);this.cloned=null;this.adjustPlaceholder();this.adjustPopupPosition()}}if(this.isChanged()){this.onValueChangeHandler(this);this.value=this.getValue()}},onDrag:function(t){if(this.cloned&&this.valueArea.contains(this.cloned)){if(t.clientX>this.valueAreaRect.right){v(this.cloned);this.cloned=null;this.adjustPlaceholder();this.adjustPopupPosition()}}},onRemoveClick:function(t){t.preventDefault();t.stopPropagation();v(t.currentTarget.parentNode);this.adjustPlaceholder();this.adjustPopupPosition();if(this.isChanged()){this.onValueChangeHandler(this);this.value=this.getValue()}},onElementClick:function(t){t.preventDefault();t.stopPropagation();if(this.itemsArea.contains(t.currentTarget)){var e=this.createItemFromElement(t.currentTarget);o(e,this.valueArea);this.adjustPlaceholder();this.adjustPopupPosition()}if(this.isChanged()){this.onValueChangeHandler(this);this.value=this.getValue()}},getSelectedItem:function(){return d(this.valueArea.children).find(function(t){return i(t,"landing-ui-selected")})||d(this.itemsArea.children).find(function(t){return i(t,"landing-ui-selected")})},onDocumentClick:function(){if(this.popup){this.popup.close()}},adjustPlaceholder:function(){if(d(this.valueArea.children).length===0){this.placeholder=this.createValuePlaceholder();o(this.placeholder,this.valueArea)}else if(this.placeholder){v(this.placeholder);this.placeholder=null}},getItem:function(t){return this.items.find(function(e){return e.value==t})},createValuePlaceholder:function(){return s("div",{props:{className:"landing-ui-field-dnd-value-placeholder"},children:[s("span",{html:BX.Landing.Loc.getMessage("LANDING_FIELD_CATALOG_CONSTRUCTOR_PLACEHOLDER_TEXT")})]})},createItem:function(t){var e=s("div",{props:{className:"landing-ui-field-dnd-list-item"+(t.image?" landing-ui-with-image":"")},attrs:{title:t.name},html:t.image?s("img",{props:{src:t.image}}).outerHTML:L(t.name)});var i=s("span",{props:{className:"landing-ui-field-dnd-list-item-remove"}});o(i,e);g(e,"data-value",t.value);h(e,"draggable","true");p(e,"dragstart",this.onDragStart);p(e,"dragend",this.onDragEnd);p(e,"dragover",this.onItemDragOver);p(e,"dragleave",this.onItemDragLeave);p(e,"drag",this.onDrag);p(i,"click",this.onRemoveClick);p(e,"click",this.onElementClick);return e},isChanged:function(){return JSON.stringify(this.value)!==JSON.stringify(this.getValue())},getValue:function(){var t=d(this.valueArea.children);t=t.filter(function(t){return i(t,"landing-ui-field-dnd-list-item")});return t.map(function(t){return g(t,"data-value")})}}})();
/* End */
;
; /* Start:"a:4:{s:4:"full";s:63:"/bitrix/js/landing/ui/field/sortable_list.min.js?16322955742604";s:6:"source";s:44:"/bitrix/js/landing/ui/field/sortable_list.js";s:3:"min";s:0:"";s:3:"map";s:0:"";}"*/
(function(){"use strict";BX.namespace("BX.Landing.UI.Field");var i=BX.Landing.Utils.remove;var e=BX.Landing.Utils.unbind;var t=BX.Landing.Utils.addClass;var n=BX.Landing.Utils.removeClass;var a=BX.Landing.Utils.encodeDataValue;var r=BX.Landing.Utils.prepend;var l=BX.Landing.Utils.append;var s=BX.Landing.Utils.create;var d=BX.Landing.Utils.data;var g=BX.Landing.Utils.slice;var o=BX.Landing.Utils.bind;BX.Landing.UI.Field.SortableList=function(i){BX.Landing.UI.Field.DragAndDropList.apply(this,arguments);t(this.layout,"landing-ui-field-sortable-list");this.makePreview();r(this.preview,this.target)};BX.Landing.UI.Field.SortableList.prototype={constructor:BX.Landing.UI.Field.SortableList,__proto__:BX.Landing.UI.Field.DragAndDropList.prototype,onDragStart:function(i){BX.Landing.UI.Field.DragAndDropList.prototype.onDragStart.call(this,i);t(this.preview,"landing-ui-ondrag");t(this.dragItem,"landing-ui-ondrag")},onDragEnd:function(i){BX.Landing.UI.Field.DragAndDropList.prototype.onDragEnd.call(this,i);n(this.preview,"landing-ui-ondrag");n(this.dragItem,"landing-ui-ondrag");this.makePreview()},onElementClick:function(){},makePreview:function(){if(!this.preview){this.preview=s("div",{props:{className:"landing-ui-field-sortable-list-preview"}})}this.preview.innerHTML="";this.getValue().forEach(function(i){l(this.createPreviewItem(this.getItem(i).preview,i),this.preview)},this)},createItem:function(t){var n=BX.Landing.UI.Field.DragAndDropList.prototype.createItem.call(this,t);i(n.querySelector(".landing-ui-field-dnd-list-item-remove"));e(n,"drag",this.onDrag);r(s("span",{props:{className:"landing-ui-field-dnd-list-item-drag"}}),n);o(n,"mouseover",this.highlightByValue.bind(this,t.value));o(n,"mouseout",this.removeHighLightByValue.bind(this,t.value));return n},createPreviewItem:function(i,e){return s("div",{props:{className:"landing-ui-field-sortable-list-preview-item"},attrs:{"data-value":a(e)},children:[s("img",{props:{src:i},events:{mouseover:this.highlightByValue.bind(this,e),mouseout:this.removeHighLightByValue.bind(this,e)}})]})},highlightByValue:function(i){var e=this.getPreviewByValue(i);var n=this.getElementByValue(i);if(e){t(e,"landing-ui-active")}if(n){t(n,"landing-ui-active")}},removeHighLightByValue:function(i){var e=this.getPreviewByValue(i);var t=this.getElementByValue(i);if(e){n(e,"landing-ui-active")}if(t){n(t,"landing-ui-active")}},getElementByValue:function(i){return g(this.valueArea.children).find(function(e){return d(e,"data-value")==i})},getPreviewByValue:function(i){return g(this.preview.children).find(function(e){return d(e,"data-value")==i})}}})();
/* End */
;
; /* Start:"a:4:{s:4:"full";s:64:"/bitrix/js/landing/ui/field/position_field.min.js?16322955721930";s:6:"source";s:45:"/bitrix/js/landing/ui/field/position_field.js";s:3:"min";s:0:"";s:3:"map";s:0:"";}"*/
(function(){"use strict";BX.namespace("BX.Landing.UI.Field");var i=BX.Landing.Utils.addClass;var t=BX.Landing.Utils.clone;var e=BX.Landing.Utils.append;var a=BX.Landing.Utils.create;var n=[{name:"",value:"top-left"},{name:"",value:"top-center"},{name:"",value:"top-right"},{name:"",value:"middle-left"},{name:"",value:"middle-center"},{name:"",value:"middle-right"},{name:"",value:"bottom-left"},{name:"",value:"bottom-center"},{name:"",value:"bottom-right"}];BX.Landing.UI.Field.Position=function(s){this.dataItems=s.items?t(s.items):{};this.mode=s.mode?s.mode:"ball";if(Object.keys(this.dataItems).length){s.items=n.map(function(i){if(i.value in this.dataItems){if("content"in this.dataItems[i.value]){i.name=this.dataItems[i.value].content}if("value"in this.dataItems[i.value]){i.value=this.dataItems[i.value].value}}return i},this)}else{s.items=n}BX.Landing.UI.Field.ButtonGroup.apply(this,arguments);i(this.layout,"landing-ui-field-position");i(this.layout,"landing-ui-field-position-mode-"+this.mode);this.wrapper=a("div",{props:{className:"landing-ui-field-position-wrapper"}});this.container=a("div",{props:{className:"landing-ui-field-position-container"},children:this.buttons.map(function(i){return i.layout})});e(this.container,this.wrapper);var l=a("div",{props:{className:"landing-ui-field-position-stripes"},children:[a("span",{props:{className:"landing-ui-field-position-stripes-item"}}),a("span",{props:{className:"landing-ui-field-position-stripes-item"}}),a("span",{props:{className:"landing-ui-field-position-stripes-item"}}),a("span",{props:{className:"landing-ui-field-position-stripes-item"}}),a("span",{props:{className:"landing-ui-field-position-stripes-item"}})]});e(l,this.wrapper);e(this.wrapper,this.input);this.setValue(s.value,true);this.value=this.getValue()};BX.Landing.UI.Field.Position.prototype={constructor:BX.Landing.UI.Field.Position,__proto__:BX.Landing.UI.Field.ButtonGroup.prototype}})();
/* End */
;
; /* Start:"a:4:{s:4:"full";s:64:"/bitrix/js/landing/ui/field/checkbox_field.min.js?16322955702717";s:6:"source";s:45:"/bitrix/js/landing/ui/field/checkbox_field.js";s:3:"min";s:49:"/bitrix/js/landing/ui/field/checkbox_field.min.js";s:3:"map";s:49:"/bitrix/js/landing/ui/field/checkbox_field.map.js";}"*/
(function(){"use strict";BX.namespace("BX.Landing.UI.Field");var i=BX.Landing.Utils.addClass;var t=BX.Landing.Utils.isArray;var e=BX.Landing.Utils.isPlainObject;var n=BX.Landing.Utils.isFunction;var a=BX.Landing.Utils.create;var l=BX.Landing.Utils.random;var s=BX.Landing.Utils.escapeHtml;var r=BX.Landing.Utils.append;var c=BX.Landing.Utils.slice;var u=BX.Landing.Utils.encodeDataValue;var d=BX.Landing.Utils.decodeDataValue;var h=BX.Landing.Utils.isNumber;var o=BX.Landing.Utils.isBoolean;var p=BX.Landing.Utils.data;var f=BX.Landing.Utils.clone;BX.Landing.UI.Field.Checkbox=function(e){BX.Landing.UI.Field.BaseField.apply(this,arguments);i(this.layout,"landing-ui-field-checkbox");this.onChangeHandler=n(e.onChange)?e.onChange:function(){};this.items=t(e.items)?e.items:[];this.value=t(e.value)?e.value:null;this.depth=h(e.depth)?e.depth:0;this.compact=o(e.compact)?e.compact:false;this.multiple=e.multiple!==false;p(this.layout,"data-depth",this.depth);p(this.layout,"data-compact",this.compact);if(t(this.value)){this.value=this.value.map(function(i){return d(i)})}if(!t(this.value)){this.value=this.items.filter(function(i){return i.checked}).map(function(i){return d(i.value)})}this.content=this.value;this.items.forEach(this.addItem,this)};BX.Landing.UI.Field.Checkbox.prototype={constructor:BX.Landing.UI.Field.Checkbox,__proto__:BX.Landing.UI.Field.BaseField.prototype,addItem:function(i){if(e(i)){var t="checkbox_item_"+l();var n=a("div",{props:{className:"landing-ui-field-checkbox-item"+(i.disabled?" landing-ui-disabled":"")},children:[a("input",{props:{className:"landing-ui-field-checkbox-item-checkbox"},attrs:{id:t,type:"checkbox",value:u(i.value),checked:this.value.find(function(t){return t==i.value})!==undefined},events:{change:this.onItemChange.bind(this)}}),a("label",{props:{className:"landing-ui-field-checkbox-item-label"},attrs:{for:t},html:i.html?i.html:s(i.name)})]});r(n,this.input)}return n},onItemChange:function(){this.onChangeHandler(this);this.onValueChangeHandler(this);this.emit("onChange")},isChanged:function(){var i=f(this.content).sort();var t=this.getValue().sort();return JSON.stringify(i)!==JSON.stringify(t)},setValue:function(i){if(t(i)){c(this.input.children).forEach(function(i){i.querySelector("input").checked=false});i.forEach(function(i){var t=c(this.input.children).find(function(t){return d(t.querySelector("input").value)==i},this);if(t){t.querySelector("input").checked=true}},this)}},getValue:function(){var i=c(this.input.children).filter(function(i){return i.querySelector("input").checked}).map(function(i){return d(i.querySelector("input").value)});if(!this.multiple){return i.length>0?i[0]:false}return i}}})();
/* End */
;
; /* Start:"a:4:{s:4:"full";s:60:"/bitrix/js/landing/ui/field/radio_field.min.js?1632295573469";s:6:"source";s:42:"/bitrix/js/landing/ui/field/radio_field.js";s:3:"min";s:0:"";s:3:"map";s:0:"";}"*/
(function(){"use strict";BX.namespace("BX.Landing.UI.Field");BX.Landing.UI.Field.Radio=function(i){BX.Landing.UI.Field.Checkbox.apply(this,arguments)};BX.Landing.UI.Field.Radio.prototype={constructor:BX.Landing.UI.Field.Radio,__proto__:BX.Landing.UI.Field.Checkbox.prototype,superclass:BX.Landing.UI.Field.Checkbox.prototype,addItem:function(i){var e=this.superclass.addItem.call(this,i);if(e){var n=e.querySelector("input");if(n){n.type="radio";n.name=this.id}}}}})();
/* End */
;
; /* Start:"a:4:{s:4:"full";s:67:"/bitrix/js/landing/ui/field/multiselect_field.min.js?16322955725639";s:6:"source";s:48:"/bitrix/js/landing/ui/field/multiselect_field.js";s:3:"min";s:52:"/bitrix/js/landing/ui/field/multiselect_field.min.js";s:3:"map";s:52:"/bitrix/js/landing/ui/field/multiselect_field.map.js";}"*/
(function(){"use strict";BX.namespace("BX.Landing.UI.Field");var t=BX.Landing.Utils.addClass;var i=BX.Landing.Utils.hasClass;var n=BX.Landing.Utils.removeClass;var e=BX.Landing.Utils.isArray;var a=BX.Landing.Utils.isFunction;var s=BX.Landing.Utils.create;var l=BX.Landing.Utils.random;var o=BX.Landing.Utils.escapeHtml;var u=BX.Landing.Utils.append;var d=BX.Landing.Utils.slice;var p=BX.Landing.Utils.encodeDataValue;var r=BX.Landing.Utils.remove;var h=BX.Landing.Utils.data;var c=BX.Landing.Utils.bind;var g=BX.Landing.Utils.style;var f=BX.Landing.Utils.clone;var v=BX.Landing.Utils.offsetLeft;var m=BX.Landing.Utils.offsetTop;var B=BX.Landing.Utils.findParent;var C=BX.Landing.Utils.decodeDataValue;var L=BX.Landing.Collection.BaseCollection;function X(t,i,n){t.forEach(function(t){var a=new BX.Landing.UI.Field.Checkbox({id:t.value,items:[{name:t.name,value:t.value,checked:t.selected}],depth:n,compact:true,onChange:i.onCheckboxChange});i.fields.add(a);if(a.layout){u(a.layout,i.getPopup().contentContainer)}if(t.selected){i.addPlaceholder(t)}if(e(t.items)){n+=1;X(t.items,i,n);n-=1}})}BX.Landing.UI.Field.MultiSelect=function(i){BX.Landing.UI.Field.BaseField.apply(this,arguments);t(this.layout,"landing-ui-field-multiselect");this.onChangeHandler=a(i.onChange)?i.onChange:function(){};this.items=e(i.items)?i.items:[];this.value=e(i.value)?i.value:null;this.content=this.value;this.fields=new L;this.button=new BX.Landing.UI.Button.BaseButton("dropdown_button",{text:BX.Landing.Loc.getMessage("LINK_URL_SUGGESTS_SELECT"),className:"landing-ui-button-select-link",onClick:this.onButtonClick.bind(this)});this.grid=s("div",{props:{className:"landing-ui-field-multiselect-grid"},children:[s("div",{props:{className:"landing-ui-field-multiselect-grid-left"},children:[this.input]}),s("div",{props:{className:"landing-ui-field-multiselect-grid-right"},children:[this.button.layout]})]});u(this.grid,this.layout);this.onInputClick=this.onInputClick.bind(this);this.onCheckboxChange=this.onCheckboxChange.bind(this);var n=BX.Landing.PageObject.getRootWindow();c(this.input,"click",this.onInputClick);c(n.document,"click",this.onDocumentClick.bind(this));requestAnimationFrame(function(){X(this.items,this,0);if(e(this.value)){this.value=this.value.map(function(t){return C(t)});this.setValue(this.value,true)}else{this.value=this.getValue();this.content=this.value}}.bind(this))};BX.Landing.UI.Field.MultiSelect.prototype={constructor:BX.Landing.UI.Field.MultiSelect,__proto__:BX.Landing.UI.Field.BaseField.prototype,addPlaceholder:function(t){var i=s("div",{props:{className:"landing-ui-field-multiselect-placeholder"},attrs:{"data-item":p(t),title:o(t.name)},children:[s("span",{props:{className:"landing-ui-field-multiselect-placeholder-text"},html:o(t.name)}),s("span",{props:{className:"landing-ui-field-multiselect-placeholder-remove"},events:{click:this.onPlaceholderRemoveClick.bind(this,t)}})]});u(i,this.input)},onPlaceholderRemoveClick:function(t,i,n){if(i){i.preventDefault();i.stopPropagation()}var e=this.getPlaceholderByItem(t);if(e){r(e);this.adjustPopupPosition();var a=this.fields.get(t.value);if(a){a.layout.querySelector("input").checked=false}}if(!n){this.onValueChangeHandler(this)}},onCheckboxChange:function(t){var i=t.getValue();if(i.length){this.addPlaceholder(t.items[0]);this.adjustPopupPosition()}else{this.onPlaceholderRemoveClick(t.items[0],null,true)}this.onValueChangeHandler(this)},getPlaceholderByItem:function(t){return d(this.input.children).find(function(i){return h(i,"data-item").value===t.value})},getPopup:function(){if(this.popup){return this.popup}this.popup=new BX.Main.Popup({id:this.selector+"_"+l(),bindElement:this.input,autoHide:true,events:{onPopupClose:function(){n(this.input,"landing-ui-active");if(i(this.layout.parentElement.parentElement,"landing-ui-form-style")){void g(this.layout.parentElement.parentElement,{"z-index":null,position:null})}}.bind(this)}});if(this.popup.popupContainer){t(this.popup.popupContainer,"landing-ui-field-multiselect-popup");var e=B(this.input,{className:"landing-ui-panel-content-body-content"},document.body);if(e){u(this.popup.popupContainer,e)}}return this.popup},showPopup:function(){this.getPopup().show();this.adjustPopupPosition();this.setValue(this.getValue(),true)},adjustPopupPosition:function(){if(this.popup){var t=B(this.input,{className:"landing-ui-panel-content-body-content"});var i=m(this.input,t);var n=v(this.input,t);var e=this.input.getBoundingClientRect();var a=2;requestAnimationFrame(function(){this.popup.popupContainer.style.top=i+e.height+a+"px";this.popup.popupContainer.style.left=n+"px";this.popup.popupContainer.style.width=e.width+"px"}.bind(this))}},onInputClick:function(i){if(i){i.stopPropagation()}var e=this.getPopup();if(e.isShown()){n(this.input,"landing-ui-active");return e.close()}t(this.input,"landing-ui-active");return this.showPopup()},onButtonClick:function(t){t.preventDefault();t.stopPropagation();this.onInputClick()},onDocumentClick:function(){this.getPopup().close()},getValue:function(){return d(this.input.children).map(function(t){return h(t,"data-item").value})},isChanged:function(){var t=f(this.content).sort();var i=this.getValue().sort();return JSON.stringify(t)!==JSON.stringify(i)},getItemByValue:function(t,i){var n=null;function e(t,i){return t.forEach(function(t){if(i==t.value){n=t;return}if(t.items){e(t.items,i)}},this)}e(t,i);return n},setValue:function(t,i){if(e(t)){this.input.innerHTML="";t.forEach(function(t){var i=this.getItemByValue(this.items,t);if(i){this.addPlaceholder(i)}},this)}if(!i){this.onValueChangeHandler(this)}}}})();
/* End */
;
; /* Start:"a:4:{s:4:"full";s:62:"/bitrix/js/landing/ui/field/filter_field.min.js?16322955711673";s:6:"source";s:43:"/bitrix/js/landing/ui/field/filter_field.js";s:3:"min";s:0:"";s:3:"map";s:0:"";}"*/
(function(){"use strict";BX.namespace("BX.Landing.UI.Field");var i=BX.Landing.Utils.addClass;var t=BX.Landing.Utils.removeClass;var n=BX.Landing.Utils.isPlainObject;var e=BX.Landing.Utils.append;var a=BX.Landing.Utils.findParent;var s=BX.Landing.Utils.offsetLeft;var l=BX.Landing.Utils.offsetTop;var o=BX.Landing.Utils.rect;var r=BX.Landing.Utils.onCustomEvent;var p=BX.Landing.Utils.bind;BX.Landing.UI.Field.Filter=function(t){BX.Landing.UI.Field.BaseField.apply(this,arguments);i(this.layout,"landing-ui-field-filter");this.input.innerHTML=t.html;requestAnimationFrame(function(){BX.ajax.processScripts(BX.processHTML(t.html).SCRIPT,undefined,function(){this.filter=BX.Main.filterManager.getById(t.filterId);this.value=n(t.value)?t.value:{};e(this.filter.getPopup().popupContainer,a(this.layout,{className:"landing-ui-panel-content-body"}));r(this.filter.getPopup(),"onPopupShow",this.adjustPopupPosition.bind(this));p(a(this.layout,{className:"landing-ui-panel-content-body-content"}),"scroll",this.adjustPopupPosition.bind(this));this.filter.getApi().setFields(this.value);this.filter.getApi().apply()}.bind(this))}.bind(this))};BX.Landing.UI.Field.Filter.prototype={constructor:BX.Landing.UI.Field.Filter,__proto__:BX.Landing.UI.Field.BaseField.prototype,getValue:function(){var i=this.filter.getFilterFieldsValues();if(n(i)){if("FIND"in i){delete i["FIND"]}return i}return{}},adjustPopupPosition:function(){if(this.filter.getPopup()){var i=this.input.getBoundingClientRect();var t=6;requestAnimationFrame(function(){this.filter.getPopup().popupContainer.style.top=i.top+i.height+t+"px";this.filter.getPopup().popupContainer.style.left=i.left+"px"}.bind(this))}}}})();
/* End */
;
; /* Start:"a:4:{s:4:"full";s:60:"/bitrix/js/landing/ui/field/font_field.min.js?16322955723002";s:6:"source";s:41:"/bitrix/js/landing/ui/field/font_field.js";s:3:"min";s:45:"/bitrix/js/landing/ui/field/font_field.min.js";s:3:"map";s:45:"/bitrix/js/landing/ui/field/font_field.map.js";}"*/
(function(){"use strict";BX.namespace("BX.Landing.UI.Field");var e=BX.Landing.Utils.isFunction;var t=BX.Landing.Utils.isPlainObject;var n=BX.Landing.Utils.bind;var i=BX.Landing.Utils.proxy;var a=BX.Landing.Utils.escapeHtml;var s=BX.Landing.Utils.addClass;var l=BX.Landing.Utils.clone;BX.Landing.UI.Field.Font=function(l){BX.Landing.UI.Field.BaseField.apply(this,arguments);s(this.layout,"landing-ui-field-font");this.value=l.value;this.headlessMode=l.headlessMode===true;this.frame=l.frame;this.items=[];if(t(l.items)){var o=Object.keys(this.items);this.items=o.map(function(e){return{name:this.items[e],value:e}},this)}this.onChangeHandler=e(l.onChange)?l.onChange:function(){};this.onValueChangeHandler=e(l.onValueChange)?l.onValueChange:function(){};if(this.value){this.content=a(this.value.family);this.input.innerHTML=this.value.family}else{this.content=a(this.content);this.input.innerHTML=this.content}if(this.frame){var r=this.frame.document.querySelectorAll(this.selector)[0];if(r){var h=BX.style(r,"font-family");if(h){h=h.replace(/['|"]/g,"");this.content=h.split(",")[0];this.input.innerHTML=this.content}}}n(this.input,"click",i(this.onInputClick,this))};function o(e){return"g-font-"+e.toLowerCase().replace(/ /g,"-")}BX.Landing.UI.Field.Font.prototype={constructor:BX.Landing.UI.Field.Font,__proto__:BX.Landing.UI.Field.BaseField.prototype,onInputClick:function(e){e.preventDefault();e.stopPropagation();BX.Landing.UI.Panel.GoogleFonts.getInstance().show().then(function(e){if(!this.response){this.response=l(BX.Landing.UI.Panel.GoogleFonts.getInstance().response);this.response.forEach(function(e){this.items.push({name:e.family,value:o(e.family)})},this)}this.setValue(e)}.bind(this))},setValue:function(e){if(t(e)){var n=o(e.family);var i=e.family.replace(/ /g,"+");var s=BX.Landing.UI.Panel.GoogleFonts.getInstance().client.makeUrl({family:i});s+=":300,400,500,600,700,900";if(this.headlessMode){this.value={family:e.family,public:"https://fonts.google.com/specimen/"+i,uri:s};this.input.innerHTML=a(e.family);this.emit("onChange")}else{var l=BX.Landing.UI.Tool.FontManager.getInstance();l.addFont({className:n,family:e.family,href:s,category:e.category},window);this.input.innerHTML=a(e.family);this.onChangeHandler(n,this.items,this.postfix,this.property);this.onValueChangeHandler(this);l.removeUnusedFonts();var r="";l.getUsedLoadedFonts().forEach(function(e){if(e.element){e.element.setAttribute("rel","stylesheet");e.element.removeAttribute("media");r+="<noscript>"+e.element.outerHTML+"</noscript>\n";e.element.setAttribute("rel","preload");e.element.setAttribute("onload","this.removeAttribute('onload');this.rel='stylesheet'");e.element.setAttribute("as","style");r+=e.element.outerHTML+"\n"}if(e.CSSDeclaration){r+=e.CSSDeclaration.outerHTML}});r=r.replace("async@load","all").replace(/data-loadcss="true"/g,"");BX.Landing.Backend.getInstance().action("Landing::updateHead",{content:r})}}},getValue:function(){return this.value}}})();
/* End */
;
; /* Start:"a:4:{s:4:"full";s:60:"/bitrix/js/landing/ui/field/html_field.min.js?16322955721233";s:6:"source";s:41:"/bitrix/js/landing/ui/field/html_field.js";s:3:"min";s:45:"/bitrix/js/landing/ui/field/html_field.min.js";s:3:"map";s:45:"/bitrix/js/landing/ui/field/html_field.map.js";}"*/
(function(){"use strict";BX.namespace("BX.Landing.UI.Field");var t=BX.Landing.Utils.addClass;var n=BX.Landing.Utils.bind;var i=BX.Landing.Utils.proxy;var e=BX.Landing.Utils.decodeDataValue;BX.Landing.UI.Field.Html=function(s){BX.Landing.UI.Field.BaseField.apply(this,arguments);t(this.layout,"landing-ui-field-html");this.onContentChange=i(this.onContentChange,this);this.onMousewheel=i(this.onMousewheel,this);n(this.input,"input",this.onContentChange);n(this.input,"keydown",this.onContentChange);n(this.input,"mousewheel",this.onMousewheel);this.input.value=e(this.content);setTimeout(function(){this.adjustHeight()}.bind(this),20)};BX.Landing.UI.Field.Html.prototype={constructor:BX.Landing.UI.Field.Html,__proto__:BX.Landing.UI.Field.BaseField.prototype,createInput:function(){return BX.create("textarea",{props:{className:"landing-ui-field-input"},html:this.content})},onMousewheel:function(t){t.stopPropagation()},onPaste:function(){},onContentChange:function(){this.adjustHeight();this.onValueChangeHandler(this)},adjustHeight:function(){this.input.style.height="0px";this.input.style.height=Math.min(this.input.scrollHeight,180)+"px"},getValue:function(){return this.input.value}}})();
/* End */
;
; /* Start:"a:4:{s:4:"full";s:61:"/bitrix/js/landing/ui/field/embed_field.min.js?16322955712482";s:6:"source";s:42:"/bitrix/js/landing/ui/field/embed_field.js";s:3:"min";s:46:"/bitrix/js/landing/ui/field/embed_field.min.js";s:3:"map";s:46:"/bitrix/js/landing/ui/field/embed_field.map.js";}"*/
(function(){"use strict";BX.namespace("BX.Landing.UI.Field");var i=BX.Landing.Utils.bind;var e=BX.Landing.Utils.fireCustomEvent;var t=BX.Landing.Utils.getQueryParams;var n=BX.Landing.Utils.remove;var r=BX.Landing.Utils.create;BX.Landing.UI.Field.Embed=function(e){e.textOnly=true;var t=e.content;e.content=t.source||t.src;e.placeholder=BX.Landing.Loc.getMessage("LANDING_EMBED_FIELD_PLACEHOLDER");e.description="<span class='landing-ui-anchor-preview'>"+BX.Landing.Loc.getMessage("LANDING_EMBED_FIELD_DESCRIPTION")+"</span>";BX.Landing.UI.Field.Text.apply(this,arguments);this.onInputInput=this.onInputInput.bind(this);i(this.input,"input",this.onInputInput);this.hiddenInput=r("input",{props:{type:"hidden",value:t.src||this.input.innerText}});this.error=BX.Landing.UI.Field.BaseField.createDescription(BX.Landing.Loc.getMessage("LANDING_EMBED_ERROR_WRONG_SOURCE_TEXT"));BX.Dom.addClass(this.error,"landing-ui-error");BX.Dom.style(this.description,"margin-bottom","0px");this.adjustForm()};BX.Landing.UI.Field.Embed.prototype={constructor:BX.Landing.UI.Field.Embed,__proto__:BX.Landing.UI.Field.Text.prototype,onInputInput:function(){var i=this.getValue();this.adjustForm(true);this.onInputHandler(i);this.onValueChangeHandler(this);var e=new BX.Event.BaseEvent({data:{value:i},compatData:[i]});this.emit("change",e)},isEmbedUrl:function(i){return BX.Landing.Utils.Matchers.youtube.test(i)||BX.Landing.Utils.Matchers.vimeo.test(i)||BX.Landing.Utils.Matchers.vine.test(i)||BX.Landing.Utils.Matchers.facebookVideos.test(i)},getValue:function(){return{src:this.mediaService?this.mediaService.getEmbedURL():this.input.innerText,preview:this.mediaService?this.mediaService.getEmbedPreview():"",source:this.input.innerText}},adjustForm:function(i){var e=String(this.input.innerText).trim();this.hideError();if(this.isEmbedUrl(e)){var r=new BX.Landing.MediaService.Factory;if(this.mediaService&&this.mediaService.form){n(this.mediaService.form.layout)}this.mediaService=r.create(e,!i?t(this.hiddenInput.value):{});if(this.mediaService){var s=this.mediaService.getSettingsForm();if(s){this.layout.appendChild(s.layout)}}}else{if(this.mediaService){n(this.mediaService.form.layout)}if(BX.Type.isStringFilled(e)){this.showError()}}},showError:function(){BX.Dom.append(this.error,this.layout);BX.Dom.style(this.description,"margin-bottom",null)},hideError:function(){BX.Dom.remove(this.error);BX.Dom.style(this.description,"margin-bottom","0px")}}})();
/* End */
;
; /* Start:"a:4:{s:4:"full";s:60:"/bitrix/js/landing/ui/field/date_field.min.js?16322955711892";s:6:"source";s:41:"/bitrix/js/landing/ui/field/date_field.js";s:3:"min";s:45:"/bitrix/js/landing/ui/field/date_field.min.js";s:3:"map";s:45:"/bitrix/js/landing/ui/field/date_field.map.js";}"*/
(function(){"use strict";BX.namespace("BX.Landing.UI.Field");var t=BX.Landing.Utils.create;var e=BX.Landing.Utils.bind;var i=BX.Landing.Utils.fireCustomEvent;var a="s";var n="ms";BX.Landing.UI.Field.Date=function(i){i.textOnly=true;BX.Landing.UI.Field.BaseField.apply(this,arguments);this.format=i.format===a||i.format===n?i.format:a;this.time=i.time===true;this.hiddenInput=t("input",{props:{type:"hidden"},value:i.content});e(this.input,"click",this.onInputClick.bind(this));this.setValue(this.formatDateToValue(i.content))};BX.Landing.UI.Field.Date.prototype={constructor:BX.Landing.UI.Field.Date,__proto__:BX.Landing.UI.Field.BaseField.prototype,onInputClick:function(){var t={node:this.input,field:this.hiddenInput,bTime:this.time,value:BX.date.format(this.getFormat(),new Date(this.formatDateToValue(this.hiddenInput.value)*1e3)),bHideTime:!this.time,callback_after:function(t){this.setValue(t.getTime()/1e3)}.bind(this)};return BX.calendar(t)},getFormat:function(){return BX.date.convertBitrixFormat(BX.Landing.Loc.getMessage(this.time?"FORMAT_DATETIME":"FORMAT_DATE"))},reset:function(){this.setValue("")},setValue:function(t){if(t){this.input.innerText=BX.date.format(this.getFormat(),new Date(t*1e3));this.hiddenInput.value=this.formatValue(t);this.onValueChangeHandler(this);var e=new BX.Event.BaseEvent({data:{value:this.getValue()},compatData:[this.getValue()]});this.emit("change",e)}},formatValue:function(t){switch(this.format){case a:return t;case n:return t*1e3;default:break}},formatDateToValue:function(t){switch(this.format){case a:return t;case n:return t/1e3;default:break}},getValue:function(){return this.formatValue(this.formatDateToValue(this.hiddenInput.value))},clone:function(t){var e=Object.assign({},t||this.data,{content:(new Date).getTime()});var i=new this.constructor(e);if(this.type){i.type=this.type}return i}}})();
/* End */
;
; /* Start:"a:4:{s:4:"full";s:68:"/bitrix/js/landing/ui/field/block_source_field.min.js?16322955701559";s:6:"source";s:49:"/bitrix/js/landing/ui/field/block_source_field.js";s:3:"min";s:53:"/bitrix/js/landing/ui/field/block_source_field.min.js";s:3:"map";s:53:"/bitrix/js/landing/ui/field/block_source_field.map.js";}"*/
(function(){"use strict";BX.namespace("BX.Landing.UI.Field");BX.Landing.UI.Field.BlockSource=function(e){BX.Landing.UI.Field.BaseField.apply(this,arguments);BX.Landing.Utils.addClass(this.layout,"landing-ui-field-block-source");this.onSourceChangeHandler=e.onSourceChange;this.value=e.value;this.sourceField=this.createLinkField();this.layout.innerHTML="";BX.Landing.Utils.append(this.sourceField.layout,this.layout)};BX.Landing.UI.Field.BlockSource.prototype={constructor:BX.Landing.UI.Field.BlockSource,__proto__:BX.Landing.UI.Field.BaseField.prototype,getSources:function(){return BX.Landing.Main.getInstance().options.sources},createLinkField:function(){return new BX.Landing.UI.Field.LinkURL({selector:"source",title:BX.Landing.Loc.getMessage("LANDING_BLOCK__SOURCE_TITLE"),textOnly:true,disableCustomURL:true,disablePages:true,disallowType:true,allowedTypes:[BX.Landing.UI.Field.LinkURL.TYPE_BLOCK],customPlaceholder:BX.Landing.Loc.getMessage("LANDING_BLOCK__BLOCK_SOURCE_PLACEHOLDER"),options:{siteId:BX.Landing.Main.getInstance().options.site_id,landingId:BX.Landing.Main.getInstance().id,filter:{"=TYPE":BX.Landing.Main.getInstance().options.params.type}},content:this.value,onValueChange:function(e){var n=null;if(BX.type.isPlainObject(e)&&BX.type.isPlainObject(e.source)){n=Object.keys(e.source)[0]}var i=this.getSources().find(function(e){return e.id===n});setTimeout(function(){this.onSourceChangeHandler(i)}.bind(this),0)}.bind(this)})},getValue:function(){return this.sourceField.getValue()}}})();
/* End */
;
; /* Start:"a:4:{s:4:"full";s:69:"/bitrix/js/landing/ui/field/dynamic_image_field.min.js?16322955711947";s:6:"source";s:50:"/bitrix/js/landing/ui/field/dynamic_image_field.js";s:3:"min";s:54:"/bitrix/js/landing/ui/field/dynamic_image_field.min.js";s:3:"map";s:54:"/bitrix/js/landing/ui/field/dynamic_image_field.map.js";}"*/
(function(){"use strict";BX.namespace("BX.Landing.UI.Field");BX.Landing.UI.Field.DynamicImage=function(e){BX.Landing.UI.Field.BaseField.apply(this,arguments);BX.addClass(this.layout,"landing-ui-field-dynamic-image");BX.remove(this.input);this.reference=e.reference;this.linkField=e.linkField;this.dropdownField=new BX.Landing.UI.Field.Dropdown({title:e.title,items:e.dropdownItems,content:BX.type.isPlainObject(e.value)?e.value.id:undefined});this.checkboxField=new BX.Landing.UI.Field.Checkbox({title:BX.Landing.Loc.getMessage("LANDING_BLOCK__DYNAMIC_LINK_ACTION_FIElD_LABEL"),items:[{name:BX.Landing.Loc.getMessage("LANDING_BLOCK__DYNAMIC_IMAGE_MAKE_LINK_TO_DETAIL"),value:true,checked:function(){if(BX.type.isPlainObject(e.value)){return[true,"true"].includes(e.value.link)}return false}()}],multiple:false});BX.remove(this.dropdownField.header);BX.remove(this.checkboxField.header);this.grid=this.createGrid();this.dropdownContainer=this.grid.children[0];this.checkboxContainer=this.grid.children[1];this.layout.appendChild(this.grid);this.dropdownContainer.appendChild(this.dropdownField.layout);if(!e.hideCheckbox){this.checkboxContainer.appendChild(this.checkboxField.layout)}if(BX.type.isPlainObject(e.value)){this.setValue(e.value)}};BX.Landing.UI.Field.DynamicImage.prototype={constructor:BX.Landing.UI.Field.DynamicImage,__proto__:BX.Landing.UI.Field.BaseField.prototype,createGrid:function(){return BX.create({tag:"div",props:{className:"landing-ui-field-dynamic-image-grid"},children:[BX.create({tag:"div",props:{className:"landing-ui-field-dynamic-image-grid-reference"}}),BX.create({tag:"div",props:{className:"landing-ui-field-dynamic-image-grid-link"}})]})},getValue:function(){return{id:this.dropdownField.getValue(),link:this.checkboxField.getValue()}},setValue:function(e){if(BX.type.isPlainObject(e)){this.dropdownField.setValue(e.id);this.checkboxField.setValue(e.link)}}}})();
/* End */
;
; /* Start:"a:4:{s:4:"full";s:71:"/bitrix/js/landing/ui/field/dynamic_dropdown_field.min.js?1632295571430";s:6:"source";s:53:"/bitrix/js/landing/ui/field/dynamic_dropdown_field.js";s:3:"min";s:57:"/bitrix/js/landing/ui/field/dynamic_dropdown_field.min.js";s:3:"map";s:57:"/bitrix/js/landing/ui/field/dynamic_dropdown_field.map.js";}"*/
(function(){"use strict";BX.namespace("BX.Landing.UI.Field");BX.Landing.UI.Field.DynamicDropdown=function(n){BX.Landing.UI.Field.DynamicImage.apply(this,arguments);BX.addClass(this.layout,"landing-ui-field-dynamic-dropdown")};BX.Landing.UI.Field.DynamicDropdown.prototype={constructor:BX.Landing.UI.Field.DynamicDropdown,__proto__:BX.Landing.UI.Field.DynamicImage.prototype}})();
/* End */
;
; /* Start:"a:4:{s:4:"full";s:61:"/bitrix/js/landing/ui/field/pages_field.min.js?16322955721478";s:6:"source";s:42:"/bitrix/js/landing/ui/field/pages_field.js";s:3:"min";s:46:"/bitrix/js/landing/ui/field/pages_field.min.js";s:3:"map";s:46:"/bitrix/js/landing/ui/field/pages_field.map.js";}"*/
(function(){"use strict";BX.namespace("BX.Landing.UI.Field");BX.Landing.UI.Field.Pages=function(e){BX.Landing.UI.Field.BaseField.apply(this,arguments);BX.remove(this.input);this.layout.classList.add("landing-ui-field-pages");this.rangeField=this.createRangeField(Number(e.value));this.gridLeft=this.createGridLeft();this.gridRight=this.createGridRight();this.grid=this.createGrid([this.gridLeft,this.gridRight]);this.layout.appendChild(this.grid);this.gridLeft.appendChild(this.rangeField.layout)};BX.Landing.UI.Field.Pages.prototype={constructor:BX.Landing.UI.Field.Pages,__proto__:BX.Landing.UI.Field.BaseField.prototype,createRangeField:function(e){var i=new BX.Landing.UI.Field.Range({items:Array.from({length:100},function(e,i){return{name:i,value:i}}),content:BX.type.isNumber(e)?e:undefined});BX.remove(i.header);return i},createGridLeft:function(){return BX.create("div",{props:{className:"landing-ui-field-pages-grid-left"}})},createGridRight:function(){return BX.create("div",{props:{className:"landing-ui-field-pages-grid-right"}})},createGrid:function(e){return BX.create("div",{props:{className:"landing-ui-field-pages-grid"},children:e})},createButtonField:function(){return new BX.Landing.UI.Button.BaseButton({text:BX.Landing.Loc.getMessage("LANDING_CARDS__ADD_NEW_PAGE_BUTTON"),className:["landing-ui-button-select-link","landing-ui-field-pages-add-button"]})},getValue:function(){return this.rangeField.getValue()}}})();
/* End */
;
; /* Start:"a:4:{s:4:"full";s:68:"/bitrix/js/landing/ui/field/click_action_field.min.js?16322955702334";s:6:"source";s:49:"/bitrix/js/landing/ui/field/click_action_field.js";s:3:"min";s:53:"/bitrix/js/landing/ui/field/click_action_field.min.js";s:3:"map";s:53:"/bitrix/js/landing/ui/field/click_action_field.map.js";}"*/
(function(){"use strict";BX.namespace("BX.Landing.UI.Field");BX.Landing.UI.Field.ClickAction=function(i){BX.Landing.UI.Field.BaseField.apply(this,arguments);BX.addClass(this.layout,"landing-ui-field-click-action");BX.remove(this.input);this.reference=i.reference;this.linkField=i.linkField;this.textField=new BX.Landing.UI.Field.Text({title:BX.Landing.Loc.getMessage("LANDING_BLOCK__DYNAMIC_LINK_TEXT_FIELD_LABEL"),textOnly:true,content:i.content||""});this.actionField=new BX.Landing.UI.Field.Dropdown({title:BX.Landing.Loc.getMessage("LANDING_BLOCK__DYNAMIC_LINK_ACTION_FIElD_LABEL"),items:this.getActions(),onValueChange:this.onActionChange.bind(this)});this.grid=this.createGrid();this.textContainer=this.grid.children[0];this.actionContainer=this.grid.children[1];this.additionalContainer=this.grid.children[2];this.layout.appendChild(this.grid);this.textContainer.appendChild(this.textField.layout);this.actionContainer.appendChild(this.actionField.layout);if(BX.type.isPlainObject(i.value)){this.setValue(i.value)}this.onActionChange()};BX.Landing.UI.Field.ClickAction.prototype={constructor:BX.Landing.UI.Field.ClickAction,__proto__:BX.Landing.UI.Field.BaseField.prototype,createGrid:function(){return BX.create({tag:"div",props:{className:"landing-ui-field-click-action-grid"},children:[BX.create({tag:"div",props:{className:"landing-ui-field-click-action-grid-text"}}),BX.create({tag:"div",props:{className:"landing-ui-field-click-action-grid-action"}}),BX.create({tag:"div",props:{className:"landing-ui-field-click-action-layout-additional"}})]})},getActions:function(){return this.reference.actions.map(function(i){return{name:i.name,value:i.type}})},onActionChange:function(){var i=this.actionField.getValue();if(i==="link"){this.additionalContainer.appendChild(this.linkField.layout);return}this.additionalContainer.innerHTML=""},getValue:function(){var i=this.linkField.getValue();if(BX.type.isPlainObject(i)){delete i.text}return{id:this.reference.id,text:this.textField.getValue(),action:this.actionField.getValue(),link:i}},setValue:function(i){if(BX.type.isPlainObject(i)){this.textField.setValue(i.text);this.actionField.setValue(i.action);if(i.link){this.linkField.setValue(i.link,true);this.linkField.hrefInput.makeDisplayedHrefValue()}this.onActionChange()}}}})();
/* End */
;
; /* Start:"a:4:{s:4:"full";s:54:"/bitrix/js/landing/ui/style_node.min.js?16322955842990";s:6:"source";s:35:"/bitrix/js/landing/ui/style_node.js";s:3:"min";s:0:"";s:3:"map";s:0:"";}"*/
(function(){"use strict";BX.namespace("BX.Landing.UI");var e=BX.Landing.Utils.isString;BX.Landing.UI.Style=function(e){this.node="node"in e?e.node:null;this.id="id"in e?e.id:null;this.selector="selector"in e?e.selector:null;this.relativeSelector="relativeSelector"?e.relativeSelector:null;this.clickHandler="onClick"in e?e.onClick:function(){};this.iframe="iframe"in e?e.iframe:null;this.affects=new BX.Landing.Collection.BaseCollection;this.onFrameLoad()};BX.Landing.UI.Style.prototype={onFrameLoad:function(){if(!this.node){this.node=this.getNode(true);this.currentTarget=this.node[0]}this.node.forEach(function(e){e.addEventListener("click",this.onClick.bind(this));e.addEventListener("mouseover",this.onMouseEnter.bind(this));e.addEventListener("mouseleave",this.onMouseLeave.bind(this))},this);this.value=this.getValue()},getNode:function(e){var t=[].slice.call(this.iframe.document.querySelectorAll(this.relativeSelector));if(this.isSelectGroup()||e){return t}return this.currentTarget?[t[this.getElementIndex(this.currentTarget)]]:[]},getElementIndex:function(e){return[].indexOf.call(this.getNode(true),e)},onClick:function(e){if(BX.Landing.UI.Panel.StylePanel.getInstance().isShown()){e.preventDefault();e.stopPropagation();this.currentTarget=e.currentTarget;this.clickHandler()}},onMouseEnter:function(e){e.preventDefault();e.stopPropagation();this.highlight(e.currentTarget)},onMouseLeave:function(e){e.preventDefault();e.stopPropagation();this.unHighlight();var t=BX.type.isArray(this.node)&&this.node.length?this.node[0]:this.node;BX.fireEvent(t.parentNode,"mouseenter")},isSelectGroup:function(){return window.localStorage.getItem("selectGroup")==="true"},highlight:function(e){if(BX.Landing.UI.Panel.StylePanel.getInstance().isShown()){if(this.isSelectGroup()){e=this.node}BX.Landing.UI.Highlight.getInstance().show(e)}},unHighlight:function(){BX.Landing.UI.Highlight.getInstance().hide()},isChanged:function(){return JSON.stringify(this.value)!==JSON.stringify(this.getValue())},setValue:function(e,t,i,n,s){this.lastValue=this.lastValue||this.getValue();if(!!e&&BX.type.isArray(t)){n=!!n?n:"";if(typeof e==="object"){if("from"in e&&"to"in e){e.from+="-min";e.to+="-max"}var o=Object.keys(e);e=o.map(function(t){return e[t]})}else{e=[e]}if(n.length){if(n!=="background-image"){this.affects.add(n)}}this.getNode().forEach(function(i){e.forEach(function(s){t.forEach(function(t){if(e.indexOf(t.value)===-1&&e.indexOf(t.value+"-min")===-1&&e.indexOf(t.value+"-max")===-1){i.classList.remove(t.value);i.classList.remove(t.value+"-min");i.classList.remove(t.value+"-max")}});if(n){i.style[n]=null;if(n!=="background-image"){[].slice.call(i.querySelectorAll("*")).forEach(function(e){e.style[n]=null;if(n==="color"){e.removeAttribute("color")}})}}i.classList.add(s)},this);if(s){s.items.forEach(function(e){i.classList.remove(e.value)})}})}},getValue:function(){return{classList:this.getNode().length?this.getNode()[0].className.split(" "):[],affect:this.affects.toArray()}}}})();
/* End */
;
; /* Start:"a:4:{s:4:"full";s:58:"/bitrix/js/landing/events/block_event.min.js?1632295558520";s:6:"source";s:40:"/bitrix/js/landing/events/block_event.js";s:3:"min";s:0:"";s:3:"map";s:0:"";}"*/
(function(){"use strict";BX.namespace("BX.Landing.Event");BX.Landing.Event.Block=function(n){this.block=typeof n.block==="object"?n.block:null;this.card=typeof n.card==="object"?n.card:null;this.node=typeof n.node==="object"?n.node:null;this.data=typeof n.data!=="undefined"?n.data:null;this.forceInitHandler=typeof n.onForceInit==="function"?n.onForceInit:function(){}};BX.Landing.Event.Block.prototype={forceInit:function(){this.forceInitHandler()},makeRelativeSelector:function(n){return"#"+this.block.id+" "+n}}})();
/* End */
;
; /* Start:"a:4:{s:4:"full";s:45:"/bitrix/js/landing/group.min.js?1632295559576";s:6:"source";s:27:"/bitrix/js/landing/group.js";s:3:"min";s:31:"/bitrix/js/landing/group.min.js";s:3:"map";s:31:"/bitrix/js/landing/group.map.js";}"*/
(function(){"use strict";BX.namespace("BX.Landing");BX.Landing.Group=function(n){this.id=n.id;this.name=typeof n.name==="string"?n.name:null;this.nodes=n.nodes;this.callback=typeof n.onClick==="function"?n.onClick:function(){};var i=this.onClick.bind(this);this.nodes.forEach(function(n){n.node.addEventListener("click",i)})};BX.Landing.Group.prototype={onClick:function(n){if(!BX.Landing.UI.Panel.StylePanel.getInstance().isShown()){n.preventDefault();n.stopPropagation();n.stopImmediatePropagation();this.callback(this);return false}}}})();
/* End */
;
; /* Start:"a:4:{s:4:"full";s:47:"/bitrix/js/landing/block.min.js?163229555573638";s:6:"source";s:27:"/bitrix/js/landing/block.js";s:3:"min";s:31:"/bitrix/js/landing/block.min.js";s:3:"map";s:31:"/bitrix/js/landing/block.map.js";}"*/
(function(){"use strict";BX.namespace("BX.Landing");var e=BX.Landing.Utils.deepFreeze;var t=BX.Landing.Utils.style;var n=BX.Landing.Utils.insertAfter;var i=BX.Landing.Utils.insertBefore;var a=BX.Landing.Utils.append;var s=BX.Landing.Utils.isPlainObject;var o=BX.Landing.Utils.isBoolean;var r=BX.Landing.Utils.isNumber;var c=BX.Landing.Utils.isString;var d=BX.Landing.Utils.isArray;var l=BX.Landing.Utils.isEmpty;var h=BX.Landing.Utils.addClass;var u=BX.Landing.Utils.removeClass;var g=BX.Landing.Utils.hasClass;var f=BX.Landing.Utils.toggleClass;var m=BX.Landing.Utils.create;var p=BX.Landing.Utils.debounce;var B=BX.Landing.Utils.throttle;var v=BX.Landing.Utils.fireCustomEvent;var b=BX.Landing.Utils.onCustomEvent;var L=BX.Landing.Utils.bind;var y=BX.Landing.Utils.unbind;var C=BX.Landing.Utils.getClass;var k=BX.Landing.Utils.rect;var I=BX.Landing.Utils.setTextContent;var X=BX.Landing.Utils.translateY;var _=BX.Landing.Utils.nextSibling;var E=BX.Landing.Utils.prevSibling;var A=BX.Landing.Utils.join;var T=BX.Landing.Utils.slice;var N=BX.Landing.Utils.decodeDataValue;var O=BX.Landing.Utils.encodeDataValue;var M=BX.Landing.Utils.data;var S=BX.Landing.Utils.attr;var w=BX.Landing.Utils.removePanels;var P=BX.Landing.Utils.getCSSSelector;var D=BX.Landing.Utils.remove;var F=BX.Landing.Utils.clone;var U=BX.Landing.Utils.trim;var x=BX.Landing.Utils.prepend;var j=BX.Landing.Utils.random;var R=BX.Landing.Utils.htmlToElement;var V=BX.Landing.Utils.proxy;var G=BX.Landing.Utils.escapeText;var K=BX.Landing.Utils.isValidElementId;var H=BX.Landing.Collection.BaseCollection;var q=BX.Landing.Collection.NodeCollection;var W=BX.Landing.UI.Collection.FormCollection;var Y=BX.Landing.Collection.CardCollection;var z=BX.Landing.UI.Collection.PanelCollection;var J=BX.Landing.UI.Panel.BaseButtonPanel;var Q=BX.Landing.UI.Panel.CardAction;var Z=BX.Landing.UI.Panel.ContentEdit;var $=BX.Landing.UI.Button.BaseButton;var ee=BX.Landing.UI.Button.Action;var te=BX.Landing.UI.Button.Plus;var ne=BX.Landing.UI.Button.CardAction;var ie=BX.Landing.UI.Factory.StyleFactory;var ae=BX.Landing.UI.Form.BaseForm;var se=BX.Landing.UI.Form.StyleForm;var oe=BX.Landing.UI.Form.CardForm;var re=BX.Landing.UI.Form.CardsForm;var ce=BX.Landing.Group;var de=BX.Landing.Event.Block;var le=BX.Landing.UI.Card.TabCard;var he=BX.Landing.UI.Card.DynamicFieldsGroup;var ue="D";var ge="V";var fe="W";var me="X";function pe(e){var t=BX.Landing.Main.getInstance();return t.options.style["bitrix"]["style"][e]}function Be(e){var t=BX.Landing.Main.getInstance();return e in t.options.style["bitrix"]["group"]}function ve(e){var t=BX.Landing.Main.getInstance();return t.options.style["bitrix"]["group"][e]}function be(e){if(!!e){if(!e.loader){e.loader=new BX.Loader({target:e.layout,size:16});void t(e.loader.layout.querySelector(".main-ui-loader-svg-circle"),{"stroke-width":"4px"})}e.loader.show();h(e.text,"landing-ui-hide-icon")}}function Le(e){if(!!e){if(e.loader){e.loader.hide();u(e.text,"landing-ui-hide-icon")}}}function ye(e){return!!e&&e.includes("@")}var Ce=BX.debounce(function(){BX.Landing.PageObject.getBlocks().forEach(function(e){e.adjustSortButtonsState()})},400);b("BX.Landing.Block:init",Ce);BX.Landing.Block=function(t,n){this.node=t;this.parent=t.parentElement;this.content=t.firstElementChild;this.siteId=M(t.parentElement,"data-site");this.lid=M(t.parentElement,"data-landing");this.id=r(parseInt(n.id))?parseInt(n.id):0;this.selector=A("#block",r(n.id)?n.id:0," > :first-child");this.active=o(n.active)?n.active:true;this.manifest=s(n.manifest)?n.manifest:{};this.manifest.nodes=s(n.manifest.nodes)?n.manifest.nodes:{};this.manifest.cards=s(n.manifest.cards)?n.manifest.cards:{};this.manifest.attrs=s(n.manifest.attrs)?n.manifest.attrs:{};this.onStyleInputWithDebounce=p(this.onStyleInput,300,this);this.changeTimeout=null;this.php=n.php;this.designed=n.designed;this.access=n.access;this.anchor=n.anchor;this.savedAnchor=n.anchor;this.requiredUserActionOptions=n.requiredUserAction;this.dynamicParams=n.dynamicParams||{};this.nodes=new q;this.cards=new Y;this.panels=new z;this.groups=new H;this.changedNodes=new H;this.styles=new H;this.forms=new W;this.menu=[];if(s(this.requiredUserActionOptions)&&!l(this.requiredUserActionOptions)){this.showRequiredUserAction(this.requiredUserActionOptions);this.requiredUserActionIsShown=true}this.onEditorEnabled=this.onEditorEnabled.bind(this);this.onEditorDisabled=this.onEditorDisabled.bind(this);this.adjustPanelsPosition=this.adjustPanelsPosition.bind(this);this.onMouseMove=this.onMouseMove.bind(this);this.onStorage=this.onStorage.bind(this);this.onBlockRemove=this.onBlockRemove.bind(this);e(this.manifest);this.node.classList[this.active?"remove":"add"]("landing-block-disabled");this.state="ready";this.initPanels();this.initStyles();this.initMenu();this.adjustContextSensitivityStyles();var i=BX.Landing.Env.getInstance().getOptions();var a=i.specialType;if(a==="crm_forms"){var c={formId:i.formEditorData.formOptions.id,formOptions:this.getCrmFormOptions(),block:this,showWithOptions:true};var d=new BX.Uri(window.top.location.toString());if(BX.Text.toBoolean(d.getQueryParam("formCreated"))){c.state="presets"}void BX.Landing.UI.Panel.FormSettingsPanel.getInstance().show(c)}BX.Landing.PageObject.getBlocks().push(this);var h={};if(this.requiredUserActionIsShown){h.requiredUserActionIsShown=true;h.layout=this.node.firstElementChild;h.button=this.node.firstElementChild.querySelector(".ui-btn")}v(window,"BX.Landing.Block:init",[this.createEvent({data:h})]);b("BX.Landing.Editor:enable",this.onEditorEnabled);b("BX.Landing.Editor:disable",this.onEditorDisabled);b("BX.Landing.Block:afterRemove",this.onBlockRemove);L(this.node,"mousemove",this.onMouseMove);L(this.node,"keydown",this.adjustPanelsPosition);L(top,"storage",this.onStorage)};BX.Landing.Block.storage=new BX.Landing.Collection.BlockCollection;BX.Landing.Block.prototype={onMouseMove:function(){if(this.state==="ready"){y(this.node,"mousemove",this.onMouseMove);this.initEntities();this.lazyInitPanels();this.state="complete"}},showRequiredUserAction:function(e){this.node.innerHTML='<div class="landing-block-user-action">'+'<div class="landing-block-user-action-inner">'+(e.header?"<h3>"+'<i class="fa fa-exclamation-triangle g-mr-15"></i>'+e.header+"</h3><hr>":"")+(e.description?"<p>"+e.description+"</p>":"")+((e.href||e.onClick||e.className)&&e.text?"<div>"+'<a href="'+e.href+'" class="ui-btn '+e.className+'" target="'+(e.target?e.target:"")+'">'+e.text+"</a>"+"</div>":"")+"</div>"+"</div>";if(e.onClick){var t=this.node.querySelector(".landing-block-user-action .ui-btn");L(t,"click",function(t){t.preventDefault();try{BX.evalGlobal(e.onClick)}catch(e){console.error(e)}})}},disableLinks:function(){var e="a:not([class*='landing-ui']):not(.landing-trusted-link), .btn:not([class*='landing-ui']):not(.landing-trusted-link), button:not([class*='landing-ui']):not(.landing-trusted-link), input:not([class*='landing-ui'])";var t=T(this.content.querySelectorAll(e));t.forEach(function(e){var t=this.nodes.some(function(t){return t.node.contains(e)});var n=this.menu.some(function(t){return t.root.contains(e)});if(!this.nodes.getByNode(e)&&!t&&!n){e.style.pointerEvents="none"}},this)},adjustContextSensitivityStyles:function(){if(g(this.parent,"landing-sidebar")){if(!g(this.content,"landing-adjusted")){var e=Object.keys(this.manifest.style.nodes);var t=e.filter(function(e){return!!this.manifest.style.nodes[e].type&&this.manifest.style.nodes[e].type.indexOf("columns")!==-1},this);if(l(t)){return}var n=pe("columns");t.forEach(function(e){var t=this.styles.get(e);if(t){t.setValue("col-lg-12",n.items)}},this);var i=this.styles.get(this.selector);if(i){i.setValue("landing-adjusted",["landing-adjusted"])}this.saveStyles()}}},forceInit:function(){this.onMouseMove()},createEvent:function(e){return new de({block:this.node,node:!!e&&!!e.node?e.node:null,card:!!e&&!!e.card?e.card:null,data:!!e&&e.data||{},onForceInit:this.forceInit.bind(this)})},initEntities:function(){this.initCards();this.initNodes();this.initGroups();this.disableLinks()},initMenu:function(){if(BX.type.isPlainObject(this.manifest.menu)){this.menu=Object.entries(this.manifest.menu).map(function(e){var t=e[0];var n=e[1];return new BX.Landing.Menu.Menu({code:t,root:this.node.querySelector(t),manifest:n,block:this.id})},this)}},initCardsLabels:function(){this.cards.forEach(function(e){e.label=this.createCardLabel(e.node,e.manifest)},this)},initGroups:function(){var e=[];var t=s(this.manifest.groups)?this.manifest.groups:{};this.nodes.forEach(function(t){if(c(t.manifest.group)&&!e.includes(t.manifest.group)){e.push(t.manifest.group)}});e.forEach(function(e){var n=this.nodes.filter(function(t){return t.manifest.group===e}).reduce(function(e,t){var n=parseInt(t.selector.split("@")[1]);if(!e[n]){e[n]=new q}e[n].push(t);return e},{});Object.keys(n).forEach(function(i){this.groups.add(new ce({id:e,name:t[e],nodes:n[i],onClick:this.onGroupClick.bind(this)}))},this)},this)},onGroupClick:function(e){if(!BX.Landing.UI.Panel.StylePanel.getInstance().isShown()){this.showContentPanel({name:e.name,nodes:e.nodes,compact:true,nodesOnly:true,showAll:true,hideCheckbox:true})}},initPanels:function(){if(!this.panels.get("create_action")&&!this.isCrmFormPage()){var e=new J("create_action","landing-ui-panel-create-action");e.addButton(new te("insert_after",{text:BX.Landing.Loc.getMessage("ACTION_BUTTON_CREATE"),onClick:B(this.addBlockAfterThis,600,this)}));e.show();this.addPanel(e);e.buttons[0].on("mouseover",this.onCreateButtonMouseover.bind(this));e.buttons[0].on("mouseout",this.onCreateButtonMouseout.bind(this))}},isLastChildInArea:function(){return this.parent.querySelector("[class*='block-wrapper']:last-of-type")===this.node},onCreateButtonMouseover:function(){if(this.isLastChildInArea()||g(this.parent,"landing-header")||g(this.parent,"landing-footer")){var e=BX.Landing.Main.getInstance().getLayoutAreas();if(e.length>1){var t=this.panels.get("create_action");var n=t.buttons.get("insert_after");switch(true){case g(this.parent,"landing-main"):n.setText([BX.Landing.Loc.getMessage("ACTION_BUTTON_CREATE"),BX.Landing.Loc.getMessage("LANDING_ADD_BLOCK_TO_MAIN")].join(" "));break;case g(this.parent,"landing-header"):n.setText([BX.Landing.Loc.getMessage("ACTION_BUTTON_CREATE"),BX.Landing.Loc.getMessage("LANDING_ADD_BLOCK_TO_HEADER")].join(" "));break;case g(this.parent,"landing-sidebar"):n.setText([BX.Landing.Loc.getMessage("ACTION_BUTTON_CREATE"),BX.Landing.Loc.getMessage("LANDING_ADD_BLOCK_TO_SIDEBAR")].join(" "));break;case g(this.parent,"landing-footer"):n.setText([BX.Landing.Loc.getMessage("ACTION_BUTTON_CREATE"),BX.Landing.Loc.getMessage("LANDING_ADD_BLOCK_TO_FOOTER")].join(" "));break}clearTimeout(this.fadeTimeout);this.fadeTimeout=setTimeout(function(){h(this.parent,"landing-area-highlight");e.forEach(function(e){if(e!==this.parent){h(e,"landing-area-fade")}},this)}.bind(this),400)}}},onCreateButtonMouseout:function(){clearTimeout(this.fadeTimeout);if(this.isLastChildInArea()||g(this.parent,"landing-header")||g(this.parent,"landing-footer")){var e=BX.Landing.Main.getInstance().getLayoutAreas();if(e.length>1){var t=this.panels.get("create_action").buttons[0];t.setText(BX.Landing.Loc.getMessage("ACTION_BUTTON_CREATE"));u(this.parent,"landing-area-highlight");e.forEach(function(e){u(e,"landing-area-fade")},this)}}},isInSidebar:function(){return!!this.node.closest(".landing-sidebar")},initSidebarActionPanel:function(){if(this.isInSidebar()&&!this.panels.contains("sidebar_actions")){var e=new J("sidebar_actions","landing-ui-panel-sidebar-actions");e.addButton(new ee("showSidebarActions",{onClick:this.onShowSidebarActionsClick.bind(this)}));this.addPanel(e);e.show()}},onShowSidebarActionsClick:function(e){var t=this.panels.get("sidebar_actions").buttons.get("showSidebarActions");if(!this.sidebarActionsMenu){this.sidebarActionsMenu=BX.Main.MenuManager.create({id:this.id+"_sidebar_actions",bindElement:t.layout,className:"landing-ui-block-actions-popup",angle:{position:"top",offset:95},offsetTop:-6,offsetLeft:-26,events:{onPopupClose:function(){this.panels.get("sidebar_actions").buttons.get("showSidebarActions").deactivate();u(this.node,"landing-ui-hover")}.bind(this)},items:[function(){if(s(this.manifest.nodes)||s(this.manifest.attrs)){return new BX.Main.MenuItem({id:"content",text:BX.Landing.Loc.getMessage("ACTION_BUTTON_CONTENT"),onclick:function(){this.onShowContentPanel();this.sidebarActionsMenu.close()}.bind(this)})}}.bind(this)(),function(){if(s(this.manifest.style)){return new BX.Main.MenuItem({id:"style",text:BX.Landing.Loc.getMessage("ACTION_BUTTON_STYLE"),onclick:function(){this.onStyleShow();this.sidebarActionsMenu.close()}.bind(this),className:this.access<ge?"landing-ui-disabled":""})}}.bind(this)(),function(){if(s(this.manifest.style)){return new BX.Main.MenuItem({id:"designblock",text:BX.Landing.Loc.getMessage("LANDING_BLOCKS_ACTIONS_DESIGN_BLOCK"),className:this.access<fe||this.php||this.isCrmFormPage()?"landing-ui-disabled":"",onclick:function(){this.onDesignerBlockClick();this.sidebarActionsMenu.close()}.bind(this)})}}.bind(this)(),new BX.Main.MenuItem({delimiter:true}),function(){var e=BX.Landing.Main.getInstance().options.placements.blocks;if(s(e)&&(this.manifest.code in e||e["*"])){var t=[];if(this.manifest.code in e){Object.keys(e[this.manifest.code]).forEach(function(n){t.push(e[this.manifest.code][n])},this)}if(e["*"]){Object.keys(e["*"]).forEach(function(n){t.push(e["*"][n])},this)}if(t.length){if(typeof BX.Landing.PageObject.getRootWindow().BX.rest!=="undefined"&&typeof BX.Landing.PageObject.getRootWindow().BX.rest.AppLayout!=="undefined"){var n=["*",this.manifest.code];for(var i=0,a=n.length;i<a;i++){var o=BX.Landing.PageObject.getRootWindow().BX.rest.AppLayout.initializePlacement("LANDING_BLOCK_"+n[i]);if(o){o.prototype.refreshBlock=function(e,t){var n=BX.Landing.PageObject.getBlocks().get(e.id);if(n){n.reload().then(t)}}}}}return new BX.Main.MenuItem({id:"actions",text:BX.Landing.Loc.getMessage("ACTION_BUTTON_CONTENT_MORE"),items:t.map(function(e){return new BX.Main.MenuItem({id:"placement_"+e.id+"_"+j(),text:O(e.title),onclick:this.onPlacementClick.bind(this,e)})},this),className:this.access<ge?"landing-ui-disabled":""})}h(contentPanel.buttons.get("style").layout,"landing-ui-no-rounded")}}.bind(this)(),new BX.Main.MenuItem({id:"down",text:BX.Landing.Loc.getMessage("LANDING_TITLE_OF_BLOCK_ACTION_SORT_DOWN"),onclick:function(){this.moveDown();this.sidebarActionsMenu.close()}.bind(this)}),new BX.Main.MenuItem({id:"up",text:BX.Landing.Loc.getMessage("LANDING_TITLE_OF_BLOCK_ACTION_SORT_UP"),onclick:function(){this.moveUp();this.sidebarActionsMenu.close()}.bind(this)}),new BX.Main.MenuItem({delimiter:true}),new BX.Main.MenuItem({id:"show_hide",text:BX.Landing.Loc.getMessage(this.isEnabled()?"ACTION_BUTTON_HIDE":"ACTION_BUTTON_SHOW"),className:this.access<fe?"landing-ui-disabled":"",onclick:function(){this.onStateChange();this.sidebarActionsMenu.close()}.bind(this)}),new BX.Main.MenuItem({delimiter:true}),new BX.Main.MenuItem({text:BX.Landing.Loc.getMessage("ACTION_BUTTON_ACTIONS_CUT"),className:this.access<me?"landing-ui-disabled":"",onclick:function(){BX.Landing.Main.getInstance().onCutBlock.bind(BX.Landing.Main.getInstance(),this)();this.sidebarActionsMenu.close()}.bind(this)}),new BX.Main.MenuItem({text:BX.Landing.Loc.getMessage("ACTION_BUTTON_ACTIONS_COPY"),onclick:function(){BX.Landing.Main.getInstance().onCopyBlock.bind(BX.Landing.Main.getInstance(),this)();this.sidebarActionsMenu.close()}.bind(this)}),new BX.Main.MenuItem({id:"block_paste",text:BX.Landing.Loc.getMessage("ACTION_BUTTON_ACTIONS_PASTE"),title:window.localStorage.landingBlockName,className:window.localStorage.landingBlockId?"":"landing-ui-disabled",onclick:function(){BX.Landing.Main.getInstance().onPasteBlock.bind(BX.Landing.Main.getInstance(),this)();this.sidebarActionsMenu.close()}.bind(this)}),new BX.Main.MenuItem({delimiter:true}),new BX.Main.MenuItem({text:BX.Landing.Loc.getMessage("LANDING_BLOCKS_ACTIONS_FEEDBACK_BUTTON"),onclick:function(){BX.Landing.Main.getInstance().showSliderFeedbackForm({blockName:this.manifest.block.name,blockCode:this.manifest.code,blockSection:this.manifest.block.section,landingId:BX.Landing.Main.getInstance().id,target:"blockActions"});this.sidebarActionsMenu.close()}.bind(this)}),new BX.Main.MenuItem({delimiter:true}),new BX.Main.MenuItem({id:"remove",text:BX.Landing.Loc.getMessage("LANDING_TITLE_OF_BLOCK_ACTION_REMOVE"),onclick:function(){this.deleteBlock();this.sidebarActionsMenu.close()}.bind(this),className:this.access<me?"landing-ui-disabled":""})]})}this.sidebarActionsMenu.show();h(this.node,"landing-ui-hover")},lazyInitPanels:function(){if(this.isInSidebar()){this.initSidebarActionPanel()}var e=BX.Landing.Main.getInstance().options.placements.blocks;if(!this.panels.contains("content_actions")&&!this.requiredUserActionIsShown&&(s(this.manifest.nodes)&&!l(this.manifest.nodes)||s(this.manifest.style)&&!l(this.manifest.style)||s(e)&&!l(e))){var t=new J("content_actions","landing-ui-panel-content-action");t.addButton(new ee("collapse",{html:"<span class='fa fa-caret-right'></span>",onClick:this.onCollapseActionPanel.bind(this),attrs:{title:BX.Landing.Loc.getMessage("LANDING_TITLE_OF_BLOCK_ACTION_COLLAPSE")}}));if(s(this.manifest.nodes)||s(this.manifest.attrs)){t.addButton(new ee("content",{text:BX.Landing.Loc.getMessage("ACTION_BUTTON_CONTENT"),onClick:this.onShowContentPanel.bind(this),attrs:{title:BX.Landing.Loc.getMessage("LANDING_TITLE_OF_BLOCK_EDIT")}}))}if(s(this.manifest.style)){t.addButton(new ee("style",{text:BX.Landing.Loc.getMessage("ACTION_BUTTON_STYLE"),onClick:this.onStyleShow.bind(this),disabled:this.access<ge||l(this.manifest.style),attrs:{title:BX.Landing.Loc.getMessage("LANDING_TITLE_OF_BLOCK_DESIGN")}}));t.addButton(new ee("designblock",{text:BX.Landing.Loc.getMessage("LANDING_BLOCKS_ACTIONS_DESIGN_BLOCK"),onClick:this.onDesignerBlockClick.bind(this),disabled:this.access<fe||this.php||this.isCrmFormPage(),attrs:{title:BX.Landing.Loc.getMessage("LANDING_BLOCKS_ACTIONS_DESIGN_BLOCK")}}))}if(s(e)&&(this.manifest.code in e||e["*"])){var n=[];if(this.manifest.code in e){Object.keys(e[this.manifest.code]).forEach(function(t){n.push(e[this.manifest.code][t])},this)}if(e["*"]){Object.keys(e["*"]).forEach(function(t){n.push(e["*"][t])},this)}if(n.length){t.addButton(new ee("actions",{html:BX.Landing.Loc.getMessage("ACTION_BUTTON_CONTENT_MORE"),onClick:this.onPlacementButtonClick.bind(this,n)}));if(typeof BX.Landing.PageObject.getRootWindow().BX.rest!=="undefined"&&typeof BX.Landing.PageObject.getRootWindow().BX.rest.AppLayout!=="undefined"){var i=["*",this.manifest.code];for(var a=0,o=i.length;a<o;a++){var r=BX.Landing.PageObject.getRootWindow().BX.rest.AppLayout.initializePlacement("LANDING_BLOCK_"+i[a]);if(r){r.prototype.refreshBlock=function(e,t){var n=BX.Landing.PageObject.getBlocks().get(e.id);if(n){n.reload().then(t)}}}}}}h(t.buttons.get("designblock").layout,"landing-ui-no-rounded")}if(s(this.manifest.style)){var c=new ee("block_display_info",{html:"&nbsp;"});L(c.layout,"mouseenter",this.onBlockDisplayMouseenter.bind(this));L(c.layout,"mouseleave",this.onBlockDisplayMouseleave.bind(this));t.addButton(c)}t.show();this.addPanel(t)}if(!this.panels.get("block_action")){var d=new J("block_action","landing-ui-panel-block-action");var u=this.getBlockFromRepository(this.manifest.code);if(u&&u.restricted){var g=new ee("restricted",{html:"&nbsp;",className:"landing-ui-block-restricted-button",onClick:this.onRestrictedButtonClick.bind(this)});L(g.layout,"mouseenter",this.onRestrictedButtonMouseenter.bind(this));L(g.layout,"mouseleave",this.onRestrictedButtonMouseleave.bind(this));d.addButton(g)}d.addButton(new ee("down",{html:BX.Landing.Loc.getMessage("ACTION_BUTTON_DOWN"),onClick:this.moveDown.bind(this),attrs:{title:BX.Landing.Loc.getMessage("LANDING_TITLE_OF_BLOCK_ACTION_SORT_DOWN")}}));d.addButton(new ee("up",{html:BX.Landing.Loc.getMessage("ACTION_BUTTON_UP"),onClick:this.moveUp.bind(this),attrs:{title:BX.Landing.Loc.getMessage("LANDING_TITLE_OF_BLOCK_ACTION_SORT_UP")}}));d.addButton(new ee("actions",{html:BX.Landing.Loc.getMessage("ACTION_BUTTON_ACTIONS"),onClick:this.showBlockActionsMenu.bind(this),attrs:{title:BX.Landing.Loc.getMessage("LANDING_TITLE_OF_BLOCK_ACTION_ADDITIONAL_ACTIONS")}}));d.addButton(new ee("remove",{html:BX.Landing.Loc.getMessage("ACTION_BUTTON_REMOVE"),disabled:this.access<me||this.isCrmFormPage(),onClick:this.deleteBlock.bind(this),attrs:{title:BX.Landing.Loc.getMessage("LANDING_TITLE_OF_BLOCK_ACTION_REMOVE")}}));d.addButton(new ee("collapse",{html:"<span class='fa fa-caret-right'></span>",onClick:this.onCollapseActionPanel.bind(this),attrs:{title:BX.Landing.Loc.getMessage("LANDING_TITLE_OF_BLOCK_ACTION_COLLAPSE")}}));d.show();this.addPanel(d)}this.adjustPanelsPosition();this.adjustSortButtonsState()},onCollapseActionPanel:function(){f(this.parent,"landing-ui-collapse")},getBlockFromRepository:function(e){var t=BX.Landing.Main.getInstance().options.blocks;var n=Object.keys(t);var i=n.find(function(n){return e in t[n].items});if(i){return t[i].items[e]}},onRestrictedButtonClick:function(e){e.preventDefault()},onPlacementClick:function(e){BX.rest.AppLayout.openApplication(e.app_id,{ID:this.id,CODE:this.manifest.code,LID:BX.Landing.Main.getInstance().id},{PLACEMENT:"LANDING_BLOCK_"+e.placement,PLACEMENT_ID:e.id});if(this.blockPlacementsActionsMenu){this.blockPlacementsActionsMenu.close()}},onPlacementButtonClick:function(e){this.panels.get("content_actions").buttons.get("actions").activate();if(!this.blockPlacementsActionsMenu){var t=this.panels.get("content_actions").buttons.get("actions");var n=A("block_",this.id,"content_placement_actions_",j());var i=e.map(function(e){return new BX.Main.MenuItem({id:"placement_"+(e.id||j())+"_"+j(),text:O(e.title),disabled:e.disabled===true,onclick:typeof e.onClick==="function"?e.onClick:this.onPlacementClick.bind(this,e)})},this);this.blockPlacementsActionsMenu=new BX.PopupMenuWindow({id:n,bindElement:t.layout,items:i,angle:{position:"top",offset:80},offsetTop:-6,events:{onPopupClose:function(){this.panels.get("content_actions").buttons.get("actions").deactivate();u(this.node,"landing-ui-hover")}.bind(this)}})}h(this.node,"landing-ui-hover");this.blockPlacementsActionsMenu.show()},onDesignerBlockClick:function(){var e=null;BX.Landing.Backend.getInstance().action("Block::getContent",{block:this.id,lid:this.lid,siteId:this.siteId,editMode:1}).then(function(t){e=t.content});var t=BX.Landing.Env.getInstance().getOptions();var n=t.params.sef_url["design_block"].replace("__block_id__",this.id).replace("__site_show__",this.siteId).replace("__landing_edit__",this.lid)+"&code="+this.manifest.code+"&designed="+(this.designed?"Y":"N");BX.SidePanel.Instance.open(n,{cacheable:false,allowChangeHistory:false,requestMethod:"post",customLeftBoundary:40,events:{onClose:function(t){BX.Landing.Backend.getInstance().action("Block::getContent",{block:this.id,lid:this.lid,siteId:this.siteId,editMode:1}).then(function(t){var n=t.content;if(e!==n){BX.Landing.History.getInstance().push(new BX.Landing.History.Entry({block:this.id,selector:"#block"+this.id,command:"updateContent",undo:e,redo:n}));void this.reload();var i=new BX.Landing.Metrika(true);i.sendLabel(null,"designerBlock","close"+"&designed="+(this.designed?"Y":"N")+"&code="+this.manifest.code)}}.bind(this))}.bind(this)}});if(this.blockPlacementsActionsMenu){this.blockPlacementsActionsMenu.close()}},onRestrictedButtonMouseenter:function(e){clearTimeout(this.displayBlockTimer);this.displayBlockTimer=setTimeout(function(e){BX.Landing.UI.Tool.Suggest.getInstance().show(e,{description:BX.Landing.Loc.getMessage("LANDING_BLOCK_RESTRICTED_TEXT")})}.bind(this),200,e.currentTarget)},onRestrictedButtonMouseleave:function(){clearTimeout(this.displayBlockTimer);BX.Landing.UI.Tool.Suggest.getInstance().hide()},onBlockDisplayMouseenter:function(e){clearTimeout(this.displayBlockTimer);this.displayBlockTimer=setTimeout(function(e){BX.Landing.UI.Tool.Suggest.getInstance().show(e,{name:m("div",{props:{className:"landing-ui-block-display-message-header"},html:BX.Landing.Loc.getMessage("LANDING_BLOCK_DISABLED_ON_DESKTOP_NAME")}).outerHTML,description:this.getBlockDisplayItems()})}.bind(this),300,e.currentTarget)},onBlockDisplayMouseleave:function(){clearTimeout(this.displayBlockTimer);BX.Landing.UI.Tool.Suggest.getInstance().hide()},getBlockDisplayItems:function(){function e(e){return m("div",{props:{className:"landing-ui-block-display-message"},attrs:{"data-mod":e},children:[m("div",{props:{className:"landing-ui-block-display-message-left"},html:"&nbsp;"}),m("div",{props:{className:"landing-ui-block-display-message-right"},children:[m("p",{html:BX.Landing.Loc.getMessage("LANDING_BLOCK_HIDDEN_ON_"+(e?e.toUpperCase():""))})]})]})}var t=m("div");if(g(this.content,"l-d-lg-none")){t.appendChild(e("desktop"))}if(g(this.content,"l-d-md-none")){t.appendChild(e("tablet"))}if(g(this.content,"l-d-xs-none")){t.appendChild(e("mobile"))}return t.outerHTML},adjustPanelsPosition:function(){var e=k(this.node);var t=this.panels.get("content_actions");var n=this.panels.get("block_action");var i=e.height<80?h:u;if(t){i(t.layout,"landing-ui-panel-actions-compact")}if(n){i(n.layout,"landing-ui-panel-actions-compact")}},onEditorEnabled:function(e){if(this.node.contains(e)){h(this.node,"landing-ui-hover")}},onEditorDisabled:function(){u(this.node,"landing-ui-hover")},onStorage:function(){var e=this.blockActionsMenu||this.sidebarActionsMenu;if(e){var t=e.getMenuItem("block_paste");if(t){if(window.localStorage.landingBlockId){t.layout.item.setAttribute("title",window.localStorage.landingBlockName);u(t.layout.item,"landing-ui-disabled");h(t.layout.item,"menu-popup-no-icon")}else{t.layout.item.setAttribute("title","");h(t.layout.item,"landing-ui-disabled")}}}},showBlockActionsMenu:function(){this.panels.get("block_action").buttons.get("actions").activate();if(!this.blockActionsMenu){var e=g(this.node.parentElement,"landing-sidebar");var t=this.panels.get("block_action").buttons.get("actions");var n=A("block_",this.id,"_actions_",j());var i=BX.Landing.Main.getInstance();this.blockActionsMenu=new BX.PopupMenuWindow({id:n,bindElement:t.layout,className:"landing-ui-block-actions-popup",angle:{position:"top",offset:e?70:146},offsetTop:-6,offsetLeft:-26,events:{onPopupClose:function(){this.panels.get("block_action").buttons.get("actions").deactivate();u(this.node,"landing-ui-hover")}.bind(this)},items:[new BX.Main.MenuItem({id:"show_hide",text:BX.Landing.Loc.getMessage(this.isEnabled()?"ACTION_BUTTON_HIDE":"ACTION_BUTTON_SHOW"),className:this.access<fe||this.isCrmFormPage()?"landing-ui-disabled":"",onclick:function(){this.onStateChange();this.blockActionsMenu.close()}.bind(this)}),new BX.Main.MenuItem({text:BX.Landing.Loc.getMessage("ACTION_BUTTON_ACTIONS_CUT"),className:this.access<me||this.isCrmFormPage()?"landing-ui-disabled":"",onclick:function(){i.onCutBlock.bind(i,this)();this.blockActionsMenu.close()}.bind(this)}),new BX.Main.MenuItem({text:BX.Landing.Loc.getMessage("ACTION_BUTTON_ACTIONS_COPY"),className:this.isCrmFormPage()?"landing-ui-disabled":"",onclick:function(){i.onCopyBlock.bind(i,this)();this.blockActionsMenu.close()}.bind(this)}),new BX.Main.MenuItem({id:"block_paste",text:BX.Landing.Loc.getMessage("ACTION_BUTTON_ACTIONS_PASTE"),title:window.localStorage.landingBlockName,className:window.localStorage.landingBlockId&&!this.isCrmFormPage()?"":"landing-ui-disabled",onclick:function(){i.onPasteBlock.bind(i,this)();this.blockActionsMenu.close()}.bind(this)}),new BX.Main.MenuItem({text:BX.Landing.Loc.getMessage("LANDING_BLOCKS_ACTIONS_FEEDBACK_BUTTON"),onclick:function(){BX.Landing.Main.getInstance().showSliderFeedbackForm({blockName:this.manifest.block.name,blockCode:this.manifest.code,blockSection:this.manifest.block.section,landingId:BX.Landing.Main.getInstance().id,target:"blockActions"});this.blockActionsMenu.close()}.bind(this)})]})}h(this.node,"landing-ui-hover");this.blockActionsMenu.show()},moveUp:function(e){var n=E(this.node,"block-wrapper");var a=this.node;if(n){var s=Promise.all([X(a,-k(n).height),X(n,k(a).height)]);s.then(function(){void t(a,{transform:null,transition:null});void t(n,{transform:null,transition:null});i(a,n);if(!e||typeof e==="object"){BX.Landing.History.getInstance().push(new BX.Landing.History.Entry({block:this.id,selector:"#block"+this.id,command:"sortBlock",undo:"moveDown",redo:"moveUp"}))}}.bind(this));BX.Landing.Backend.getInstance().action("Landing::upBlock",{block:this.id,lid:this.lid,siteId:this.siteId},{code:this.manifest.code})}},moveDown:function(e){var i=_(this.node,"block-wrapper");var a=this.node;if(!!i){var s=Promise.all([X(a,k(i).height),X(i,-k(a).height)]);s.then(function(){void t(a,{transform:null,transition:null});void t(i,{transform:null,transition:null});n(a,i);if(!e||typeof e==="object"){BX.Landing.History.getInstance().push(new BX.Landing.History.Entry({block:this.id,selector:"#block"+this.id,command:"sortBlock",undo:"moveUp",redo:"moveDown"}))}}.bind(this));BX.Landing.Backend.getInstance().action("Landing::downBlock",{block:this.id,lid:this.lid,siteId:this.siteId},{code:this.manifest.code})}},addPanel:function(e,t){if(!this.panels.contains(e)){this.panels.add(e);if(!t){a(e.layout,this.node)}else{i(e.layout,t)}}},getBlockFormId:function(){var e=this.node.querySelector("script[data-b24-form]");if(BX.Type.isDomNode(e)){var t=BX.Dom.attr(e,"data-b24-form");if(BX.Type.isStringFilled(t)){var n=t.split("/");if(BX.Type.isArray(n)&&n.length===3){var i="";var a=BX.Dom.attr(e.previousSibling.firstChild,"id");if(a){i=a.replace("b24-","")}return{id:n[1],type:n[0],code:n[2],instanceId:i}}}}e=this.node.querySelector("[data-b24form]");if(BX.Type.isDomNode(e)){t=BX.Dom.attr(e,"data-b24form");if(BX.Type.isStringFilled(t)){n=t.split("|");if(BX.Type.isArray(n)&&n.length===3){i="";a=BX.Dom.attr(e.querySelector(".b24-form > div[id]"),"id");if(a){i=a.replace("b24-","")}return{id:n[0],type:n[2]||"inline",code:n[1],instanceId:i}}}}return null},getCrmFormOptions:function(){var e=this.node.querySelector("[data-b24form-use-style]");var t=BX.Dom.attr(e,"data-b24form-use-style");var n=/--primary([\da-fA-F]{2})/;if(BX.Type.isDomNode(e)&&BX.Text.toBoolean(t)){var i=BX.Dom.attr(e,"data-b24form-design");if(BX.Type.isPlainObject(i)){var a=BX.Dom.style(document.documentElement,"--primary").trim();Object.entries(i.color).forEach(function(e){if(e[1]==="--primary"||e[1].match(n)!==null){i.color[e[0]]=e[1].replace("--primary",a)}});return{data:{design:i}}}}return{}},isCrmFormPage:function(){return BX.Landing.Env.getInstance().getOptions().specialType==="crm_forms"},onShowContentPanel:function(){var e=this.getBlockFormId();var t=BX.Text.capitalize(BX.Landing.Env.getInstance().getOptions().params.type);if(BX.Type.isPlainObject(e)&&t!=="SMN"){var n=BX.Landing.PageObject.getRootWindow();void function(){if(BX.Landing.UI.Panel.FormSettingsPanel){return Promise.resolve([n.BX.Landing.UI.Panel,BX.Landing.UI.Panel])}return Promise.all([n.BX.Runtime.loadExtension("landing.ui.panel.formsettingspanel"),BX.Runtime.loadExtension("landing.ui.panel.formsettingspanel")])}().then(function(t){var n=t[1].FormSettingsPanel;if(n){return n.getInstance().show({formId:e.id,instanceId:e.instanceId,formOptions:this.getCrmFormOptions(),block:this})}}.bind(this))}else{this.showContentPanel()}BX.Landing.UI.Panel.EditorPanel.getInstance().hide()},onStateChange:function(){if(this.isEnabled()){this.disable()}else{this.enable()}},isEnabled:function(){return this.active},enable:function(){this.active=true;u(this.node,"landing-block-disabled");var e=this.blockActionsMenu||this.sidebarActionsMenu;I(e.getMenuItem("show_hide").getLayout().text,BX.Landing.Loc.getMessage("ACTION_BUTTON_HIDE"));BX.Landing.Backend.getInstance().action("Landing::showBlock",{block:this.id,lid:this.lid,siteId:this.siteId},{code:this.manifest.code})},disable:function(){this.active=false;h(this.node,"landing-block-disabled");var e=this.blockActionsMenu||this.sidebarActionsMenu;I(e.getMenuItem("show_hide").getLayout().text,BX.Landing.Loc.getMessage("ACTION_BUTTON_SHOW"));BX.Landing.Backend.getInstance().action("Landing::hideBlock",{block:this.id,lid:this.lid,siteId:this.siteId},{code:this.manifest.code})},createCardLabel:function(e,t){var n=[];if(c(t.label)){n.push(t.label)}else if(d(t.label)){n=n.concat(t.label)}var i=this.nodes.filter(function(t){return e.contains(t.node)});var a=[];n.forEach(function(e){var t=i.find(function(t){return t.manifest.code===e});if(t){var n;if(t instanceof BX.Landing.Block.Node.Text){n=m("span",{props:{className:"landing-card-title-text"},html:G(m("div",{html:t.getValue()}).innerText)});a.push(n);b(t.getField(),"change",function(e){n.innerHTML=G(m("div",{html:e}).innerText)});return}if(t instanceof BX.Landing.Block.Node.Link){n=m("span",{props:{className:"landing-card-title-link"},html:G(t.getValue().text)});a.push(n);b(t.getField(),"change",function(e){n.innerHTML=G(e.text)});return}if(t instanceof BX.Landing.Block.Node.Icon){n=m("span",{props:{className:"landing-card-title-icon"},children:[m("span",{props:{className:t.getValue().classList.join(" ")}})]});a.push(n);b(t.getField(),"change",function(e){n.firstChild.className="landing-card-title-icon "+e.classList.join(" ")});return}if(t instanceof BX.Landing.Block.Node.Img){n=m("span",{props:{className:"landing-card-title-img"},attrs:{style:"background-color: #fafafa"},children:[m("img",{props:{src:t.getValue().src}})]});a.push(n);b(t.getField(),"change",function(e){n.innerHTML="";n.appendChild(m("img",{props:{src:e.src}}))})}}},this);return m("div",{props:{className:"landing-card-title"},children:!l(a)?a:t.name})},initCards:function(){if(this.access<fe){return}this.cards.clear();this.forEachCard(function(e,t,n){var i=BX.clone(this.manifest.cards[t]);var a=A(t,"@",n);if(this.isDynamicCards(t)){i.allowInlineEdit=false}w(e);var s=new BX.Landing.Block.Card(e,i,a);this.cards.add(s);if(i.allowInlineEdit!==false){var o=new Q("cardAction","landing-ui-panel-block-card-action");o.show();s.addPanel(o);o.addButton(new ne("clone",{html:"&nbsp;",onClick:function(e){e.stopPropagation();if(s.manifest.sync){var t=s.manifest.sync;if(c(s.manifest.sync)){t=[s.manifest.sync]}if(d(t)){t.forEach(function(e){this.cloneCard(A(e,"@",n))},this)}}this.cloneCard(a)}.bind(this),attrs:{title:BX.Landing.Loc.getMessage("LANDING_TITLE_OF_CARD_ACTION_CLONE")}}));o.addButton(new ne("remove",{html:"&nbsp;",onClick:function(e){e.stopPropagation();if(s.manifest.sync){var t=s.manifest.sync;if(c(s.manifest.sync)){t=[s.manifest.sync]}if(d(t)){t.forEach(function(e){this.removeCard(A(e,"@",n))},this)}}this.removeCard(a)}.bind(this),attrs:{title:BX.Landing.Loc.getMessage("LANDING_TITLE_OF_CARD_ACTION_REMOVE")}}))}s.selector=a;s.sortIndex=n;this.adjustCardRemoveButton(a)});this.cards.sort(function(e,t){return e.getIndex()>t.getIndex()})},cloneCard:function(e,t){var i=this.cards.getBySelector(e);var a=i.panels.get("cardAction").buttons.get("clone");var s={block:this.id,selector:e,lid:this.lid,siteId:this.siteId};var o={code:this.manifest.code};var r=this;be(a);return BX.Landing.Backend.getInstance().action("Landing\\Block::cloneCard",s,o).then(function(){v("BX.Landing.Block:Card:beforeAdd",[r.createEvent({card:i.node})])}).then(function(){var e=BX.clone(i.node);w(e);n(e,i.node);return e}).then(function(e){Le(a);v("BX.Landing.Block:Card:add",[r.createEvent({card:e})]);r.initEntities();r.initStyles();if(!t){var n=P(e.parentNode);var s=r.cards.getByNode(e);BX.Landing.History.getInstance().push(new BX.Landing.History.Entry({block:r.id,selector:s.selector,command:"addCard",undo:{container:n,selector:s.selector},redo:{container:n,index:i.getIndex(),html:e.outerHTML}}))}}).catch(function(){Le(a);return Promise.reject()})},removeCard:function(e,t){var n=this.cards.getBySelector(e);var i=n.panels.get("cardAction").buttons.get("remove");var a={block:this.id,selector:e,lid:this.lid,siteId:this.siteId};var s={code:this.manifest.code};var o=this;be(i);return BX.Landing.Backend.getInstance().action("Landing\\Block::removeCard",a,s).then(function(){v("BX.Landing.Block:Card:beforeRemove",[o.createEvent({card:n.node})]);if(!t){var e=P(n.node.parentElement);w(n.node);BX.Landing.History.getInstance().push(new BX.Landing.History.Entry({block:o.id,selector:n.selector,command:"removeCard",undo:{container:e,index:n.getIndex(),html:n.node.outerHTML},redo:{container:e,selector:n.selector}}))}}).then(function(){o.cards.remove(n);n.node.remove();o.initEntities();o.adjustCardRemoveButton(e)}).then(function(){var t=o.createEvent({data:{selector:e}});v("BX.Landing.Block:Card:remove",[t]);Le(i)}).catch(function(){Le(i);return Promise.reject()})},adjustCardRemoveButton:function(e){var t=this.cards.getBySelector(e);if(t){var n=t.node.parentElement.children.length===1;var i=t.panels.get("cardAction");if(n){if(i){i.buttons.get("remove").disable()}}else{if(i){i.buttons.get("remove").enable()}}}},addCard:function(e){var t=e.selector.split("@")[0]+(e.index>0?"@"+(e.index-1):"");var i={block:this.id,content:e.content,selector:t,lid:this.lid,siteId:this.siteId};var a={code:this.manifest.code};var s=e.container;var o=m("div",{html:e.content}).firstElementChild;var r=this;return BX.Landing.Backend.getInstance().action("Landing\\Block::addCard",i,a).then(function(){v("BX.Landing.Block:Card:beforeAdd",[r.createEvent({card:o})])}).then(function(){var i;if(e.index<=0){i=r.cards.find(function(e){return e.selector.includes(t.split("@")[0])});if(i){x(o,i.node.parentNode)}}else{i=r.cards.getBySelector(t.split("@")[0]+"@"+(e.index-1));if(i){n(o,i.node)}}w(s);r.initEntities();v("BX.Landing.Block:Card:add",[r.createEvent({card:o})])})},forEachCard:function(e){var t=Object.keys(this.manifest.cards);t.map(function(t){var n=T(this.node.querySelectorAll(t));n.forEach(function(n,i){e.apply(this,[n,t,i])},this)},this)},initNodes:function(){if(this.access<fe){return}var e=[];this.forEachNodeElements(function(t,n,i){var a=this.nodes.getByNode(t);var o=A(n,"@",i);if(!a){var r=C(this.manifest.nodes[n].handler);var c=t.closest("[data-card-preset]");var l=F(this.manifest.nodes[n]);var h=false;if(c){var u=c.dataset.cardPreset;Object.keys(this.manifest.cards).forEach(function(e){if(c.matches(e)){if(s(this.manifest.cards[e].presets)&&s(this.manifest.cards[e].presets[u])&&d(this.manifest.cards[e].presets[u].disallow)){var t=this.manifest.cards[e].presets[u].disallow.find(function(e){return n===e});if(t){l.allowInlineEdit=false;h=true}}}},this)}var g=this.cards.some(function(e){var n=e.selector.split("@")[0];return this.isDynamicCards(n)&&e.node.contains(t)},this);if(g){l.allowInlineEdit=false}else{var f=this.cards.some(function(e){return e.node.contains(t)});if(!f){if(this.isDynamic()){l.allowInlineEdit=false}}}a=new r({node:t,manifest:l,selector:o,onChange:this.onNodeChange.bind(this),onChangeOptions:this.onNodeOptionsChange.bind(this),onAttributeChange:this.onAttributeChange.bind(this),onDesignShow:this.showStylePanel.bind(this),uploadParams:{action:"Block::uploadFile",block:this.id}});if(h){a.getField().layout.hidden=true}this.nodes.add(a)}a.selector=o;e.push(a)});this.nodes.clear();e.forEach(function(e){this.nodes.add(e)},this);this.nodes.sort(function(e,t){return e.getIndex()>t.getIndex()})},onNodeOptionsChange:function(e){if(!l(e)){this.initStyles();var t={code:this.manifest.code};var n={};n.data=e;n.block=this.id;n.siteId=this.siteId;return BX.Landing.Backend.getInstance().action("Block::changeNodeName",n,t)}},forEachNodeElements:function(e){Object.keys(this.manifest.nodes).forEach(function(t){try{T(this.node.querySelectorAll(t)).forEach(function(n,i){if(!n.matches('[data-id="content_edit"] *')){e.apply(this,[n,t,i])}},this)}catch(e){}},this)},showContentPanel:function(e){var t=!!e&&e.nodes?e.nodes:null;var n=!!e&&e.name?e.name:null;var i=!!e&&e.nodesOnly?e.nodesOnly:false;var o=!!e&&e.showAll?e.showAll:false;var r=!!e&&e.compact;var c=!!e&&e.hideCheckbox;var d=this.panels.get("content_edit");if(!d){d=new Z("content_edit",{title:BX.Landing.Loc.getMessage("LANDING_CONTENT_PANEL_TITLE"),subTitle:this.manifest.block.name,footer:[new $("save_block_content",{text:BX.Landing.Loc.getMessage("BLOCK_SAVE"),onClick:this.onContentSave.bind(this),className:"landing-ui-button-content-save",attrs:{title:BX.Landing.Loc.getMessage("LANDING_TITLE_OF_SLIDER_SAVE")}}),new $("cancel_block_content",{text:BX.Landing.Loc.getMessage("BLOCK_CANCEL"),onClick:this.onContentCancel.bind(this),className:"landing-ui-button-content-cancel",attrs:{title:BX.Landing.Loc.getMessage("LANDING_TITLE_OF_SLIDER_CANCEL")}})]});var l=this.getBlockFormId();var h=BX.Text.capitalize(BX.Landing.Env.getInstance().getOptions().params.type);if(BX.Type.isPlainObject(l)&&h!=="SMN"){var u=new BX.UI.Button({text:BX.Landing.Loc.getMessage("LANDING_SHOW_FORM_EDITOR"),color:BX.UI.Button.Color.LIGHT_BORDER,size:BX.UI.Button.Size.SMALL,onclick:function(){d.hide().then(function(){this.onShowContentPanel()}.bind(this))}.bind(this)});BX.Dom.style(u.render(),{position:"absolute",right:"50px"});BX.Dom.append(u.render(),d.header)}this.addPanel(d)}d.compact(r);d.clear();var g=this.getBlockFromRepository(this.manifest.code);if(g&&g.restricted){a(this.getRestrictedMessage(),d.content)}this.tmpContent=m("div",{props:{hidden:true}});this.content.appendChild(this.tmpContent);var f="";Object.keys(this.manifest.cards).forEach(function(e){var t=this.manifest.cards[e];if(s(t.presets)){Object.keys(t.presets).forEach(function(e){var n=t.presets[e];f+=n.html},this)}},this);this.tmpContent.innerHTML=f;this.initEntities();this.initCardsLabels();var p=this.getEditForms({nodes:t,formName:n,nodesOnly:i,showAll:o,hideCheckbox:c});p.forEach(function(e){d.appendForm(e)});this.tmpContent.innerHTML="";d.show();setTimeout(function(){this.lastBlockState=this.fetchRequestData(d,true)}.bind(this),300)},createHistoryEntry:function(e){Promise.all([this.lastBlockState,e]).then(function(e){var t=e[0];var n=e[1];BX.Landing.History.getInstance().push(new BX.Landing.History.Entry({block:this.id,selector:"#block"+this.id,command:"updateBlockState",undo:t,redo:n}))}.bind(this));return Promise.resolve(F(e))},updateContent:function(e){var t=BX.Landing.Backend.getInstance().action("Block::updateContent",{lid:this.lid,block:this.id,content:e.replaceAll(' style="',' bxstyle="')},{code:this.manifest.code});var n=this.reload();return Promise.all([t,n])},updateBlockState:function(e,t){if(BX.type.isPlainObject(e)&&BX.type.isPlainObject(e.dynamicParams)){this.dynamicParams=F(e.dynamicParams)}else{this.dynamicParams={}}Promise.resolve(e).then(function(e){return t?e:this.createHistoryEntry(e)}.bind(this)).then(this.applyMenuChanges.bind(this)).then(this.applyContentChanges.bind(this)).then(this.applyCardsChanges.bind(this)).then(this.applyAttributeChanges.bind(this)).then(this.applySettingsChanges.bind(this)).then(this.saveChanges.bind(this)).then(this.reload.bind(this)).catch(console.warn);var n=this.panels.get("content_edit");if(n){var i=new W;n.forms.forEach(function(e){if(e.type!=="attrs"){i.add(e)}});i.fetchFields().forEach(function(e){if(e.tag){var t=this.nodes.getBySelector(e.selector);if(t){t.onChangeTag(e.tag)}}},this)}},getRestrictedMessage:function(){return m("div",{props:{className:"ui-alert ui-alert-warning"},html:BX.Landing.Loc.getMessage("LANDING_BLOCK_RESTRICTED_TEXT"),attrs:{style:"margin-bottom: 20px"}})},onStyleShow:function(){this.showStylePanel(this.selector);BX.Landing.UI.Panel.EditorPanel.getInstance().hide()},getPostfix:function(){return""},expandTypeGroups:function(e){var t=[];if(!BX.type.isArray(e)){e=[e]}e.forEach(function(e){if(Be(e)){ve(e).forEach(function(e){t.push(e)})}else{t.push(e)}});return t},createStyleForm:function(e,t,n){var i=this.forms.get(e);if(i){this.forms.remove(i)}var a=!!t.props?t.props:!!t.type?t.type:null;var s=!!t.title?t.title:!!t.name?t.name:"";if(!!a&&!!s){var o=new ie({frame:window,postfix:this.getPostfix()});i=new se({id:e,title:s,selector:e,iframe:window});a=this.expandTypeGroups(a).reduce(function(e,t){if(!e.includes(t)){e.push(t)}return e},[]);a.forEach(function(t){var a=pe(t);var s=this.styles.get(e);var r=o.createField({selector:!n?this.makeRelativeSelector(e):e,property:a.property,multiple:a.multiple===true,style:t,pseudoElement:a["pseudo-element"],pseudoClass:a["pseudo-class"],type:a.type,title:a.name,items:a.items,onChange:function(t,o,r,c){var d=!!a.exclude?pe(a.exclude):null;if(d){i.fields.forEach(function(e){if(e.style===a.exclude){e.reset()}})}var l={className:"",style:""};if(s.node[0]){l.className=s.node[0].className;l.style=s.node[0].style.cssText}var h=this.createEvent({data:{selector:e,value:t,items:o,postfix:r,affect:c,exclude:d}});v(window,"BX.Landing.Block:beforeApplyStyleChanges",[h]);s.setValue(t,o,r,c,d);var u={className:"",style:""};if(s.node[0]){u.className=s.node[0].className;u.style=s.node[0].style.cssText}try{if(JSON.stringify(l)!==JSON.stringify(u)){BX.Landing.History.getInstance().push(new BX.Landing.History.Entry({block:this.id,command:"updateStyle",selector:!n?this.makeRelativeSelector(e):e,undo:l,redo:u}))}}catch(e){}v("BX.Landing.Block:updateStyleWithoutDebounce",[this.createEvent({node:s.getNode(),data:s.getValue()})]);this.onStyleInputWithDebounce({node:s.getNode(),data:s.getValue()})}.bind(this)});var c=true;s.getValue().classList.forEach(function(e){if(a.items.some(function(t){return t.value===e})){if(r.property!=="display"){r.setValue(e,c)}}});i.addField(r)},this);this.forms.add(i)}i.fields.forEach(function(e){if(e.popup){e.popup.close()}});return i},initStyles:function(){if(this.access<ge){return}this.styles.clear();var e=new BX.Landing.UI.Style({id:this.selector,iframe:window,selector:this.selector,relativeSelector:this.selector,onClick:this.onStyleClick.bind(this,this.selector)});this.styles.add(e);if(s(this.manifest.style)&&s(this.manifest.style.nodes)){Object.keys(this.manifest.style.nodes).forEach(function(e){var t=new BX.Landing.UI.Style({id:e,iframe:window,selector:e,relativeSelector:this.makeRelativeSelector(e),onClick:this.onStyleClick.bind(this,e)});this.styles.add(t)},this)}},onStyleClick:function(e){this.showStylePanel(e);var t=this.forms.get(e);if(t){BX.Landing.PageObject.getInstance().design().then(function(e){BX.Landing.UI.Panel.Content.scrollTo(e.content,null)})}},makeRelativeSelector:function(e){return A(this.selector," ",e)},makeAbsoluteSelector:function(e){e=e||this.selector;e=U(e);var t=e===this.selector?" > :first-child":this.selector;return U(e.replace(t,"").replace("!",""))},saveStyles:function(){var e=this.styles.fetchChanges();if(e.length){e.forEach(function(e){if(e.selector===this.selector){e.selector=e.selector.replace(" > :first-child","")}if(!e.isSelectGroup()&&e.selector!==this.makeAbsoluteSelector(this.selector)){e.selector=A(e.selector.split("@")[0],"@",e.getElementIndex(e.getNode()[0]))}if(e.isSelectGroup()){e.selector=e.selector.split("@")[0]}},this);var t=e.fetchValues();BX.Landing.Backend.getInstance().action("Landing\\Block::updateStyles",{block:this.id,data:t,lid:this.lid,siteId:this.siteId},{code:this.manifest.code})}},showStylePanel:function(e){var t=this.isBlockSelector(e);var n=this.getStyleOptions(e);BX.Landing.PageObject.getInstance().design().then(function(e){e.clearContent();if(n.type==="crm-form"){var t=BX.Landing.PageObject.getRootWindow();return Promise.all([t.BX.Runtime.loadExtension("landing.formstyleadapter"),BX.Runtime.loadExtension("landing.formstyleadapter")]).then(function(t){var n=t[1].FormStyleAdapter;var i=new n({formId:this.getBlockFormId().id,instanceId:this.getBlockFormId().instanceId,currentBlock:this});return Promise.all([e.show(),i.load()])}.bind(this)).catch(function(e){console.log(e)})}return e.show().then(function(e){return[e]})}.bind(this)).then(function(i){var a=i[0];var o=i[1];if(o){a.appendForm(o.getStyleForm());return}if(d(n.type)||c(n.type)){if(n.type.length){a.appendForm(this.createStyleForm(e,n,t))}}if(s(n.additional)){e=n.selector?n.selector:e;a.appendForm(this.createAdditionalForm({form:se,selector:e,group:n.additional,onChange:this.onAttributeChange.bind(this)}));return}if(d(n.additional)){n.additional.forEach(function(t){a.appendForm(this.createAdditionalForm({form:se,selector:e,group:t,onChange:this.onAttributeChange.bind(this)}))},this)}}.bind(this)).catch(function(e){if(BX.Type.isArrayFilled(e)){var t=510;var n=e.some(function(e){return String(e.code)===String(t)});if(n){BX.Dom.append(this.getAccessMessage(),BX.Landing.UI.Panel.StylePanel.getInstance().content)}}}.bind(this))},getAccessMessage:function(){if(!this.accessMessage){this.accessMessage=BX.create({tag:"div",props:{className:"landing-ui-access-error-message"},children:[BX.create({tag:"div",props:{className:"landing-ui-access-error-message-text"},text:BX.Landing.Loc.getMessage("LANDING_CRM_ACCESS_ERROR_MESSAGE")})]})}return this.accessMessage},getStyleOptions:function(e){if(this.isBlockSelector(e)){return this.prepareBlockOptions(this.manifest.style.block)}return this.manifest.style.nodes[e]},createAdditionalForm:function(e){var t=new e.form({title:e.group.name,type:"attrs"});e.group.attrs.forEach(function(n){var i=n.selector||e.selector;var a;if(d(n.tabs)){var s=new le({tabs:n.tabs.map(function(t){return{id:j(),name:t.name,active:t.active,fields:t.attrs.map(function(t){return this.createAttributeField(t,t.selector||e.selector,e.onChange)},this)}},this)});t.addCard(s);return}a=this.createAttributeField(n,i,e.onChange);t.addField(a)},this);return t},prepareBlockOptions:function(e){e=s(e)?e:{};e=F(e);e.name=BX.Landing.Loc.getMessage("BLOCK_STYLE_OPTIONS");if(!s(e.type)&&!c(e.type)&&!d(e.type)){e.type=["display","padding-top","padding-bottom","padding-left","padding-right","margin-top","background-color","background-gradient"]}return e},createAttributeField:function(e,t,n){var i=this.createFieldFactory(t,n);var a=this.getElementBySelector(t);if(!a&&t.includes("@")){var s=t.split("@");var o=this.getElementsBySelector(s[0]);if(o.length&&o[parseInt(s[1])]){a=o[parseInt(s[1])]}}var r=F(e);if(r.value===null||r.value===undefined){r.value=""}if(a){var c=M(a,r.attribute);if(BX.Type.isNil(c)){c=S(a,r.attribute)}if(c!==null){r.value=c}}return i.create(r)},onAttributeChange:function(e){clearTimeout(this.attributeChangeTimeout);if(!this.requestData){this.requestData={}}this.appendAttrFieldValue(this.requestData,e);Promise.resolve(this.requestData).then(this.applyAttributeChanges.bind(this)).then(this.saveChanges.bind(this)).then(this.reload.bind(this)).then(function(){this.requestData=null}.bind(this))},appendSettingsFieldValue:function(e,t){e["settings"]=e["settings"]||{};e["settings"][t.attribute]=t.getValue();return e},appendAttrFieldValue:function(e,t){var n=this.makeAbsoluteSelector(t.selector);var i=t.getValue();e[n]=e[n]||{};e[n]["attrs"]=e[n]["attrs"]||{};if(BX.Type.isArray(t.attribute)){t.attribute.forEach(function(a){var s=a.replace("data-","");var o=i[s];if(o!==undefined){try{o=O(o)}catch(e){o=t.getValue()[s]}e[n]["attrs"][a]=o}})}else{try{i=O(i)}catch(e){i=t.getValue()}e[n]["attrs"][t.attribute]=i}return e},appendMenuValue:function(e,t){e[t.code]=t.serialize();return e},getElementBySelector:function(e){if(this.isBlockSelector(e)){return this.content}var t;try{t=this.node.querySelector(e)}catch(e){t=null}return t},getElementsBySelector:function(e){if(this.isBlockSelector(e)){return[this.content]}var t;try{t=T(this.node.querySelectorAll(e))}catch(e){t=[]}return t},isBlockSelector:function(e){return!e||e===this.selector||"#block"+this.id===e},createFieldFactory:function(e,t){return new BX.Landing.UI.Factory.FieldFactory({selector:!this.isBlockSelector(e)?this.makeRelativeSelector(e):e,uploadParams:{action:"Block::uploadFile",block:this.id,lid:BX.Landing.Main.getInstance().id,id:BX.Landing.Main.getInstance().options.site_id},linkOptions:{siteId:BX.Landing.Main.getInstance().options.site_id,landingId:BX.Landing.Main.getInstance().id,filter:{"=TYPE":BX.Landing.Main.getInstance().options.params.type}},onValueChange:t||function(){}})},deleteBlock:function(e){var n=this.panels.get("block_action").buttons.get("remove");n.loader=n.loader||new BX.Loader({target:n.layout,size:28});n.loader.show();h(n.text,"landing-ui-hide-icon");void t(n.loader.layout.querySelector(".main-ui-loader-svg-circle"),{"stroke-width":"4px"});void t(n.loader.layout.querySelector(".main-ui-loader-svg"),{"margin-top":"-10px"});BX.Landing.UI.Panel.EditorPanel.getInstance().hide();if(this.blockActionsMenu){BX.Main.MenuManager.destroy(this.blockActionsMenu.id)}if(this.sidebarActionsMenu){BX.Main.MenuManager.destroy(this.sidebarActionsMenu.id)}window.localStorage.removeItem("landingBlockId");BX.Landing.Backend.getInstance().action("Landing::markDeletedBlock",{block:this.id,lid:this.lid,siteId:this.siteId},{code:this.manifest.code}).then(function(){n.loader.hide();u(n.text,"landing-ui-hide-icon");var t=this.createEvent();v("BX.Landing.Block:remove",[t]);T(this.node.querySelectorAll(".landing-ui-panel")).forEach(D);if(o(e)&&!e||!o(e)){var i=BX.Landing.PageObject.getBlocks().getByNode(BX.findPreviousSibling(this.node,{className:"block-wrapper"}));BX.Landing.History.getInstance().push(new BX.Landing.History.Entry({block:this.id,selector:"#block"+this.id,command:"removeBlock",undo:{currentBlock:i?i.id:null,lid:this.lid,code:this.manifest.code},redo:""}))}BX.Landing.PageObject.getBlocks().remove(this);D(this.node);v("Landing.Block:onAfterDelete",[this]);v("BX.Landing.Block:afterRemove",[t])}.bind(this),function(){n.loader.hide();u(n.text,"landing-ui-hide-icon")})},addBlockAfterThis:function(){BX.Landing.Main.getInstance().showBlocksPanel(this)},onNodeChange:function(e){var t=this.createEvent({node:e.node});v("BX.Landing.Block:Node:update",[t]);if(!e.isSavePrevented()){clearTimeout(this.changeTimeout);this.changedNodes.add(e);this.changeTimeout=setTimeout(function(){BX.Landing.Backend.getInstance().action("Landing\\Block::updateNodes",{block:this.id,data:this.changedNodes.fetchValues(),additional:this.changedNodes.fetchAdditionalValues(),lid:this.lid,siteId:this.siteId},{code:this.manifest.code});this.changedNodes.clear()}.bind(this),100)}},containsPseudoSelector:function(e){return Object.keys(e).some(function(e){var t;if(e==="cards"){return false}if(e==="dynamicState"){return false}if(BX.type.isPlainObject(this.manifest.menu)&&e in this.manifest.menu){return false}try{if(e!=="#block"+this.id&&e!==""){t=!this.node.querySelector(e)}else{t=false}}catch(n){t=!ye(e)}return t},this)},applyContentChanges:function(e){if(!s(e)){return Promise.reject(new TypeError("BX.Landing.Block.applyContentChanges: data isn't object"))}var t=F(e);Object.keys(t).forEach(function(e){if(!ye(e)){delete t[e]}});if(!l(t)){var n=this.createEvent({data:t});v(window,"BX.Landing.Block:beforeApplyContentChanges",[n])}var i=[];Object.keys(e).forEach(function(t){if(ye(t)){var n=this.nodes.getBySelector(t);if(n){var a=n.setValue(e[t],true,true);if(a){i.push(a);a.then(function(){e[t]=n.getValue()})}else{e[t]=n.getValue()}}}},this);return Promise.all(i).then(function(){return e})},applyMenuChanges:function(e){if(!s(e)){return Promise.reject(new TypeError("BX.Landing.Block.applyContentChanges: data isn't object"))}var t=Object.keys(this.manifest.menu||{});if(t.length>0){t.forEach(function(t){if(t in e){var n=this.menu.find(function(e){return e.code===t});n.rebuild(e[t])}}.bind(this));e.forceReload=true}this.initMenu();return Promise.resolve(e)},applyCardsChanges:function(e){if(!s(e)){return Promise.reject(new TypeError("BX.Landing.Block.applyCardsChanges: data isn't object"))}var t=[];if("cards"in e&&s(e.cards)){v("BX.Landing.Block:Cards:beforeUpdate",[this.createEvent()]);var n={};Object.keys(e.cards).forEach(function(i){var o=this.node.querySelector(i).parentElement;var r=this.node.querySelectorAll(i);var d=e.cards[i].values;var h=e.cards[i].presets;var u=e.cards[i].indexes;var g=e.cards[i].source;o.innerHTML="";Object.keys(d).forEach(function(e){g[e]={value:0,type:"card"};if(!l(h)&&!l(h[e])&&!r[u[e]]){g[e].type="preset";g[e].value=h[e];return}if(r[u[e]]){g[e].type="card";g[e].value=u[e]}},this);Object.keys(d).forEach(function(e){if(g[e].type==="preset"){var t=this.manifest.cards[i]["presets"][g[e].value]["html"];a(R(t),o);return}a(F(r[g[e].value]),o)},this);this.initNodes();this.initCards();this.initGroups();Object.keys(d).forEach(function(e){var i=d[e];Object.keys(i).forEach(function(e){n[e]=e in n?n[e]+1:0;var a=this.nodes.getBySelector(A(e,"@",n[e]));if(a){var o=i[e];var r=a.getValue();if(s(o)&&c(o.url)){o.url=N(o.url)}if(s(r)&&c(r.url)){r.url=N(r.url)}try{o=JSON.stringify(o)}catch(t){o=i[e]}try{r=JSON.stringify(r)}catch(e){r=a.getValue()}var d=a.setValue(i[e],true,true)||Promise.resolve();d.then(function(t,n,s){i[A(t,"@",n)]=a.getValue();if(a.manifest.type==="img"||a.manifest.type==="icon"){i[A(t,"@",n)]["url"]=O(s["url"])}delete i[e]}.bind(this,e,n[e],i[e]));t.push(d)}},this)},this);Promise.all(t).then(function(){this.initCardsLabels();this.initStyles();delete e.cards[i].presets;delete e.cards[i].indexes}.bind(this))},this);Promise.all(t).then(function(){v("BX.Landing.Block:Cards:update",[this.createEvent()])}.bind(this))}return Promise.all(t).then(function(){return Promise.resolve(e)})},applySettingsChanges:function(e){if(!s(e)){return Promise.reject(new TypeError("BX.Landing.Block.applyAttributeChanges: requestData isn't object"))}if(s(e.settings)&&!l(e.settings)){if(e.settings.id){this.content.id=e.settings.id}}return Promise.resolve(e)},applyAttributeChanges:function(e){if(!s(e)){return Promise.reject(new TypeError("BX.Landing.Block.applyAttributeChanges: requestData isn't object"))}var t=F(e);Object.keys(e).forEach(function(n){if(!(s(e[n])&&"attrs"in e[n])){delete t[n]}});if(!l(t)){var n=this.createEvent({data:t});v(window,"BX.Landing.Block:beforeApplyAttributesChanges",[n])}var i=this;Object.keys(e).forEach(function(t){if(s(e[t])&&"attrs"in e[t]){var n=i.getElementsBySelector(t);if(!n.length&&t.includes("@")){var a=t.split("@");n=i.getElementsBySelector(a[0]);if(n[parseInt(a[1])]){n=[n[parseInt(a[1])]]}}Object.keys(e[t].attrs).forEach(function(a){n.forEach(function(n){var s=N(e[t]["attrs"][a]);if(!a.includes("data-")){S(n,a,s)}else{M(n,a,s)}v("BX.Landing.Block:Node:updateAttr",[i.createEvent({node:n,data:e[t]["attrs"]})])})})}});return Promise.resolve(e)},saveChanges:function(e){if(!s(e)){return Promise.reject(new TypeError("BX.Landing.Block.saveChanges: data isn't object"))}if(Object.keys(e).length){var t={code:this.manifest.code};var n={block:this.id,data:e,lid:this.lid,siteId:this.siteId};var i={};if(s(e.settings)&&!l(e.settings)){if(e.settings.id){i.changeAnchor={action:"Block::changeAnchor",data:{block:this.id,lid:this.lid,data:e.settings.id}}}delete e.settings}if(!l(e)){var a=new q;Object.keys(n).forEach(function(e){a.add(this.nodes.getBySelector(e))},this);i.updateNodes={action:"Block::updateNodes",data:n,additional:a.fetchAdditionalValues()}}if(!l(e.cards)){var o=F(e.cards);delete e.cards;var r=BX.Landing.Utils.arrayUnique(Object.keys(o));r=r.length===1?r+" *":r.join(" *, ");var c=this.nodes.matches(r).fetchAdditionalValues();i.updateCards={action:"Block::updateCards",data:{block:this.id,lid:this.lid,siteId:this.siteId,data:o,additional:c}}}if(e.cardsFirst){var d=i;i={};if(d.changeAnchor){i.changeAnchor=d.changeAnchor}if(d.updateCards){i.updateCards=d.updateCards}if(d.updateNodes){i.updateNodes=d.updateNodes}delete e.cardsFirst}return BX.Landing.Backend.getInstance().batch("Landing\\Block::updateNodes",i,t).then(function(){return Promise.resolve(e)})}else{return Promise.resolve(e)}},fetchRequestData:function(e,t){var n={};var i={};var a=function(e,t){return t?e:e.fetchChanges()};i.attrs=new W;i.cards=new W;i.dynamicCards=new W;i.dynamicBlock=new W;i.content=new W;i.settings=new W;i.menu=new W;e.forms.forEach(function(e){i[e.type].push(e)});a(i.content.fetchFields(),t).reduce(V(this.appendContentFieldValue,this),n);var s=new H;i.cards.forEach(function(e){e.childForms.forEach(function(e){e.fields.forEach(function(e){if(e.type==="attr"){s.add(e)}})})});a(s,true).reduce(V(this.appendAttrFieldValue,this),n);i.cards.reduce(V(this.appendCardsFormValue,this),n);i.dynamicCards.reduce(V(this.appendDynamicCardsFormValue,this),n);i.dynamicBlock.reduce(V(this.appendDynamicBlockFormValue,this),n);a(i.attrs.fetchFields(),t).reduce(V(this.appendAttrFieldValue,this),n);a(i.settings.fetchFields(),t).reduce(V(this.appendSettingsFieldValue,this),n);i.menu.reduce(V(this.appendMenuValue,this),n);n.dynamicState=Object.keys(this.manifest.cards).reduce(function(e,t){e[t]=BX.type.isPlainObject(n.dynamicParams)&&t in n.dynamicParams;return e},{});n.dynamicState.wrapper=!!n.dynamicParams&&"wrapper"in n.dynamicParams;return Promise.resolve(n)},appendContentFieldValue:function(e,t){return e[t.selector]=t.getValue(),e},appendCardsFormValue:function(e,t){e.cards=e.cards||{};e.cards[t.code]={};e.cards[t.code]["values"]=t.serialize();e.cards[t.code]["presets"]=t.getUsedPresets();e.cards[t.code]["indexes"]=t.getIndexesMap();e.cards[t.code]["source"]={};return e},appendDynamicCardsFormValue:function(e,t){e.dynamicParams=e.dynamicParams||{};e.dynamicParams[t.code]={};e.dynamicParams[t.code]=t.serialize();return e},appendDynamicBlockFormValue:function(e,t){e.dynamicParams=e.dynamicParams||{};e.dynamicParams.wrapper=t.serialize();return e},reload:function(e){if(BX.type.isPlainObject(e)&&!this.containsPseudoSelector(e)){return Promise.resolve(e)}var t=new BX.Loader({target:this.parent.parentElement,color:"rgba(255, 255, 255, .8)"});t.layout.style.position="fixed";t.layout.style.zIndex="999";t.show();BX.Landing.Main.getInstance().showOverlay();var n=this;return BX.Landing.Backend.getInstance().action("Block::getContent",{block:this.id,lid:this.lid,siteId:this.siteId,editMode:1}).then(function(e){var t=this.createEvent();v("BX.Landing.Block:remove",[t]);BX.Landing.Main.getInstance().currentBlock=n;BX.Landing.Main.getInstance().currentArea=n.parent;return BX.Landing.Main.getInstance().addBlock(e,true,true)}.bind(this)).then(function(t){n.node=t;return Promise.resolve(e)}).then(function(e){return new Promise(function(n){setTimeout(function(){n(e);t.hide();BX.Landing.Main.getInstance().hideOverlay()},800)})})},onContentSave:function(){var e=this.panels.get("content_edit");if(e){e.hide();this.fetchRequestData(e).then(function(e){return Object.assign({},e,{cardsFirst:true})}).then(this.updateBlockState.bind(this))}},onContentCancel:function(){this.panels.get("content_edit").hide();this.tmpContent.innerHTML="";this.anchor=this.savedAnchor},getCardsSelector:function(){var e=Object.keys(this.manifest.cards);var t=A(e.join(","),", ");var n=A(e.join(" *,")," *");return A(t,n)},onStyleInput:function(e){this.saveStyles();var t=this.createEvent(e);v("BX.Landing.Block:updateStyle",[t])},getBlockEditForm:function(e){var t={};if(BX.type.isPlainObject(e)){t=Object.assign({},e)}var n=t.nodes||this.nodes;if(this.cards.length>0&&!e.hideCheckbox){n=this.nodes.notMatches(this.getCardsSelector())}var i=Object.keys(this.manifest.nodes);n=i.reduce(function(e,t){if(!t.includes(":")){n.matches(t).getVisible().filter(function(e){return e.manifest.allowFormEdit!==false}).forEach(function(t){e.push(t)})}return e},new q);var a=this.onBlockFormTypeChange.bind(this);var s=!!(!e.skipBlockState&&BX.type.isPlainObject(this.dynamicParams)&&this.dynamicParams.wrapper);var o="";var r=BX.Landing.Main.getInstance().options.helps;if(BX.type.isPlainObject(r)){o=r.DYNAMIC_BLOCKS}var c={text:BX.Landing.Loc.getMessage("LANDING_BLOCK__MAKE_A_DYNAMIC"),onChange:a,state:s,help:o};var d=new ae({title:e.formName||BX.Landing.Loc.getMessage("BLOCK_ELEMENTS"),description:this.manifest.block.formDescription,type:"content",code:this.id,headerCheckbox:function(){if(!e.hideCheckbox&&this.manifest.block.dynamic!==false){return c}return undefined}.bind(this)()});if(s){setTimeout(function(){a({form:d,state:true})})}n.forEach(function(e){d.addField(e.getField())});return d},getMenuEditForms:function(){return this.menu.map(function(e){return e.getForm()},this)},getAttrsEditForm:function(){var e=Object.keys(this.manifest.attrs);var t=[];e.forEach(function(e){var n=this.manifest.attrs[e];if(!n.hidden){n=!d(n)?[n]:n;n.forEach(function(n){if(!n.hidden&&c(n.type)){t.push(this.createAttributeField(n,n.selector||e))}},this)}},this);var n=new ae({id:"attr",type:"attrs",title:BX.Landing.Loc.getMessage("BLOCK_SETTINGS"),description:this.manifest.block.attrsFormDescription});t.forEach(function(e){n.addField(e)});return n},getAttrsAdditionalEditForms:function(){var e=Object.keys(this.manifest.attrs);var t=[];e.forEach(function(e){var n=this.manifest.attrs[e];if(!n.hidden){n=!d(n)?[n]:n;n.forEach(function(n){if(!n.hidden&&c(n.type)){return}if(c(n.name)&&n.attrs){t.push(this.createAdditionalForm({form:ae,selector:e,group:n,onChange:function(){}}))}},this)}},this);return t},getCardsEditForms:function(e){var t=Object.keys(this.manifest.cards);var n=Object.keys(this.manifest.nodes);var i=[];var a=t.reduce(function(e,t){var n=this.cards.filter(function(e){return e.selector.split("@")[0]===t});if(n.length>0){n.sort(function(e,t){return e.sortIndex-t.sortIndex});e.set(t,n)}return e}.bind(this),new Map);a.forEach(function(t,a){var o=BX.type.isPlainObject(this.dynamicParams)&&a in this.dynamicParams&&!e;var r=this.onCardsFormTypeChange.bind(this);var c=this.manifest.cards[a]["group_label"];var l="";var h=BX.Landing.Main.getInstance().options.helps;if(BX.type.isPlainObject(h)){l=h.DYNAMIC_BLOCKS}var u={text:BX.Landing.Loc.getMessage("LANDING_CARDS__MAKE_A_DYNAMIC"),onChange:r,state:o,help:l};var g=new re({title:c||BX.Landing.Loc.getMessage("LANDING_CARDS_FROM_TITLE"),code:a.split("@")[0],presets:t[0].manifest.presets,sync:t[0].manifest.sync,description:t[0].manifest.formDescription,forms:i,headerCheckbox:function(){if(this.manifest.block.dynamic!==false){return u}return undefined}.bind(this)()});i.push(g);if(o){setTimeout(function(){r({form:g,state:true})})}t.forEach(function(e){var t=new oe({label:e.getLabel()||e.getName(),labelBindings:e.manifest.label,selector:e.selector,preset:e.preset});var i=new q;var o=this.nodes.filter(function(t){return e.node.contains(t.node)});if(o.length){n.forEach(function(e){var t=o.matches(e);t.forEach(i.add,i)},this);i.forEach(function(e){if(e.manifest.allowFormEdit!==false){t.addField(e.getField())}});var r=this.manifest.cards[a].additional;if(s(r)){if(d(r.attrs)){r.attrs.forEach(function(n){var i=this.createAttributeField(n,e.selector,function(){});i.type="attr";t.addField(i)},this)}}if(this.tmpContent.contains(e.node)){g.addPresetForm(t)}else{g.addChildForm(t)}}},this)},this);return i},getBlockSettingsForm:function(){var e=new ae({title:BX.Landing.Loc.getMessage("BLOCK_SETTINGS"),type:"settings"});var t=this.createFieldFactory("!"+this.selector);var n=null;var i=BX.Landing.Main.getInstance().options.url;if(i[0]==="/"){i=top.location.origin+i}this.savedAnchor=this.anchor||this.node.id;var s=A(i,"#",this.anchor||this.node.id);var o=t.create({type:"text",name:BX.Landing.Loc.getMessage("BLOCK_SETTINGS_ANCHOR_FIELD"),description:"<span class='landing-ui-anchor-preview'>"+BX.Text.encode(s)+"</span>",attribute:"id",value:this.anchor||this.node.id,onInput:function(){var e=o.layout.querySelector(".landing-ui-anchor-preview");if(e){e.innerHTML=BX.Text.encode(A(i,"#",BX.Text.decode(o.getValue())))}this.anchor=o.getValue();if(n){D(n)}if(this.node.id!==o.getValue()&&document.getElementById(o.getValue())){n=BX.Landing.UI.Field.BaseField.createDescription(BX.Landing.Loc.getMessage("BLOCK_SETTINGS_ANCHOR_FIELD_VALIDATE_ERROR"));h(n,"landing-ui-error");a(n,o.layout)}if(!K(o.getValue())){n=BX.Landing.UI.Field.BaseField.createDescription(BX.Landing.Loc.getMessage("BLOCK_SETTINGS_ANCHOR_FIELD_VALIDATE_INVALID_ID"));h(n,"landing-ui-error");a(n,o.layout)}}.bind(this)});e.addField(o);return e},getEditForms:function(e){var t={};if(BX.type.isPlainObject(e)){t=Object.assign({},e)}if(arguments.length>1){t.nodes=arguments[0];t.formName=arguments[1];t.nodesOnly=arguments[2];t.showAll=arguments[3];t.skipCardsState=arguments[4];t.skipBlockState=arguments[5]}var n=new W;if(this.access>=fe){var i=!(l(this.manifest.nodes)&&l(this.manifest.attrs)&&l(this.manifest.menu));if(i){var a=this.getBlockEditForm(t);if(a.fields.length>0){n.add(a)}var s=this.getMenuEditForms(t);if(s.length>0){s.forEach(function(e){n.add(e)})}if(!t.nodesOnly){var o=this.getAttrsEditForm();if(o.fields.length>0){n.add(o)}var r=this.getAttrsAdditionalEditForms();if(r.length>0){r.forEach(function(e){n.add(e)})}var c=this.getCardsEditForms(t.skipCardsState);if(c.length>0){c.forEach(function(e){n.add(e)})}}}var d=this.getBlockSettingsForm();if(d.fields.length>0){n.push(d)}}return n},isLastBlockInArea:function(){return this.parent.querySelectorAll(".block-wrapper").length<2},onBlockRemove:function(){this.adjustSortButtonsState()},adjustSortButtonsState:function(){var e=this.panels.get("block_action");if(e){if(this.isLastBlockInArea()){e.buttons.get("up").disable();e.buttons.get("down").disable()}else{e.buttons.get("up").enable();e.buttons.get("down").enable()}}},getFieldType:function(e){var t=this.nodes.getBySelector(e.selector);if(t){return t.type}return null},getTypeReferences:function(e,t){return e.filter(function(e){return e.type===t})},convertReferencesToDropdownItems:function(e){var t=e.map(function(e){return{name:e.name,value:e.id}});t.push({name:BX.Landing.Loc.getMessage("LANDING_BLOCK__DYNAMIC_REFERENCE_HIDE"),html:'<span class="landing-ui-field-dropdown-sep"></span>'+BX.Landing.Loc.getMessage("LANDING_BLOCK__DYNAMIC_REFERENCE_HIDE"),value:"@hide"});return t},getDefaultDropdownItems:function(){return[{name:BX.Landing.Loc.getMessage("LANDING_CARDS__DYNAMIC_FIELD_NOT_SET"),value:""}]},getDynamicFiledValue:function(e,t){var n=this.dynamicParams||{};if(BX.type.isPlainObject(n[e])&&BX.type.isPlainObject(n[e].references)){return n[e].references[t]}},convertToDynamicFields:function(e,t,n){return e.map(function(e){var i=this.getFieldType(e);if(i!=="text"&&i!=="img"&&i!=="link"&&i!=="link_ref"){return e}var a=this.getTypeReferences(n,i);var s=this.convertReferencesToDropdownItems(a);var o=this.getDynamicFiledValue(t,e.selector);if(i==="link"){if(BX.type.isPlainObject(a[0])&&BX.type.isArray(a[0].actions)){return new BX.Landing.UI.Field.ClickAction({title:e.title,selector:e.selector,reference:a[0],linkField:e,value:o})}return e}if(s.length===0){s=this.getDefaultDropdownItems()}if(i==="img"){return new BX.Landing.UI.Field.DynamicImage({title:e.title,selector:e.selector,dropdownItems:s,value:BX.type.isString(o)?{id:o}:o,hideCheckbox:t==="wrapper"})}return new BX.Landing.UI.Field.DynamicDropdown({title:e.title,selector:e.selector,dropdownItems:s,value:BX.type.isString(o)?{id:o}:o,hideCheckbox:t==="wrapper"||i==="link_ref"})},this)},createDynamicCardsForm:function(e){var t="";var n=BX.Landing.Main.getInstance().options.helps;if(BX.type.isPlainObject(n)){t=n.DYNAMIC_BLOCKS}var i=new BX.Landing.UI.Form.DynamicCardsForm({title:e.title,code:e.code,type:"dynamicCards",dynamicParams:e.dynamicParams,headerCheckbox:{text:BX.Landing.Loc.getMessage("LANDING_CARDS__MAKE_A_DYNAMIC"),onChange:this.onCardsFormTypeChange.bind(this),state:true,help:t},onSourceChange:function(t){var n=this.convertToDynamicFields(e.form.childForms[0].fields,e.code,t.references);var a=new he({id:"references",items:n});var s=i.detailPageGroup.fields[0];if(!BX.Type.isStringFilled(s.getValue().href)){var o={text:"",href:""};if(t&&t.default&&t.default.detail){o.href=t.default.detail}s.setValue(o);s.hrefInput.makeDisplayedHrefValue()}var r=i.cards.get("references");i.replaceCard(r,a)}.bind(this)});return i},onCardsFormTypeChange:function(e){var t=this.panels.get("content_edit");var n=!!e.state;if(n){var i={};if(BX.type.isPlainObject(this.dynamicParams)&&this.dynamicParams[e.form.code]){i=this.dynamicParams[e.form.code]}var a=Object.assign({},i);if(BX.type.isPlainObject(a.settings)){if(!("pagesCount"in a.settings)){a.settings.pagesCount=e.form.childForms.length}}else{a.settings={pagesCount:e.form.childForms.length}}var s=this.createDynamicCardsForm({title:e.form.title,code:e.form.code,form:e.form,dynamicParams:a});t.replaceForm(e.form,s);return}delete this.dynamicParams[e.form.code];var o=this.getCardsEditForms(true).find(function(t){return t.code===e.form.code});t.replaceForm(e.form,o)},isDynamicCards:function(e){return e in this.dynamicParams},onBlockFormTypeChange:function(e){var t=this.panels.get("content_edit");var n=!!e.state;if(n){var i=this.createDynamicBlockForm({title:e.form.title,code:e.form.code,form:e.form,dynamicParams:this.dynamicParams});t.replaceForm(e.form,i);return}delete this.dynamicParams.wrapper;var a=this.getBlockEditForm({skipBlockState:true});t.replaceForm(e.form,a)},createDynamicBlockForm:function(e){var t="";var n=BX.Landing.Main.getInstance().options.helps;if(BX.type.isPlainObject(n)){t=n.DYNAMIC_BLOCKS}var i=new BX.Landing.UI.Form.DynamicBlockForm({title:e.title,code:this.id,type:"dynamicBlock",dynamicParams:e.dynamicParams,headerCheckbox:{text:BX.Landing.Loc.getMessage("LANDING_BLOCK__MAKE_A_DYNAMIC"),onChange:this.onBlockFormTypeChange.bind(this),state:true,help:t},onSourceChange:function(t){var n=i.cards.get("references");if(BX.type.isPlainObject(t)){var a=this.convertToDynamicFields(e.form.fields,"wrapper",t.references);var s=new he({id:"references",items:a});i.replaceCard(n,s);return}i.removeCard(n)}.bind(this)});return i},isDynamic:function(e){e=e||this.id;var t=this.panels.get("content_edit");if(t){var n=t.forms.toArray().find(function(t){return t.code===e});if(n){return n.isCheckboxChecked()}}e=e===this.id?"wrapper":e;return!!this.dynamicParams&&e in this.dynamicParams}}})();
/* End */
;
; /* Start:"a:4:{s:4:"full";s:45:"/bitrix/js/landing/card.min.js?16322955551589";s:6:"source";s:26:"/bitrix/js/landing/card.js";s:3:"min";s:0:"";s:3:"map";s:0:"";}"*/
(function(){"use strict";BX.namespace("BX.Landing");var n=BX.Landing.Utils.clone;var e=BX.Landing.Utils.isPlainObject;var t=BX.Landing.Utils.isEmpty;var i=BX.Landing.Utils.data;var s=BX.Landing.Utils.deepFreeze;BX.Landing.Block.Card=function(a,r,l,d){this.node=a;this.manifest=r||{};this.selector=l;this.panels=new BX.Landing.UI.Collection.PanelCollection;this.form=null;this.node.classList.add("landing-card");this.label=d;this.preset=null;this.sortIndex=-1;if(e(this.manifest.presets)&&!t(this.manifest.presets)){var o=i(this.node,"data-card-preset");if(o){this.preset=n(this.manifest.presets[o]);this.preset.id=o;s(this.preset)}}if(!BX.type.isDomNode(this.node)){throw new Error("BX.Landing.Block.Card: 'node' is not a DOMNode.")}if(!BX.type.isPlainObject(this.manifest)){throw new Error("BX.Landing.Block.Card: 'manifest' is not an Object.")}};BX.Landing.Block.Card.init=function(n,e,t){return new BX.Landing.Block.Card(n,e,t)};BX.Landing.Block.Card.prototype={getIndex:function(){var n=parseInt(this.selector.split("@")[1]);n=BX.type.isNumber(n)?n:0;return n},getName:function(){var n=(this.manifest.name||"")+" "+(this.getIndex()+1);if(this.manifest.label){var e=this.node.querySelector('[data-selector*="'+this.manifest.label+'"]');if(e&&e.innerHTML){n=e.innerHTML}}return n},getLabel:function(){return this.label},addPanel:function(n){if(!!n&&n instanceof BX.Landing.UI.Panel.BasePanel&&!this.panels.contains(n)){this.panels.add(n);this.node.appendChild(n.layout)}},clone:function(){return new BX.Landing.Block.Card(n(this.node),n(this.manifest),this.selector,n(this.label))}}})();
/* End */
;
; /* Start:"a:4:{s:4:"full";s:45:"/bitrix/js/landing/node.min.js?16322955642183";s:6:"source";s:26:"/bitrix/js/landing/node.js";s:3:"min";s:30:"/bitrix/js/landing/node.min.js";s:3:"map";s:30:"/bitrix/js/landing/node.map.js";}"*/
(function(){"use strict";BX.namespace("BX.Landing.Block");var n=BX.Landing.Utils.isFunction;var t=BX.Landing.Utils.isString;var e=BX.Landing.Utils.isPlainObject;var i=BX.Landing.Utils.isArray;var o=BX.Landing.Utils.bind;var s=BX.Landing.Utils.proxy;var a=BX.Landing.Utils.data;BX.Landing.Block.Node=function(i){this.node=i.node;this.manifest=e(i.manifest)?i.manifest:{};this.selector=t(i.selector)?i.selector:"";this.onChangeHandler=n(i.onChange)?i.onChange:function(){};this.onDesignShow=n(i.onDesignShow)?i.onDesignShow:function(){};this.changeOptionsHandler=n(i.onChangeOptions)?i.onChangeOptions:function(){};this.onDocumentClick=s(this.onDocumentClick,this);this.onDocumentKeydown=s(this.onDocumentKeydown,this);o(document,"click",this.onDocumentClick);o(document,"keydown",this.onDocumentKeydown);Object.freeze(this.manifest);this.node.dataset.selector=this.selector;if(this.isAllowInlineEdit()){this.onAllowInlineEdit()}};BX.Landing.Block.Node.storage=[];BX.Landing.Block.Node.prototype={onDocumentClick:function(n){},onDocumentKeydown:function(n){if(n.keyCode===27){this.onEscapePress()}},onEscapePress:function(){},getField:function(){throw new Error("Must be implemented by subclass")},showEditor:function(){},hideEditor:function(){},onAllowInlineEdit:function(){},isAllowInlineEdit:function(){return this.manifest.allowInlineEdit!==false},isGrouped:function(){return typeof this.manifest.group==="string"&&this.manifest.group.length>0},setValue:function(n,t,e){throw new Error("Must be implemented by subclass")},getValue:function(){throw new Error("Must be implemented by subclass")},getAdditionalValue:function(){if(e(this.manifest.extend)&&i(this.manifest.extend.attrs)){return this.manifest.extend.attrs.reduce(function(n,t){return n[t]=a(this.node,t),n}.bind(this),{})}return{}},onChange:function(){this.onChangeHandler.apply(null,[this])},getIndex:function(){var n=parseInt(this.selector.split("@")[1]);n=n===n?n:0;return n},preventSave:function(n){this.isSavePreventedValue=n},isSavePrevented:function(){return!!this.isSavePreventedValue},getBlock:function(){return BX.Landing.PageObject.getBlocks().getByChildNode(this.node)}}})();
/* End */
;
; /* Start:"a:4:{s:4:"full";s:50:"/bitrix/js/landing/node/text.min.js?16322955646515";s:6:"source";s:31:"/bitrix/js/landing/node/text.js";s:3:"min";s:35:"/bitrix/js/landing/node/text.min.js";s:3:"map";s:35:"/bitrix/js/landing/node/text.map.js";}"*/
(function(){"use strict";BX.namespace("BX.Landing");var t=BX.Landing.Utils.escapeText;var e=BX.Landing.Utils.Matchers.headerTag;var n=BX.Landing.Utils.changeTagName;var i=BX.Landing.Utils.textToPlaceholders;BX.Landing.Block.Node.Text=function(t){BX.Landing.Block.Node.apply(this,arguments);this.type="text";this.onClick=this.onClick.bind(this);this.onPaste=this.onPaste.bind(this);this.onDrop=this.onDrop.bind(this);this.onInput=this.onInput.bind(this);this.onMousedown=this.onMousedown.bind(this);this.onMouseup=this.onMouseup.bind(this);this.node.addEventListener("mousedown",this.onMousedown);this.node.addEventListener("click",this.onClick);this.node.addEventListener("paste",this.onPaste);this.node.addEventListener("drop",this.onDrop);this.node.addEventListener("input",this.onInput);this.node.addEventListener("keydown",this.onInput);document.addEventListener("mouseup",this.onMouseup)};BX.Landing.Block.Node.Text.currentNode=null;BX.Landing.Block.Node.Text.prototype={__proto__:BX.Landing.Block.Node.prototype,superClass:BX.Landing.Block.Node.prototype,constructor:BX.Landing.Block.Node.Text,onAllowInlineEdit:function(){this.node.setAttribute("title",t(BX.Landing.Loc.getMessage("LANDING_TITLE_OF_TEXT_NODE")))},onChange:function(t,e){this.superClass.onChange.call(this,arguments);if(!t){BX.Landing.UI.Panel.EditorPanel.getInstance().adjustPosition(this.node)}if(!e){BX.Landing.History.getInstance().push(new BX.Landing.History.Entry({block:this.getBlock().id,selector:this.selector,command:"editText",undo:this.lastValue,redo:this.getValue()}))}},onInput:function(t){clearTimeout(this.inputTimeout);var e=t.keyCode||t.which;if(!(e===90&&(top.window.navigator.userAgent.match(/win/i)?t.ctrlKey:t.metaKey))){this.inputTimeout=setTimeout(function(){if(this.lastValue!==this.getValue()){this.onChange(true);this.lastValue=this.getValue()}}.bind(this),400)}},onEscapePress:function(){if(this.isEditable()){if(this===BX.Landing.Block.Node.Text.currentNode){BX.Landing.UI.Panel.EditorPanel.getInstance().hide()}this.disableEdit()}},onDrop:function(t){t.preventDefault()},onPaste:function(t){t.preventDefault();if(t.clipboardData&&t.clipboardData.getData){var e=t.clipboardData.getData("text/plain");var n=BX.Text.encode(e);var i=n.replace(new RegExp("\n","g"),"<br>");document.execCommand("insertHTML",false,i)}else{var s=window.clipboardData.getData("text");document.execCommand("paste",true,BX.Text.encode(s))}this.onChange()},onDocumentClick:function(t){if(this.isEditable()&&!this.fromNode){BX.Landing.UI.Panel.EditorPanel.getInstance().hide();this.disableEdit()}this.fromNode=false},onMousedown:function(t){if(!this.manifest.group){this.fromNode=true;if(this.manifest.allowInlineEdit!==false&&BX.Landing.Main.getInstance().isControlsEnabled()){t.stopPropagation();this.enableEdit();BX.Landing.UI.Tool.ColorPicker.hideAll();BX.Landing.UI.Button.FontAction.hideAll()}requestAnimationFrame(function(){if(t.target.nodeName==="A"||t.target.parentElement.nodeName==="A"){var e=document.createRange();e.selectNode(t.target);window.getSelection().removeAllRanges();window.getSelection().addRange(e)}})}},onMouseup:function(){setTimeout(function(){this.fromNode=false}.bind(this),10)},onClick:function(t){t.stopPropagation();t.preventDefault();this.fromNode=false;if(t.target.nodeName==="A"||t.target.parentElement.nodeName==="A"){var e=document.createRange();e.selectNode(t.target);window.getSelection().removeAllRanges();window.getSelection().addRange(e)}},isEditable:function(){return this.node.isContentEditable},enableEdit:function(){if(!this.isEditable()&&!BX.Landing.UI.Panel.StylePanel.getInstance().isShown()){if(this!==BX.Landing.Block.Node.Text.currentNode&&BX.Landing.Block.Node.Text.currentNode!==null){BX.Landing.Block.Node.Text.currentNode.disableEdit()}BX.Landing.Block.Node.Text.currentNode=this;var t=[];t.push(this.getDesignButton());if(this.isHeader()){t.push(this.getChangeTagButton());this.getChangeTagButton().onChangeHandler=this.onChangeTag.bind(this)}if(!this.manifest.textOnly){BX.Landing.UI.Panel.EditorPanel.getInstance().show(this.node,null,t)}this.lastValue=this.getValue();this.node.contentEditable=true;this.node.setAttribute("title","")}},getDesignButton:function(){if(!this.designButton){this.designButton=new BX.Landing.UI.Button.Design("design",{html:BX.Landing.Loc.getMessage("LANDING_TITLE_OF_EDITOR_ACTION_DESIGN"),attrs:{title:BX.Landing.Loc.getMessage("LANDING_TITLE_OF_EDITOR_ACTION_DESIGN")},onClick:function(){BX.Landing.UI.Panel.EditorPanel.getInstance().hide();this.disableEdit();this.onDesignShow(this.manifest.code)}.bind(this)})}return this.designButton},disableEdit:function(){if(this.isEditable()){this.node.contentEditable=false;if(this.lastValue!==this.getValue()){this.onChange();this.lastValue=this.getValue()}if(this.isAllowInlineEdit()){this.node.setAttribute("title",t(BX.Landing.Loc.getMessage("LANDING_TITLE_OF_TEXT_NODE")))}}},getField:function(){if(!this.field){this.field=new BX.Landing.UI.Field.Text({selector:this.selector,title:this.manifest.name,content:this.node.innerHTML,textOnly:this.manifest.textOnly,bind:this.node});if(this.isHeader()){this.field.changeTagButton=this.getChangeTagButton()}}else{this.field.setValue(this.node.innerHTML);this.field.content=this.node.innerHTML}return this.field},setValue:function(t,e,n){this.preventSave(e);this.lastValue=this.isSavePrevented()?this.getValue():this.lastValue;this.node.innerHTML=t;this.onChange(false,n)},getValue:function(){return i(this.node.innerHTML)},isHeader:function(){return e.test(this.node.nodeName)},getChangeTagButton:function(){if(!this.changeTagButton){this.changeTagButton=new BX.Landing.UI.Button.ChangeTag("changeTag",{html:'<span class="landing-ui-icon-editor-'+this.node.nodeName.toLowerCase()+'"></span>',attrs:{title:BX.Landing.Loc.getMessage("LANDING_TITLE_OF_EDITOR_ACTION_CHANGE_TAG")},onChange:this.onChangeTag.bind(this)})}this.changeTagButton.insertAfter="unlink";this.changeTagButton.activateItem(this.node.nodeName);return this.changeTagButton},onChangeTag:function(t){this.node=n(this.node,t);this.node.addEventListener("mousedown",this.onMousedown);this.node.addEventListener("click",this.onClick);this.node.addEventListener("paste",this.onPaste);this.node.addEventListener("drop",this.onDrop);this.node.addEventListener("input",this.onInput);this.node.addEventListener("keydown",this.onInput);if(!this.getField().isEditable()){this.disableEdit();this.enableEdit()}var e={};e[this.selector]=t;this.changeOptionsHandler(e)}}})();
/* End */
;
; /* Start:"a:4:{s:4:"full";s:50:"/bitrix/js/landing/node/link.min.js?16322955643822";s:6:"source";s:31:"/bitrix/js/landing/node/link.js";s:3:"min";s:35:"/bitrix/js/landing/node/link.min.js";s:3:"map";s:35:"/bitrix/js/landing/node/link.map.js";}"*/
(function(){"use strict";BX.namespace("BX.Landing");var t=BX.Landing.Utils.trim;var e=BX.Landing.Utils.isPlainObject;var i=BX.Landing.Utils.isString;var n=BX.Landing.Utils.textToPlaceholders;var a=BX.Landing.Utils.create;var s=BX.Landing.Utils.escapeText;var d=BX.Landing.Utils.decodeDataValue;BX.Landing.Block.Node.Link=function(t){BX.Landing.Block.Node.apply(this,arguments);this.type="link";if(!this.isGrouped()){this.node.addEventListener("click",this.onClick.bind(this))}if(this.isAllowInlineEdit()){this.node.setAttribute("title",BX.Landing.Loc.getMessage("LANDING_TITLE_OF_LINK_NODE"))}};BX.Landing.Block.Node.Link.prototype={__proto__:BX.Landing.Block.Node.prototype,constructor:BX.Landing.Block.Node.Link,onContentUpdate:function(){var t=this.getBlock().id;clearTimeout(this.contentEditTimeout);this.contentEditTimeout=setTimeout(function(){BX.Landing.History.getInstance().push(new BX.Landing.History.Entry({block:t,selector:this.selector,command:"editLink",undo:this.startValue,redo:this.getValue()}));this.startValue=null}.bind(this),400);this.getField().setValue(this.getValue())},isMenuMode:function(){return this.manifest.menuMode===true},onClick:function(t){t.preventDefault();if(!this.isMenuMode()){t.stopPropagation()}if(this.isAllowInlineEdit()){BX.Landing.UI.Button.FontAction.hideAll();BX.Landing.UI.Button.ColorAction.hideAll();if(!BX.Landing.UI.Panel.StylePanel.getInstance().isShown()){BX.Landing.UI.Panel.Link.getInstance().show(this)}}},isPrevented:function(){return this.getValue().target==="_popup"},setValue:function(t,e,n){this.startValue=this.startValue||this.getValue();this.preventSave(e);if(!this.containsImage()&&this.isAllowInlineEdit()){var a=this.getField(true).hrefInput;if(i(t.text)&&t.text.includes("{{name}}")){a.getPlaceholderData(t.href).then(function(e){this.node.innerHTML=t.text.replace(new RegExp("{{name}}"),'<span data-placeholder="name">'+e.name+"</span>")}.bind(this))}else{if(!this.getField().containsHtml()&&!this.manifest.skipContent){this.node.innerHTML=s(t.text)}}}this.node.setAttribute("href",d(t.href));this.node.setAttribute("target",s(t.target));if("attrs"in t){for(var o in t.attrs){if(t.attrs.hasOwnProperty(o)){this.node.setAttribute(o,t.attrs[o])}}}else{this.node.removeAttribute("data-url");this.node.removeAttribute("data-embed")}this.onChange();if(!n){this.onContentUpdate()}},containsImage:function(){return!!this.node.firstElementChild&&this.node.firstElementChild.tagName==="IMG"},getValue:function(){var i={text:n(t(this.node.innerHTML)),href:t(this.node.getAttribute("href")),target:t(this.node.getAttribute("target")||"_self")};if(this.node.getAttribute("data-url")){i.attrs={"data-url":t(this.node.getAttribute("data-url"))}}if(this.node.getAttribute("data-dynamic")){if(!e(i.attrs)){i.attrs={}}i.attrs["data-dynamic"]=this.node.getAttribute("data-dynamic")}if(this.manifest.skipContent){i["skipContent"]=true;delete i.text}return i},getField:function(t){var e=this.getValue();e.text=n(a("div",{html:e.text}).innerHTML);if(!this.field){var i=[BX.Landing.UI.Field.LinkURL.TYPE_BLOCK,BX.Landing.UI.Field.LinkURL.TYPE_PAGE,BX.Landing.UI.Field.LinkURL.TYPE_CRM_FORM,BX.Landing.UI.Field.LinkURL.TYPE_CRM_PHONE];if(BX.Landing.Main.getInstance().options.params.type===BX.Landing.Main.TYPE_STORE){i.push(BX.Landing.UI.Field.LinkURL.TYPE_CATALOG)}this.field=new BX.Landing.UI.Field.Link({title:this.manifest.name,selector:this.selector,skipContent:this.manifest.skipContent,content:e,options:{siteId:BX.Landing.Main.getInstance().options.site_id,landingId:BX.Landing.Main.getInstance().id},allowedTypes:i})}else{if(!t){this.field.setValue(e);this.field.content=e;this.field.hrefInput.content=e.href;this.field.hrefInput.makeDisplayedHrefValue();this.field.hrefInput.removeHrefTypeFromHrefString()}}return this.field}}})();
/* End */
;
; /* Start:"a:4:{s:4:"full";s:49:"/bitrix/js/landing/node/img.min.js?16322955645852";s:6:"source";s:30:"/bitrix/js/landing/node/img.js";s:3:"min";s:34:"/bitrix/js/landing/node/img.min.js";s:3:"map";s:34:"/bitrix/js/landing/node/img.map.js";}"*/
(function(){"use strict";BX.namespace("BX.Landing");var e=BX.Landing.Utils.attr;var t=BX.Landing.Utils.data;var i=BX.Landing.Utils.encodeDataValue;var n=BX.Landing.Utils.decodeDataValue;BX.Landing.Block.Node.Img=function(e){BX.Landing.Block.Node.apply(this,arguments);this.type="img";this.editPanel=null;this.lastValue=null;this.field=null;this.uploadParams=e.uploadParams;if(!this.isGrouped()){this.node.addEventListener("click",this.onClick.bind(this))}if(this.isAllowInlineEdit()){this.node.setAttribute("title",BX.Landing.Loc.getMessage("LANDING_TITLE_OF_IMAGE_NODE"))}};function a(e){return e.node.nodeName!=="IMG"}function s(e){return e.node.nodeName==="IMG"}function d(e){return e.node.nodeName==="SPAN"||e.node.nodeName==="I"||e.node.nodeName==="EM"}function o(e){var t=e.node.getAttribute("style");if(t){var i=t.split(";")[0].match(/url\((.*?)\)/);if(i&&i[1]){return i[1].replace(/["|']/g,"")}}return""}function l(e){var t=e.node.getAttribute("style");if(t){var i=t.match(/1x, url\(["|'](.*)["|']\) 2x\); /);if(i&&i[1]){return i[1].replace(/["|']/g,"")}}return""}function r(e){var t=parseInt(e.node.dataset.fileid);return t===t?t:-1}function c(e){var t=parseInt(e.node.dataset.fileid2x);return t===t?t:-1}function u(t){var i=e(t.node,"alt");return!!i?i:""}function g(e){var i=t(e.node,"data-pseudo-url");return!!i?i:""}function h(t){var i=e(t.node,"src");return!!i?i:""}function f(t){var i=e(t.node,"srcset");return!!i?i.replace(" 2x",""):""}function m(e,t){if(!s(e)){var i=BX.create("img",{attrs:{src:t.src,alt:t.alt,"data-fileid":t.id}});e.node.parentNode.insertBefore(i,e.node);BX.remove(e.node);e.node=i}else{e.node.src=t.src;e.node.alt=t.alt;e.node.dataset.fileid=t.id||-1;e.node.srcset=t.src2x?t.src2x+" 2x":"";e.node.dataset.fileid2x=t.id2x||-1}}function B(e,t){if(!a(e)){var i=BX.create("div",{attrs:{style:'background-image: url("'+t.src+'")',"data-fileid":t.id}});e.node.parentNode.insertBefore(i,e.node);BX.remove(e.node);e.node=i}else{if(t.src){e.node.style.backgroundImage='url("'+t.src+'")';if(t.src2x){var n=['background-image: url("'+t.src+'");','background-image: -webkit-image-set(url("'+t.src+'") 1x, url("'+t.src2x+'") 2x);','background-image: image-set(url("'+t.src+'") 1x, url("'+t.src2x+'") 2x);'].join(" ");e.node.setAttribute("style",n)}}else{if(e.node.style){e.node.style.removeProperty("background-image")}}e.node.dataset.fileid=t.id||-1;e.node.dataset.fileid2x=t.id2x||-1}}BX.Landing.Block.Node.Img.prototype={__proto__:BX.Landing.Block.Node.prototype,constructor:BX.Landing.Block.Node.Img,onClick:function(e){if(this.manifest.allowInlineEdit!==false&&BX.Landing.Main.getInstance().isControlsEnabled()&&(!BX.Landing.Block.Node.Text.currentNode||!BX.Landing.Block.Node.Text.currentNode.isEditable())&&!BX.Landing.UI.Panel.StylePanel.getInstance().isShown()){e.preventDefault();e.stopPropagation();BX.Landing.UI.Button.FontAction.hideAll();BX.Landing.UI.Button.ColorAction.hideAll();if(!this.editPanel){this.editPanel=new BX.Landing.UI.Panel.Content(this.selector,{title:BX.Landing.Loc.getMessage("LANDING_IMAGE_PANEL_TITLE"),className:"landing-ui-panel-edit-image"});this.editPanel.appendFooterButton(new BX.Landing.UI.Button.BaseButton("save_block_content",{text:BX.Landing.Loc.getMessage("BLOCK_SAVE"),onClick:this.save.bind(this),className:"landing-ui-button-content-save"}));this.editPanel.appendFooterButton(new BX.Landing.UI.Button.BaseButton("cancel_block_content",{text:BX.Landing.Loc.getMessage("BLOCK_CANCEL"),onClick:this.editPanel.hide.bind(this.editPanel),className:"landing-ui-button-content-cancel"}));document.body.appendChild(this.editPanel.layout)}var t=new BX.Landing.UI.Form.BaseForm({title:this.manifest.name});t.addField(this.getField());this.editPanel.clear();this.editPanel.appendForm(t);this.editPanel.show();BX.Landing.UI.Panel.EditorPanel.getInstance().hide()}},save:function(){var e=this.editPanel.forms[0].fields[0].getValue();if(JSON.stringify(this.getValue())!==JSON.stringify(e)){this.setValue(e)}this.editPanel.hide()},getField:function(){if(!this.field){var e="";if(this.manifest.dimensions){var t=this.manifest.dimensions;var i=t.width||t.maxWidth||t.minWidth;var s=t.height||t.maxHeight||t.minHeight;if(i&&!s){e=BX.Landing.Loc.getMessage("LANDING_CONTENT_IMAGE_RECOMMENDED_WIDTH")+" ";e+=i+"px"}else if(s&&!i){e=BX.Landing.Loc.getMessage("LANDING_CONTENT_IMAGE_RECOMMENDED_HEIGHT")+" ";e+=s+"px"}else if(i&&s){e=BX.Landing.Loc.getMessage("LANDING_CONTENT_IMAGE_RECOMMENDED_SIZE")+" ";e+=i+"px&nbsp;/&nbsp;";e+=s+"px"}}var d=this.getValue();d.url=n(d.url);var o=!!this.node.closest("a")||!!this.manifest.disableLink;this.field=new BX.Landing.UI.Field.Image({selector:this.selector,title:this.manifest.name,description:e,disableLink:o,content:d,dimensions:!!this.manifest.dimensions?this.manifest.dimensions:{},disableAltField:a(this),uploadParams:this.uploadParams})}else{this.field.setValue(this.getValue());this.field.content=this.getValue();requestAnimationFrame(function(){this.field.adjustPreviewBackgroundSize()}.bind(this))}return this.field},setValue:function(t,i,n){this.lastValue=this.lastValue||this.getValue();this.preventSave(i);t.src=decodeURIComponent(t.src);if(s(this)){m(this,t)}if(a(this)){B(this,t)}if(t.url){e(this.node,"data-pseudo-url",t.url)}this.onChange();if(!n){BX.Landing.History.getInstance().push(new BX.Landing.History.Entry({block:this.getBlock().id,selector:this.selector,command:"editImage",undo:this.lastValue,redo:this.getValue()}))}this.lastValue=this.getValue()},getValue:function(){var e={type:"",src:"",src2x:"",id:-1,id2x:-1,alt:"",url:""};if(a(this)){e.type="background";e.src=o(this);e.src2x=l(this);e.id=r(this);e.id2x=c(this)}if(s(this)){e.type="image";e.src=h(this);e.src2x=f(this);e.id=r(this);e.id2x=c(this);e.alt=u(this)}e.url=i(g(this))||{text:"",href:"",target:"_self",enabled:false};return e}}})();
/* End */
;
; /* Start:"a:4:{s:4:"full";s:44:"/bitrix/js/landing/node/ul.js?16322955645944";s:6:"source";s:29:"/bitrix/js/landing/node/ul.js";s:3:"min";s:0:"";s:3:"map";s:0:"";}"*/
(function() {

"use strict";

BX.namespace("BX.Landing");

/**
 * DOMNode of Block (Ul).
 * @param {nodeOptions} options
 */
BX.Landing.Block.Node.Ul = function(options)
{
	BX.Landing.Block.Node.apply(this, arguments);

	this.popup = null;
	this.nodeEditSubmit = null;
	this.nodeEditLi = [];
	this.content = [];

	// get all LI with BIU tags
	var ulLi = BX.findChildren(this.node, {tag: "li"});
	for (var i = 0, c = ulLi.length; i < c; i++)
	{
		var liContent = "";
		for (var j = 0, cc = ulLi[i].childNodes.length; j < cc; j++)
		{
			if (
				ulLi[i].childNodes[j].nodeType === 1 &&
				(
					ulLi[i].childNodes[j].tagName === "B" ||
					ulLi[i].childNodes[j].tagName === "I" ||
					ulLi[i].childNodes[j].tagName === "U"
				)
			)
			{
				liContent += ulLi[i].childNodes[j].outerHTML;
			}
			else if (
					ulLi[i].childNodes[j].nodeType === 3 &&
					BX.util.trim(ulLi[i].childNodes[j].textContent) !== ""
			)
			{
				liContent += " #VAL# ";
			}
		}
		this.content.push({
			content: BX.util.trim(ulLi[i].textContent),
			original: liContent
		});
	}

	BX.bind(this.node, "click", BX.delegate(this.onClick, this));
};


BX.Landing.Block.Node.Ul.prototype = {
	__proto__: BX.Landing.Block.Node.prototype,
	constructor: BX.Landing.Block.Node.Ul,

	/**
	 * Save content for Node.
	 * @returns {void}
	 */
	saveContent: function ()
	{
		var wasChanged = false;
		var isNulled = true;
		// change any li or not
		for (var i = 0, c = this.nodeEditLi.length; i < c; i++)
		{
			if (this.nodeEditLi[i] !== null)
			{
				var value = BX.util.trim(this.nodeEditLi[i].value);
				isNulled = false;
				if (
					typeof this.content[i] === "undefined" ||
					this.content[i].content !== value
				)
				{
					wasChanged = true;
					break;
				}
			}
			else
			{
				wasChanged = true;
				break;
			}
		}
		// save content
		if (!isNulled && wasChanged)
		{
			BX.cleanNode(this.node);
			this.content = [];
			for (var i = 0, c = this.nodeEditLi.length; i < c; i++)
			{
				if (this.nodeEditLi[i] !== null)
				{
					var value = BX.util.trim(this.nodeEditLi[i].value);
					var original = BX.data(this.nodeEditLi[i], "original");
					this.content.push({
						content: value,
						original: original
					});
					this.node.appendChild(BX.create("li", {
						html: original.replace("#VAL#", BX.util.htmlspecialchars(value))
					}));
				}
				else
				{
					this.content.push(false);
				}
			}
			this.markAsChanged();
		}
	},

	/**
	 * Return element for add new li item.
	 * @returns {DOMNode}
	 */
	getAddLiButton: function (i)
	{
		return BX.create("input", {
			attrs: {
				type: "button",
				value: "+"
			},
			dataset: {
				i: i
			},
			events: {
				click: BX.delegate(function ()
				{
					var button = BX.proxy_context;
					var i = parseInt(BX.data(button, "i"));
					var newLi = BX.create("input", {
						dataset: {
							original: this.content[i].original
						},
						attrs: {
							type: "text"
						}
					});
					BX.insertAfter(BX.create("div", {
						children: [
							newLi,
							this.getAddLiButton(i + 1),
							this.getRemoveLiButton(i + 1)
						]
					}), button.parentNode);
					this.nodeEditLi.splice(i + 1, 0, newLi);
					BX.focus(newLi);
				}, this)
			}
		});
	},

	/**
	 * Return element for remove li item.
	 * @returns {DOMNode}
	 */
	getRemoveLiButton: function (i)
	{
		return BX.create("input", {
			attrs: {
				type: "button",
				value: "-"
			},
			dataset: {
				i: i
			},
			events: {
				click: BX.delegate(function ()
				{
					var button = BX.proxy_context;
					this.nodeEditLi[BX.data(button, "i")] = null;
					BX.remove(button.parentNode);
				}, this)
			}
		});
	},

	/**
	 * Rerturn nodes for edit content.
	 * @param {Boolean} showbutton False if not show save button.
	 * @returns {Array of DOMNode}
	 */
	getEditNodes: function (showbutton)
	{
		var li, editLi = [];

		this.nodeEditLi = [];

		// edit li
		for (var i = 0, c = this.content.length; i < c; i++)
		{
			li = BX.create("input", {
				dataset: {
					original: this.content[i].original
				},
				attrs: {
					type: "text",
					value: BX.util.trim(this.content[i].content)
				}
			});
			this.nodeEditLi.push(li);

			editLi.push(BX.create("div", {
				children: [
					li,
					this.getAddLiButton(i),
					this.getRemoveLiButton(i)
				]
			}));
		}

		// save button
		if (showbutton !== false)
		{
			this.nodeEditSubmit = BX.create("input", {
				attrs: {
					type: "button",
					value: "Save"
				},
				events: {
					click: function ()
					{
						this.saveContent();
						this.popup.close();
					}.bind(this)
				}
			});
		}

		if (showbutton !== false)
		{
			editLi.push(this.nodeEditSubmit);
		}

		return editLi;
	},

	/**
	 * Click on field - edit mode.
	 * @param {MouseEvent} e
	 * @returns {void}
	 */
	onClick: function (e)
	{
		this.popup = BX.PopupWindowManager.create(
			"landing_node_img",
			BX.proxy_context,
			{
				closeIcon: false,
				autoHide: true,
				closeByEsc: true,
				contentColor: "white",
				angle: true,
				offsetLeft: 15,
				overlay: {
					backgroundColor: "#cdcdcd",
					opacity: ".1"
				},
				events: {
					onPopupClose: function ()
					{
						this.popup.destroy();
					}.bind(this)
				}
			}
		);

		// popup content
		this.popup.setContent(BX.create("div", {
			children: this.getEditNodes()
		}));

		this.popup.show();

		return BX.PreventDefault(e);
	},

	/*
	 * Get tags for show Node in settings form.
	 * @returns {Array}
	 */
	getSettingsForm: function ()
	{
		return [{
			name: this.getName(),
			node: BX.create("div", {
				children: this.getEditNodes(false)
			})
		}];
	},

	/*
	 * Callback on save settings form.
	 * @returns {void}
	 */
	saveSettingsForm: function ()
	{
		this.saveContent();
	},

	getValue: function ()
	{

	},

	setValue: function ()
	{

	},

	getField: function()
	{
		return new BX.Landing.UI.Field.BaseField({
			selector: this.selector,
			title: this.manifest.name
		});
	}
};

})();
/* End */
;
; /* Start:"a:4:{s:4:"full";s:49:"/bitrix/js/landing/node/map.min.js?16322955642953";s:6:"source";s:30:"/bitrix/js/landing/node/map.js";s:3:"min";s:34:"/bitrix/js/landing/node/map.min.js";s:3:"map";s:34:"/bitrix/js/landing/node/map.map.js";}"*/
(function(){"use strict";BX.namespace("BX.Landing");var a=BX.Landing.Utils.debounce;var t=BX.Landing.Utils.data;var e=BX.Landing.Utils.proxy;var n=BX.Landing.Utils.onCustomEvent;var i=BX.Landing.Utils.encodeDataValue;BX.Landing.Block.Node.Map=function(i){BX.Landing.Block.Node.apply(this,arguments);this.type="map";this.attribute="data-map";this.hidden=true;this.map=new BX.Landing.Provider.Map.GoogleMap({mapContainer:this.node,mapOptions:t(this.node,"data-map"),theme:t(this.node,"data-map-theme"),roads:t(this.node,"data-map-roads")||[],landmarks:t(this.node,"data-map-landmarks")||[],labels:t(this.node,"data-map-labels")||[],onMapClick:e(this.onMapClick,this),onChange:a(this.onChange,500,this),fullscreenControl:false,mapTypeControl:false});this.lastValue=this.getValue();n("BX.Landing.Block:updateStyleWithoutDebounce",this.onBlockUpdateStyles.bind(this));n("BX.Landing.Block:Node:updateAttr",this.onBlockUpdateAttrs.bind(this))};BX.Landing.Block.Node.Map.prototype={constructor:BX.Landing.Block.Node.Map,__proto__:BX.Landing.Block.Node.prototype,onBlockUpdateAttrs:function(n){if(n.node===this.node){this.map=new BX.Landing.Provider.Map.GoogleMap({mapContainer:this.node,mapOptions:t(this.node,"data-map"),theme:t(this.node,"data-map-theme"),roads:t(this.node,"data-map-roads")||[],landmarks:t(this.node,"data-map-landmarks")||[],labels:t(this.node,"data-map-labels")||[],onMapClick:e(this.onMapClick,this),onChange:a(this.onChange,500,this),fullscreenControl:false,mapTypeControl:false});this.lastValue=this.getValue()}},onBlockUpdateStyles:function(n){if(n.block.contains(this.node)){this.map=new BX.Landing.Provider.Map.GoogleMap({mapContainer:this.node,mapOptions:t(this.node,"data-map"),theme:t(this.node,"data-map-theme"),roads:t(this.node,"data-map-roads")||[],landmarks:t(this.node,"data-map-landmarks")||[],labels:t(this.node,"data-map-labels")||[],onMapClick:e(this.onMapClick,this),onChange:a(this.onChange,500,this),fullscreenControl:false,mapTypeControl:false});this.lastValue=this.getValue()}},onMapClick:function(a){if(BX.Landing.UI.Panel.StylePanel.getInstance().isShown()){return}this.map.addMarker({latLng:a.latLng,title:"",description:"",showByDefault:false,draggable:true,editable:true});this.map.onMarkerClick(this.map.markers[this.map.markers.length-1])},onChange:function(a){if(this.isChanged()){if(!a){BX.Landing.History.getInstance().push(new BX.Landing.History.Entry({block:this.getBlock().id,selector:this.selector,command:"editEmbed",undo:this.lastValue,redo:this.getValue()}))}this.lastValue=this.getValue();this.onChangeHandler(this)}},isChanged:function(){return JSON.stringify(this.getValue())!==JSON.stringify(this.lastValue)},getValue:function(){return this.map.getValue()},getAttrValue:function(){return i(this.getValue())},setValue:function(a,t,e){this.map.setValue(a,e)},getField:function(){return new BX.Landing.UI.Field.BaseField({selector:this.selector,hidden:true})}}})();
/* End */
;
; /* Start:"a:4:{s:4:"full";s:54:"/bitrix/js/landing/node/component.min.js?1632295564491";s:6:"source";s:36:"/bitrix/js/landing/node/component.js";s:3:"min";s:40:"/bitrix/js/landing/node/component.min.js";s:3:"map";s:40:"/bitrix/js/landing/node/component.map.js";}"*/
(function(){"use strict";BX.namespace("BX.Landing.Block.Node");BX.Landing.Block.Node.Component=function(n){BX.Landing.Block.Node.apply(this,arguments);this.type="component"};BX.Landing.Block.Node.Component.prototype={constructor:BX.Landing.Block.Node.Component,__proto__:BX.Landing.Block.Node.prototype,getField:function(){return new BX.Landing.UI.Field.BaseField({selector:this.selector})},getValue:function(){return""},setValue:function(n,o,e){}}})();
/* End */
;
; /* Start:"a:4:{s:4:"full";s:50:"/bitrix/js/landing/node/icon.min.js?16322955641743";s:6:"source";s:31:"/bitrix/js/landing/node/icon.js";s:3:"min";s:35:"/bitrix/js/landing/node/icon.min.js";s:3:"map";s:35:"/bitrix/js/landing/node/icon.map.js";}"*/
(function(){"use strict";BX.namespace("BX.Landing.Block.Node");var t=BX.Landing.Utils.encodeDataValue;var n=BX.Landing.Utils.decodeDataValue;var e=BX.Landing.Utils.data;var i=BX.Landing.Utils.attr;BX.Landing.Block.Node.Icon=function(t){BX.Landing.Block.Node.Img.apply(this,arguments);this.type="icon"};function s(t){var n=e(t.node,"data-pseudo-url");return!!n?n:""}function a(t){return t.node.className.split(" ")}function o(t,n){return BX.Landing.UI.Panel.IconPanel.getLibraries().then(function(e){e.forEach(function(n){n.categories.forEach(function(n){n.items.forEach(function(n){var e=n.split(" ");e.forEach(function(n){if(n){t.node.classList.remove(n)}})})})});n.classList.forEach(function(n){t.node.classList.add(n)})})}BX.Landing.Block.Node.Icon.prototype={constructor:BX.Landing.Block.Node.Icon,__proto__:BX.Landing.Block.Node.Img.prototype,getField:function(){if(!this.field){var t=this.getValue();t.url=n(t.url);var e=!!this.node.closest("a");this.field=new BX.Landing.UI.Field.Icon({selector:this.selector,title:this.manifest.name,disableLink:e,content:t,dimensions:!!this.manifest.dimensions?this.manifest.dimensions:{}})}else{this.field.content=this.getValue()}return this.field},setValue:function(t,n,e){this.lastValue=this.lastValue||this.getValue();this.preventSave(n);return o(this,t).then(function(){if(t.url){i(this.node,"data-pseudo-url",t.url)}this.onChange();if(!e){BX.Landing.History.getInstance().push(new BX.Landing.History.Entry({block:this.getBlock().id,selector:this.selector,command:"editIcon",undo:this.lastValue,redo:this.getValue()}))}this.lastValue=this.getValue()}.bind(this))},getValue:function(){return{type:"icon",src:"",id:-1,alt:"",classList:a(this),url:t(s(this))}}}})();
/* End */
;
; /* Start:"a:4:{s:4:"full";s:51:"/bitrix/js/landing/node/embed.min.js?16322955641532";s:6:"source";s:32:"/bitrix/js/landing/node/embed.js";s:3:"min";s:36:"/bitrix/js/landing/node/embed.min.js";s:3:"map";s:36:"/bitrix/js/landing/node/embed.map.js";}"*/
(function(){"use strict";BX.namespace("BX.Landing");var e=BX.Landing.Utils.data;BX.Landing.Block.Node.Embed=function(e){BX.Landing.Block.Node.apply(this,arguments);this.type="embed";this.attribute=["data-src","data-source","data-preview"];this.onAttributeChangeHandler=e.onAttributeChange||function(){};this.lastValue=this.getValue()};BX.Landing.Block.Node.Embed.prototype={constructor:BX.Landing.Block.Node.Embed,__proto__:BX.Landing.Block.Node.prototype,onChange:function(){this.lastValue=this.getValue();this.onAttributeChangeHandler(this);this.onChangeHandler(this)},isChanged:function(){return JSON.stringify(this.getValue())!==JSON.stringify(this.lastValue)},getValue:function(){return{src:this.node.src?this.node.src:e(this.node,"data-src"),source:e(this.node,"data-source"),preview:e(this.node,"data-preview")}},setValue:function(t,n,i){if(this.node.src){this.node.src=t.src}else{e(this.node,"data-src",t.src)}e(this.node,"data-source",t.source);if(t.preview){e(this.node,"data-preview",t.preview);this.node.style.backgroundImage='url("'+t.preview+'")'}else{e(this.node,"data-preview",null);this.node.style.backgroundImage=""}if(this.isChanged()){if(!i){BX.Landing.History.getInstance().push(new BX.Landing.History.Entry({block:this.getBlock().id,selector:this.selector,command:"editEmbed",undo:this.lastValue,redo:this.getValue()}))}this.onChange()}},getField:function(){return new BX.Landing.UI.Field.Embed({title:this.manifest.name,selector:this.selector,content:this.getValue()})}}})();
/* End */
;
; /* Start:"a:4:{s:4:"full";s:56:"/bitrix/js/landing/client/unsplash.min.js?16322955551537";s:6:"source";s:37:"/bitrix/js/landing/client/unsplash.js";s:3:"min";s:0:"";s:3:"map";s:0:"";}"*/
(function(){"use strict";BX.namespace("BX.Landing.Client");BX.Landing.Client.Unsplash=function(){if(BX.Landing.Client.Unsplash.instance){return BX.Landing.Client.Unsplash.instance}this.host="https://api.unsplash.com";this.clientId="2f2daddc0c0ea9983e1edd64ef83925faae6d6ab6bf35fe4eb64c2bcfc76fb75";this.perPage=31};BX.Landing.Client.Unsplash.getInstance=function(){return BX.Landing.Client.Unsplash.instance||(BX.Landing.Client.Unsplash.instance=new BX.Landing.Client.Unsplash)};BX.Landing.Client.Unsplash.prototype={makeUrl:function(n,e){e=typeof e==="object"?e:{};e.client_id=this.clientId;return BX.util.add_url_param(this.host+n,e)},download:function(n){var e=BX.util.add_url_param(n.links.download_location,{client_id:this.clientId});return new Promise(function(n){BX.ajax({url:e,method:"GET",headers:[{name:"Authorization",value:"Client-ID "+this.clientId}],onsuccess:function(e){try{var t=JSON.parse(e);n(t.url)}catch(e){n("");console.error(e)}}})}.bind(this))},request:function(n,e){return new Promise(function(t){BX.ajax({url:this.makeUrl(n,e),method:"GET",data:e,headers:[{name:"Authorization",value:"Client-ID "+this.clientId}],onsuccess:function(n){var e;try{e=JSON.parse(n);e="results"in e?e.results:e}catch(n){e=[];console.error(n)}t(e)}})}.bind(this))},popular:function(n){n=BX.type.isNumber(n)?n:1;return this.request("/photos",{order_by:"popular",per_page:this.perPage,page:n})},search:function(n,e){e=BX.type.isNumber(e)?e:1;return this.request("/search/photos",{per_page:this.perPage,page:e,query:encodeURI(n)})}}})();
/* End */
;
; /* Start:"a:4:{s:4:"full";s:61:"/bitrix/js/landing/client/google_images.min.js?16322955551041";s:6:"source";s:42:"/bitrix/js/landing/client/google_images.js";s:3:"min";s:46:"/bitrix/js/landing/client/google_images.min.js";s:3:"map";s:46:"/bitrix/js/landing/client/google_images.map.js";}"*/
(function(){"use strict";BX.namespace("BX.Landing.Client");BX.Landing.Client.Google=function(){this.host="https://www.googleapis.com/customsearch/v1"};BX.Landing.Client.Google.getInstance=function(){return BX.Landing.Client.Google.instance||(BX.Landing.Client.Google.instance=new BX.Landing.Client.Google)};BX.Landing.Client.Google.prototype={makeUrl:function(e){e=typeof e==="object"?e:{};e.key=BX.Landing.Client.Google.key;e.searchType="image";e.rights="cc_attributte";e.imgSize="xxlarge";e.cx="001784514362171586730:5nd_tu8dtbw";e.safe="medium";e.imgType="photo";e.filter="1";e.num="10";return BX.util.add_url_param(this.host,e)},request:function(e){return new Promise(function(t,n){BX.ajax({url:this.makeUrl(e),method:"GET",data:e,onsuccess:function(e){var i,o;try{i=JSON.parse(e);i="items"in i?i.items:[]}catch(e){i=[];console.error(e);n(e);o=true}if(!o){t(i)}},onfailure:n})}.bind(this))},search:function(e,t){t=(BX.type.isNumber(t)?t:1)*10;return this.request({start:t,q:encodeURI(e)})}}})();
/* End */
;
; /* Start:"a:4:{s:4:"full";s:60:"/bitrix/js/landing/client/google_fonts.min.js?16322955551043";s:6:"source";s:41:"/bitrix/js/landing/client/google_fonts.js";s:3:"min";s:0:"";s:3:"map";s:0:"";}"*/
(function(){"use strict";BX.namespace("BX.Landing.Client");var n=BX.Landing.Utils.isEmpty;var t=BX.Landing.Utils.clone;BX.Landing.Client.GoogleFonts=function(){this.key="AIzaSyCqOG-HakgzOQh9prxtkuWLA16lnkNZvsg";this.patch="https://www.googleapis.com/webfonts/v1/webfonts?sort=popularity&key=";this.fontUrl="https://fonts.googleapis.com/css";this.response={}};BX.Landing.Client.GoogleFonts.getInstance=function(){return BX.Landing.Client.GoogleFonts.instance||(BX.Landing.Client.GoogleFonts.instance=new BX.Landing.Client.GoogleFonts)};BX.Landing.Client.GoogleFonts.prototype={getList:function(){if(!n(this.response)){return Promise.resolve(t(this.response))}return this.request().then(function(n){this.response=n;return t(this.response)}.bind(this))},request:function(){return new Promise(function(n){BX.ajax({url:this.patch+this.key,method:"GET",onsuccess:function(t){var e;try{e=JSON.parse(t);e="items"in e?e.items:e}catch(n){e=[];console.error(n)}n(e)}})}.bind(this))},makeUrl:function(n){return BX.util.add_url_param(this.fontUrl,n)}}})();
/* End */
;
; /* Start:"a:4:{s:4:"full";s:71:"/bitrix/js/landing/mediaservice/base_mediaservice.min.js?16322955632526";s:6:"source";s:52:"/bitrix/js/landing/mediaservice/base_mediaservice.js";s:3:"min";s:56:"/bitrix/js/landing/mediaservice/base_mediaservice.min.js";s:3:"map";s:56:"/bitrix/js/landing/mediaservice/base_mediaservice.map.js";}"*/
(function(){"use strict";BX.namespace("BX.Landing.MediaService");var e=BX.Landing.Utils.isArray;BX.Landing.MediaService.BaseMediaService=function(e,t){if(typeof e!=="string"){throw new TypeError("URL not a string")}this.url=encodeURI(e);this.settings=t||{};this.matcher=new RegExp("//");this.embedURL="";this.idPlace=0;this.type="iframe";this.params={}};BX.Landing.MediaService.BaseMediaService.prototype={getMediaId:function(){return this.url.match(this.matcher)[this.idPlace]},getUserSettings:function(){var t={};var i=this.getSettingsForm();if(i){t=i.fields.fetchValues();Object.keys(t).forEach(function(i){if(e(t[i])){t[i]=encodeURIComponent(t[i].join(", "))}})}return t},getSettings:function(){return BX.util.objectMerge(BX.clone(this.params),BX.Landing.Utils.getQueryParams(this.url),BX.clone(this.settings))},getEmbedURL:function(){var e=this.embedURL;var t=this.url.match(this.matcher);if(typeof this.embedURL==="string"){[].slice.call(t).forEach(function(t,i){e=e.replace(new RegExp("\\$"+i,"g"),t)});var i=BX.util.objectMerge(this.getSettings(),this.getUserSettings());e=BX.util.add_url_param(e,i)}if(typeof this.embedURL==="function"){e=this.embedURL(t)}return e},getEmbedPreview:function(){if(typeof this.previewURL==="string"){var e=this.previewURL;var t=this.url.match(this.matcher);[].slice.call(t).forEach(function(t,i){e=e.replace(new RegExp("\\$"+i,"g"),t)});return e}else{return false}},getEmbedElement:function(){return BX.create("iframe",{attrs:{src:this.getEmbedURL(),frameborder:"0",gesture:"media",allow:"encrypted-media",allowfullscreen:true}})},getURLPreview:function(){return BX.Landing.Utils.getURLPreview(this.url)},getURLPreviewElement:function(){return this.getURLPreview().then(function(e){var t=e.DESCRIPTION;var i=e.TITLE;if(i.length+t.length>120){if(i.length>120){t="";i=i.slice(0,120)+"..."}else if(i.length+t.length>120){t=t.slice(0,t.length-(i.length+t.length-120))+"..."}}return BX.create("div",{props:{className:"landing-ui-mediaservice-url-preview"},children:[BX.create("div",{props:{className:"landing-ui-mediaservice-url-preview-image"},attrs:{style:'background-image: url("'+e.IMAGE+'")'}}),BX.create("div",{props:{className:"landing-ui-mediaservice-url-preview-text"},children:[BX.create("div",{props:{className:"landing-ui-mediaservice-url-preview-text-title"},text:i}),BX.create("div",{props:{className:"landing-ui-mediaservice-url-preview-text-description"},text:t})]})]})}.bind(this))},getSettingsForm:function(){return null}}})();
/* End */
;
; /* Start:"a:4:{s:4:"full";s:74:"/bitrix/js/landing/mediaservice/youtube_mediaservice.min.js?16322955642394";s:6:"source";s:55:"/bitrix/js/landing/mediaservice/youtube_mediaservice.js";s:3:"min";s:59:"/bitrix/js/landing/mediaservice/youtube_mediaservice.min.js";s:3:"map";s:59:"/bitrix/js/landing/mediaservice/youtube_mediaservice.map.js";}"*/
(function(){"use strict";BX.namespace("BX.Landing.MediaService");BX.Landing.MediaService.Youtube=function(e,t){BX.Landing.MediaService.BaseMediaService.apply(this,arguments);this.matcher=BX.Landing.Utils.Matchers.youtube;this.embedURL="//www.youtube.com/embed/$4";this.previewURL="//img.youtube.com/vi/$4/sddefault.jpg";this.idPlace=4;this.params={autoplay:0,controls:1,loop:0,mute:0,rel:0,start:0,html5:1}};BX.Landing.MediaService.Youtube.validate=function(e){return BX.Landing.Utils.Matchers.youtube.test(e)};BX.Landing.MediaService.Youtube.prototype={constructor:BX.Landing.MediaService.Youtube,__proto__:BX.Landing.MediaService.BaseMediaService.prototype,getSettingsForm:function(){if(!this.form){this.form=new BX.Landing.UI.Form.BaseForm;var e=this.getSettings();this.form.addField(new BX.Landing.UI.Field.Dropdown({title:BX.Landing.Loc.getMessage("LANDING_CONTENT_URL_MEDIA_AUTOPLAY"),selector:"autoplay",content:parseInt(e.autoplay),items:[{name:BX.Landing.Loc.getMessage("LANDING_CONTENT_URL_MEDIA_YES"),value:1},{name:BX.Landing.Loc.getMessage("LANDING_CONTENT_URL_MEDIA_NO"),value:0}]}));this.form.addField(new BX.Landing.UI.Field.Dropdown({title:BX.Landing.Loc.getMessage("LANDING_CONTENT_URL_MEDIA_CONTROLS"),selector:"controls",content:parseInt(e.controls),items:[{name:BX.Landing.Loc.getMessage("LANDING_CONTENT_URL_MEDIA_YES"),value:1},{name:BX.Landing.Loc.getMessage("LANDING_CONTENT_URL_MEDIA_NO"),value:0}]}));this.form.addField(new BX.Landing.UI.Field.Dropdown({title:BX.Landing.Loc.getMessage("LANDING_CONTENT_URL_MEDIA_LOOP"),selector:"loop",content:parseInt(e.loop),items:[{name:BX.Landing.Loc.getMessage("LANDING_CONTENT_URL_MEDIA_YES"),value:1},{name:BX.Landing.Loc.getMessage("LANDING_CONTENT_URL_MEDIA_NO"),value:0}]}));this.form.addField(new BX.Landing.UI.Field.Dropdown({title:BX.Landing.Loc.getMessage("LANDING_CONTENT_URL_MEDIA_SOUND"),selector:"mute",content:parseInt(e.mute),items:[{name:BX.Landing.Loc.getMessage("LANDING_CONTENT_URL_MEDIA_YES"),value:0},{name:BX.Landing.Loc.getMessage("LANDING_CONTENT_URL_MEDIA_NO"),value:1}]}));var t=new BX.Landing.UI.Field.Unit({title:BX.Landing.Loc.getMessage("LANDING_CONTENT_URL_MEDIA_START"),selector:"start",unit:BX.Landing.Loc.getMessage("LANDING_CONTENT_MEDIA_SECONDS_SHORT"),content:parseInt(e.start),placeholder:"40"});this.form.addField(t)}return this.form}}})();
/* End */
;
; /* Start:"a:4:{s:4:"full";s:72:"/bitrix/js/landing/mediaservice/vimeo_mediaservice.min.js?16322955632632";s:6:"source";s:53:"/bitrix/js/landing/mediaservice/vimeo_mediaservice.js";s:3:"min";s:57:"/bitrix/js/landing/mediaservice/vimeo_mediaservice.min.js";s:3:"map";s:57:"/bitrix/js/landing/mediaservice/vimeo_mediaservice.map.js";}"*/
(function(){"use strict";BX.namespace("BX.Landing.MediaService");BX.Landing.MediaService.Vimeo=function(e,a){BX.Landing.MediaService.BaseMediaService.apply(this,arguments);this.matcher=BX.Landing.Utils.Matchers.vimeo;this.embedURL="//player.vimeo.com/video/$2";this.idPlace=3;this.params={autoplay:1,loop:0,hd:1,muted:0,background:0,show_title:1,show_byline:1,show_portrait:0,fullscreen:1,api:1}};BX.Landing.MediaService.Vimeo.validate=function(e){return BX.Landing.Utils.Matchers.vimeo.test(e)};BX.Landing.MediaService.Vimeo.prototype={constructor:BX.Landing.MediaService.Vimeo,__proto__:BX.Landing.MediaService.BaseMediaService.prototype,getSettingsForm:function(){if(!this.form){this.form=new BX.Landing.UI.Form.BaseForm;var e=this.getSettings();this.form.addField(new BX.Landing.UI.Field.Dropdown({title:BX.Landing.Loc.getMessage("LANDING_CONTENT_URL_MEDIA_AUTOPLAY"),selector:"autoplay",content:parseInt(e.autoplay),items:[{name:BX.Landing.Loc.getMessage("LANDING_CONTENT_URL_MEDIA_YES"),value:1},{name:BX.Landing.Loc.getMessage("LANDING_CONTENT_URL_MEDIA_NO"),value:0}]}));this.form.addField(new BX.Landing.UI.Field.Dropdown({title:BX.Landing.Loc.getMessage("LANDING_CONTENT_URL_MEDIA_CONTROLS"),selector:"background",content:parseInt(e.background),items:[{name:BX.Landing.Loc.getMessage("LANDING_CONTENT_URL_MEDIA_YES"),value:0},{name:BX.Landing.Loc.getMessage("LANDING_CONTENT_URL_MEDIA_NO"),value:1}]}));this.form.addField(new BX.Landing.UI.Field.Dropdown({title:BX.Landing.Loc.getMessage("LANDING_CONTENT_URL_MEDIA_QUALITY"),selector:"quality",content:e.quality,items:[{name:BX.Landing.Loc.getMessage("LANDING_CONTENT_URL_MEDIA_QUALITY_AUTO"),value:""},{name:"4k ("+BX.Landing.Loc.getMessage("LANDING_CONTENT_URL_MEDIA_QUALITY_HIGH")+")",value:"4k"},{name:"2k",value:"2k"},{name:"1080p",value:"1080p"},{name:"780p",value:"780p"},{name:"360p ("+BX.Landing.Loc.getMessage("LANDING_CONTENT_URL_MEDIA_QUALITY_LOW")+")",value:"360p"}]}));this.form.addField(new BX.Landing.UI.Field.Dropdown({title:BX.Landing.Loc.getMessage("LANDING_CONTENT_URL_MEDIA_LOOP"),selector:"loop",content:e.loop,items:[{name:BX.Landing.Loc.getMessage("LANDING_CONTENT_URL_MEDIA_YES"),value:1},{name:BX.Landing.Loc.getMessage("LANDING_CONTENT_URL_MEDIA_NO"),value:0}]}));this.form.addField(new BX.Landing.UI.Field.Dropdown({title:BX.Landing.Loc.getMessage("LANDING_CONTENT_URL_MEDIA_SOUND"),selector:"muted",content:e.muted,items:[{name:BX.Landing.Loc.getMessage("LANDING_CONTENT_URL_MEDIA_YES"),value:0},{name:BX.Landing.Loc.getMessage("LANDING_CONTENT_URL_MEDIA_NO"),value:1}]}))}return this.form}}})();
/* End */
;
; /* Start:"a:4:{s:4:"full";s:71:"/bitrix/js/landing/mediaservice/vine_mediaservice.min.js?16322955631047";s:6:"source";s:52:"/bitrix/js/landing/mediaservice/vine_mediaservice.js";s:3:"min";s:56:"/bitrix/js/landing/mediaservice/vine_mediaservice.min.js";s:3:"map";s:56:"/bitrix/js/landing/mediaservice/vine_mediaservice.map.js";}"*/
(function(){"use strict";BX.namespace("BX.Landing.MediaService");BX.Landing.MediaService.Vine=function(e,i){BX.Landing.MediaService.BaseMediaService.apply(this,arguments);this.matcher=BX.Landing.Utils.Matchers.vine;this.embedURL="//vine.co/v/$1/embed/simple";this.idPlace=1;this.params={autoplay:1}};BX.Landing.MediaService.Vine.validate=function(e){return BX.Landing.Utils.Matchers.vine.test(e)};BX.Landing.MediaService.Vine.prototype={constructor:BX.Landing.MediaService.Vine,__proto__:BX.Landing.MediaService.BaseMediaService.prototype,getSettingsForm:function(){if(!this.form){this.form=new BX.Landing.UI.Form.BaseForm;var e=this.getSettings();this.form.addField(new BX.Landing.UI.Field.Dropdown({title:BX.Landing.Loc.getMessage("LANDING_CONTENT_URL_MEDIA_AUTOPLAY"),selector:"autoplay",content:parseInt(e.autoplay),items:[{name:BX.Landing.Loc.getMessage("LANDING_CONTENT_URL_MEDIA_YES"),value:1},{name:BX.Landing.Loc.getMessage("LANDING_CONTENT_URL_MEDIA_NO"),value:0}]}))}return this.form}}})();
/* End */
;
; /* Start:"a:4:{s:4:"full";s:76:"/bitrix/js/landing/mediaservice/instagram_mediaservice.min.js?16322955631215";s:6:"source";s:57:"/bitrix/js/landing/mediaservice/instagram_mediaservice.js";s:3:"min";s:61:"/bitrix/js/landing/mediaservice/instagram_mediaservice.min.js";s:3:"map";s:61:"/bitrix/js/landing/mediaservice/instagram_mediaservice.map.js";}"*/
(function(){"use strict";BX.namespace("BX.Landing.MediaService");BX.Landing.MediaService.Instagram=function(e,i){BX.Landing.MediaService.BaseMediaService.apply(this,arguments);this.matcher=BX.Landing.Utils.Matchers.instagram;this.embedURL="//instagram.com/p/$2/embed/captioned";this.idPlace=1;this.params={}};BX.Landing.MediaService.Instagram.validate=function(e){return BX.Landing.Utils.Matchers.instagram.test(e)};BX.Landing.MediaService.Instagram.prototype={constructor:BX.Landing.MediaService.Instagram,__proto__:BX.Landing.MediaService.BaseMediaService.prototype,getSettingsForm:function(){if(!this.form){this.form=new BX.Landing.UI.Form.BaseForm;this.form.addField(new BX.Landing.UI.Field.Dropdown({title:BX.Landing.Loc.getMessage("LANDING_CONTENT_URL_MEDIA_CAPTIONED"),selector:"captioned",items:[{name:BX.Landing.Loc.getMessage("LANDING_CONTENT_URL_MEDIA_YES"),value:1},{name:BX.Landing.Loc.getMessage("LANDING_CONTENT_URL_MEDIA_NO"),value:0}],onChange:function(e){if(e===1){if(this.embedURL.indexOf("captioned")===-1){this.embedURL=this.embedURL+"captioned"}}else{this.embedURL=this.embedURL.replace("captioned","")}}.bind(this)}))}return this.form}}})();
/* End */
;
; /* Start:"a:4:{s:4:"full";s:85:"/bitrix/js/landing/mediaservice/google_maps_search_mediaservice.min.js?16322955631169";s:6:"source";s:66:"/bitrix/js/landing/mediaservice/google_maps_search_mediaservice.js";s:3:"min";s:0:"";s:3:"map";s:0:"";}"*/
(function(){"use strict";BX.namespace("BX.Landing.MediaService");BX.Landing.MediaService.GoogleMapsSearch=function(e,i){BX.Landing.MediaService.BaseMediaService.apply(this,arguments);this.matcher=BX.Landing.Utils.Matchers.googleMapsSearch;this.embedURL=function(e){var i="";if(e[5]){i=e[5].replace("query=","q=").replace("api=1","")}else if(e[9]){i=e[9]}return"//maps.google."+e[2]+"/maps?q="+i+"&output=embed"}};BX.Landing.MediaService.GoogleMapsSearch.validate=function(e){return BX.Landing.Utils.Matchers.googleMapsSearch.test(e)};BX.Landing.MediaService.GoogleMapsSearch.prototype={constructor:BX.Landing.MediaService.GoogleMapsSearch,__proto__:BX.Landing.MediaService.BaseMediaService.prototype,getURLPreviewElement:function(){return new Promise(function(e){var i='<span class="fa fa-map"></span>&nbsp;Google Maps';setTimeout(function(){e(BX.create("div",{props:{className:"landing-ui-mediaservice-url-preview landing-ui-mediaservice-url-preview-map"},children:[BX.create("div",{props:{className:"landing-ui-mediaservice-url-preview-text"},children:[BX.create("div",{props:{className:"landing-ui-mediaservice-url-preview-text-title"},html:i})]})]}))},400)})}}})();
/* End */
;
; /* Start:"a:4:{s:4:"full";s:83:"/bitrix/js/landing/mediaservice/google_maps_place_mediaservice.min.js?1632295563828";s:6:"source";s:65:"/bitrix/js/landing/mediaservice/google_maps_place_mediaservice.js";s:3:"min";s:0:"";s:3:"map";s:0:"";}"*/
(function(){"use strict";BX.namespace("BX.Landing.MediaService");BX.Landing.MediaService.GoogleMapsPlace=function(e,a){BX.Landing.MediaService.GoogleMapsSearch.apply(this,arguments);this.matcher=BX.Landing.Utils.Matchers.googleMapsPlace;this.embedURL=function(e){var a="//maps.google."+e[2]+"/?ll="+(e[9]?e[9]+"&z="+Math.floor(e[10])+(e[12]?e[12].replace(/^\//,"&"):""):e[12])+"&output="+(e[12]&&e[12].indexOf("layer=c")>0?"svembed":"embed");if(e[8]){a="//maps.google."+e[2]+"/maps?q="+decodeURI(decodeURI(e[8]))+"&output=embed"}return a}};BX.Landing.MediaService.GoogleMapsPlace.validate=function(e){return BX.Landing.Utils.Matchers.googleMapsPlace.test(e)};BX.Landing.MediaService.GoogleMapsPlace.prototype={constructor:BX.Landing.MediaService.GoogleMapsPlace,__proto__:BX.Landing.MediaService.GoogleMapsSearch.prototype}})();
/* End */
;
; /* Start:"a:4:{s:4:"full";s:82:"/bitrix/js/landing/mediaservice/facebook_page_plugin_service.min.js?16322955632767";s:6:"source";s:63:"/bitrix/js/landing/mediaservice/facebook_page_plugin_service.js";s:3:"min";s:67:"/bitrix/js/landing/mediaservice/facebook_page_plugin_service.min.js";s:3:"map";s:67:"/bitrix/js/landing/mediaservice/facebook_page_plugin_service.map.js";}"*/
(function(){"use strict";BX.namespace("BX.Landing.MediaService");var e=BX.Landing.Utils.isString;BX.Landing.MediaService.FacebookPages=function(e,a){BX.Landing.MediaService.BaseMediaService.apply(this,arguments);this.matcher=BX.Landing.Utils.Matchers.facebookPages;this.pageUrl=encodeURIComponent(e.replace(/\/$/,""));this.embedURL="https://www.facebook.com/plugins/page.php?href="+this.pageUrl;this.params={tabs:"timeline",width:340,small_header:false,adapt_container_width:true,hide_cover:false,show_facepile:true}};BX.Landing.MediaService.FacebookPages.validate=function(e){if(e.endsWith&&(e.endsWith("facebook.com/")||e.endsWith("facebook.com"))){return false}return BX.Landing.Utils.Matchers.facebookPages.test(e)};BX.Landing.MediaService.FacebookPages.prototype={constructor:BX.Landing.MediaService.FacebookPages,__proto__:BX.Landing.MediaService.BaseMediaService.prototype,getSettingsForm:function(){if(!this.form){this.form=new BX.Landing.UI.Form.BaseForm;var a=this.getSettings();this.form.addField(new BX.Landing.UI.Field.Dropdown({title:BX.Landing.Loc.getMessage("LANDING_CONTENT_URL_MEDIA_FB_PAGE_SMALL_HEADER"),selector:"small_header",content:a.small_header==="true"||a.small_header===true,items:[{name:BX.Landing.Loc.getMessage("LANDING_CONTENT_URL_MEDIA_YES"),value:true},{name:BX.Landing.Loc.getMessage("LANDING_CONTENT_URL_MEDIA_NO"),value:false}]}));this.form.addField(new BX.Landing.UI.Field.Dropdown({title:BX.Landing.Loc.getMessage("LANDING_CONTENT_URL_MEDIA_FB_PAGE_COVER"),selector:"hide_cover",content:a.hide_cover==="true"||a.hide_cover===true,items:[{name:BX.Landing.Loc.getMessage("LANDING_CONTENT_URL_MEDIA_YES"),value:false},{name:BX.Landing.Loc.getMessage("LANDING_CONTENT_URL_MEDIA_NO"),value:true}]}));this.form.addField(new BX.Landing.UI.Field.Dropdown({title:BX.Landing.Loc.getMessage("LANDING_CONTENT_URL_MEDIA_FB_PAGE_FACES"),selector:"show_facepile",content:a.show_facepile==="true"||a.show_facepile===true,items:[{name:BX.Landing.Loc.getMessage("LANDING_CONTENT_URL_MEDIA_YES"),value:true},{name:BX.Landing.Loc.getMessage("LANDING_CONTENT_URL_MEDIA_NO"),value:false}]}));var i=[{name:BX.Landing.Loc.getMessage("LANDING_CONTENT_URL_MEDIA_FB_PAGE_TABS_TIMELINE"),value:"timeline"},{name:BX.Landing.Loc.getMessage("LANDING_CONTENT_URL_MEDIA_FB_PAGE_TABS_MESSAGES"),value:"messages"},{name:BX.Landing.Loc.getMessage("LANDING_CONTENT_URL_MEDIA_FB_PAGE_TABS_EVENTS"),value:"events"}];var t=e(a.tabs)?a.tabs.split(", "):[];if(t.length){i.forEach(function(e){e.selected=t.includes(e.value)})}this.form.addField(new BX.Landing.UI.Field.MultiSelect({title:BX.Landing.Loc.getMessage("LANDING_CONTENT_URL_MEDIA_FB_PAGE_TABS"),selector:"tabs",value:t,items:i}))}return this.form}}})();
/* End */
;
; /* Start:"a:4:{s:4:"full";s:81:"/bitrix/js/landing/mediaservice/facebook_post_embed_service.min.js?16322955631228";s:6:"source";s:62:"/bitrix/js/landing/mediaservice/facebook_post_embed_service.js";s:3:"min";s:66:"/bitrix/js/landing/mediaservice/facebook_post_embed_service.min.js";s:3:"map";s:66:"/bitrix/js/landing/mediaservice/facebook_post_embed_service.map.js";}"*/
(function(){"use strict";BX.namespace("BX.Landing.MediaService");BX.Landing.MediaService.FacebookPosts=function(e,t){BX.Landing.MediaService.BaseMediaService.apply(this,arguments);this.matcher=BX.Landing.Utils.Matchers.facebookPosts;this.pageUrl=encodeURIComponent(e.replace(/\/$/,""));this.embedURL="https://www.facebook.com/plugins/post.php?href="+this.pageUrl;this.params={width:500,show_text:true}};BX.Landing.MediaService.FacebookPosts.validate=function(e){return BX.Landing.Utils.Matchers.facebookPosts.test(e)};BX.Landing.MediaService.FacebookPosts.prototype={constructor:BX.Landing.MediaService.FacebookPosts,__proto__:BX.Landing.MediaService.BaseMediaService.prototype,getSettingsForm:function(){if(!this.form){this.form=new BX.Landing.UI.Form.BaseForm;var e=this.getSettings();this.form.addField(new BX.Landing.UI.Field.Dropdown({title:BX.Landing.Loc.getMessage("LANDING_CONTENT_URL_MEDIA_FB_POST_FULL"),selector:"show_text",content:e.show_text==="true"||e.show_text===true,items:[{name:BX.Landing.Loc.getMessage("LANDING_CONTENT_URL_MEDIA_YES"),value:true},{name:BX.Landing.Loc.getMessage("LANDING_CONTENT_URL_MEDIA_NO"),value:false}]}))}return this.form}}})();
/* End */
;
; /* Start:"a:4:{s:4:"full";s:82:"/bitrix/js/landing/mediaservice/facebook_video_embed_service.min.js?16322955631246";s:6:"source";s:63:"/bitrix/js/landing/mediaservice/facebook_video_embed_service.js";s:3:"min";s:67:"/bitrix/js/landing/mediaservice/facebook_video_embed_service.min.js";s:3:"map";s:67:"/bitrix/js/landing/mediaservice/facebook_video_embed_service.map.js";}"*/
(function(){"use strict";BX.namespace("BX.Landing.MediaService");BX.Landing.MediaService.FacebookVideos=function(e,i){BX.Landing.MediaService.BaseMediaService.apply(this,arguments);this.matcher=BX.Landing.Utils.Matchers.facebookVideos;this.pageUrl=encodeURIComponent(e.replace(/\/$/,""));this.embedURL="https://www.facebook.com/plugins/video.php?href="+this.pageUrl;this.params={width:500,show_text:0}};BX.Landing.MediaService.FacebookVideos.validate=function(e){return BX.Landing.Utils.Matchers.facebookVideos.test(e)};BX.Landing.MediaService.FacebookVideos.prototype={constructor:BX.Landing.MediaService.FacebookVideos,__proto__:BX.Landing.MediaService.BaseMediaService.prototype,getSettingsForm:function(){if(!this.form){this.form=new BX.Landing.UI.Form.BaseForm;var e=this.getSettings();this.form.addField(new BX.Landing.UI.Field.Dropdown({title:BX.Landing.Loc.getMessage("LANDING_CONTENT_URL_MEDIA_FB_POST_FULL"),selector:"show_text",content:!isNaN(parseInt(e.show_text))?parseInt(e.show_text):0,items:[{name:BX.Landing.Loc.getMessage("LANDING_CONTENT_URL_MEDIA_YES"),value:true},{name:BX.Landing.Loc.getMessage("LANDING_CONTENT_URL_MEDIA_NO"),value:false}]}))}return this.form}}})();
/* End */
;
; /* Start:"a:4:{s:4:"full";s:68:"/bitrix/js/landing/mediaservice/service_factory.min.js?1632295563693";s:6:"source";s:50:"/bitrix/js/landing/mediaservice/service_factory.js";s:3:"min";s:54:"/bitrix/js/landing/mediaservice/service_factory.min.js";s:3:"map";s:54:"/bitrix/js/landing/mediaservice/service_factory.map.js";}"*/
(function(){"use strict";BX.namespace("BX.Landing.MediaService");BX.Landing.MediaService.Factory=function(){};BX.Landing.MediaService.Factory.prototype={services:{youtube:"BX.Landing.MediaService.Youtube",vimeo:"BX.Landing.MediaService.Vimeo",vine:"BX.Landing.MediaService.Vine",instagram:"BX.Landing.MediaService.Instagram",facebookVideos:"BX.Landing.MediaService.FacebookVideos",facebookPosts:"BX.Landing.MediaService.FacebookPosts"},create:function(e,i){var a=null;for(var n in this.services){if(this.services.hasOwnProperty(n)&&BX.getClass(this.services[n])["validate"](e)){var r=BX.getClass(this.services[n]);a=new r(e,i);break}}return a}}})();
/* End */
;
; /* Start:"a:4:{s:4:"full";s:54:"/bitrix/js/landing/error_manager.min.js?16322955582325";s:6:"source";s:35:"/bitrix/js/landing/error_manager.js";s:3:"min";s:39:"/bitrix/js/landing/error_manager.min.js";s:3:"map";s:39:"/bitrix/js/landing/error_manager.map.js";}"*/
(function(){"use strict";BX.namespace("BX.Landing");var n=BX.Landing.Utils.clone;var e={"Landing::addBlock":BX.Landing.Loc.getMessage("LANDING_ACTION_ERROR__ADD_BLOCK"),"Landing::deleteBlock":BX.Landing.Loc.getMessage("LANDING_ACTION_ERROR__DELETE_BLOCK"),"Landing::upBlock":BX.Landing.Loc.getMessage("LANDING_ACTION_ERROR__SAVE_CHANGES"),"Landing::downBlock":BX.Landing.Loc.getMessage("LANDING_ACTION_ERROR__SAVE_CHANGES"),"Landing::showBlock":BX.Landing.Loc.getMessage("LANDING_ACTION_ERROR__SAVE_CHANGES"),"Landing::hideBlock":BX.Landing.Loc.getMessage("LANDING_ACTION_ERROR__SAVE_CHANGES"),"Block::cloneCard":BX.Landing.Loc.getMessage("LANDING_ACTION_ERROR__CLONE_CARD"),"Block::removeCard":BX.Landing.Loc.getMessage("LANDING_ACTION_ERROR__DELETE_CARD"),"Block::updateStyles":BX.Landing.Loc.getMessage("LANDING_ACTION_ERROR__SAVE_CHANGES"),"Block::updateNodes":BX.Landing.Loc.getMessage("LANDING_ACTION_ERROR__SAVE_CHANGES"),"Site::getList":BX.Landing.Loc.getMessage("LANDING_ACTION_ERROR__SITE_GET_LIST"),"Block::getList":BX.Landing.Loc.getMessage("LANDING_ACTION_ERROR__BLOCK_GET_LIST"),"Utils::uploadFile":BX.Landing.Loc.getMessage("LANDING_ACTION_ERROR__UPLOAD_FILE"),UNKNOWN_ACTION:BX.Landing.Loc.getMessage("LANDING_ACTION_ERROR__UNKNOWN_ACTION"),BAD_IMAGE:BX.Landing.Loc.getMessage("LANDING_ACTION_ERROR__BAD_IMAGE")};BX.Landing.ErrorManager=function(){this.stack=[];this.showTimeout=null};BX.Landing.ErrorManager.getInstance=function(){var n=BX.Landing.PageObject.getRootWindow();if(!n.BX.Landing.ErrorManager.instance){n.BX.Landing.ErrorManager.instance=new BX.Landing.ErrorManager}return n.BX.Landing.ErrorManager.instance};BX.Landing.ErrorManager.prototype={add:function(n){if(n.type==="error"){n.action=n.action in e?n.action:"UNKNOWN_ACTION";this.stack.push({action:n.action,description:e[n.action],hideSupportLink:n.hideSupportLink});return this.show()}},show:function(){clearTimeout(this.showTimeout);this.showTimeout=setTimeout(function(){var e=n(this.stack);this.stack=[];var a=e.map(this.createErrorMessage,this).join("");var i=e.some(function(n){return n.hideSupportLink===true});BX.Landing.UI.Panel.Alert.getInstance().show("error",a,i)}.bind(this),100)},createErrorMessage:function(n){return'<div class="landing-ui-error-item">'+n.description+"</div>"}}})();
/* End */
;
; /* Start:"a:4:{s:4:"full";s:78:"/bitrix/js/landing/external/webfontloader/webfontloader.min.js?163229555912384";s:6:"source";s:58:"/bitrix/js/landing/external/webfontloader/webfontloader.js";s:3:"min";s:0:"";s:3:"map";s:0:"";}"*/
(function(){function t(t,n,i){return t.call.apply(t.bind,arguments)}function n(t,n,i){if(!t)throw Error();if(2<arguments.length){var e=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(i,e);return t.apply(n,i)}}return function(){return t.apply(n,arguments)}}function i(e,o,a){i=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?t:n;return i.apply(null,arguments)}var e=Date.now||function(){return+new Date};function o(t,n){this.a=t;this.m=n||t;this.c=this.m.document}var a=!!window.FontFace;function s(t,n,i,e){n=t.c.createElement(n);if(i)for(var o in i)i.hasOwnProperty(o)&&("style"==o?n.style.cssText=i[o]:n.setAttribute(o,i[o]));e&&n.appendChild(t.c.createTextNode(e));return n}function r(t,n,i){t=t.c.getElementsByTagName(n)[0];t||(t=document.documentElement);t.insertBefore(i,t.lastChild)}function f(t){t.parentNode&&t.parentNode.removeChild(t)}function c(t,n,i){n=n||[];i=i||[];for(var e=t.className.split(/\s+/),o=0;o<n.length;o+=1){for(var a=!1,s=0;s<e.length;s+=1)if(n[o]===e[s]){a=!0;break}a||e.push(n[o])}n=[];for(o=0;o<e.length;o+=1){a=!1;for(s=0;s<i.length;s+=1)if(e[o]===i[s]){a=!0;break}a||n.push(e[o])}t.className=n.join(" ").replace(/\s+/g," ").replace(/^\s+|\s+$/,"")}function h(t,n){for(var i=t.className.split(/\s+/),e=0,o=i.length;e<o;e++)if(i[e]==n)return!0;return!1}function l(t){if("string"===typeof t.f)return t.f;var n=t.m.location.protocol;"about:"==n&&(n=t.a.location.protocol);return"https:"==n?"https:":"http:"}function u(t){return t.m.location.hostname||t.a.location.hostname}function p(t,n,i){function e(){h&&o&&f&&(h(c),h=null)}n=s(t,"link",{rel:"stylesheet",href:n,media:"all"});var o=!1,f=!0,c=null,h=i||null;a?(n.onload=function(){o=!0;e()},n.onerror=function(){o=!0;c=Error("Stylesheet failed to load");e()}):setTimeout(function(){o=!0;e()},0);r(t,"head",n)}function d(t,n,i,e){var o=t.c.getElementsByTagName("head")[0];if(o){var a=s(t,"script",{src:n}),r=!1;a.onload=a.onreadystatechange=function(){r||this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(r=!0,i&&i(null),a.onload=a.onreadystatechange=null,"HEAD"==a.parentNode.tagName&&o.removeChild(a))};o.appendChild(a);setTimeout(function(){r||(r=!0,i&&i(Error("Script load timeout")))},e||5e3);return a}return null}function g(){this.a=0;this.c=null}function v(t){t.a++;return function(){t.a--;w(t)}}function m(t,n){t.c=n;w(t)}function w(t){0==t.a&&t.c&&(t.c(),t.c=null)}function y(t){this.a=t||"-"}y.prototype.c=function(t){for(var n=[],i=0;i<arguments.length;i++)n.push(arguments[i].replace(/[\W_]+/g,"").toLowerCase());return n.join(this.a)};function b(t,n){this.c=t;this.f=4;this.a="n";var i=(n||"n4").match(/^([nio])([1-9])$/i);i&&(this.a=i[1],this.f=parseInt(i[2],10))}function j(t){return k(t)+" "+(t.f+"00")+" 300px "+x(t.c)}function x(t){var n=[];t=t.split(/,\s*/);for(var i=0;i<t.length;i++){var e=t[i].replace(/['"]/g,"");-1!=e.indexOf(" ")||/^\d/.test(e)?n.push("'"+e+"'"):n.push(e)}return n.join(",")}function _(t){return t.a+t.f}function k(t){var n="normal";"o"===t.a?n="oblique":"i"===t.a&&(n="italic");return n}function T(t){var n=4,i="n",e=null;t&&((e=t.match(/(normal|oblique|italic)/i))&&e[1]&&(i=e[1].substr(0,1).toLowerCase()),(e=t.match(/([1-9]00|normal|bold)/i))&&e[1]&&(/bold/i.test(e[1])?n=7:/[1-9]00/.test(e[1])&&(n=parseInt(e[1].substr(0,1),10))));return i+n}function S(t,n){this.c=t;this.f=t.m.document.documentElement;this.h=n;this.a=new y("-");this.j=!1!==n.events;this.g=!1!==n.classes}function C(t){t.g&&c(t.f,[t.a.c("wf","loading")]);A(t,"loading")}function N(t){if(t.g){var n=h(t.f,t.a.c("wf","active")),i=[],e=[t.a.c("wf","loading")];n||i.push(t.a.c("wf","inactive"));c(t.f,i,e)}A(t,"inactive")}function A(t,n,i){if(t.j&&t.h[n])if(i)t.h[n](i.c,_(i));else t.h[n]()}function E(){this.c={}}function W(t,n,i){var e=[],o;for(o in n)if(n.hasOwnProperty(o)){var a=t.c[o];a&&e.push(a(n[o],i))}return e}function F(t,n){this.c=t;this.f=n;this.a=s(this.c,"span",{"aria-hidden":"true"},this.f)}function I(t){r(t.c,"body",t.a)}function P(t){return"display:block;position:absolute;top:-9999px;left:-9999px;font-size:300px;width:auto;height:auto;line-height:normal;margin:0;padding:0;font-variant:normal;white-space:nowrap;font-family:"+x(t.c)+";"+("font-style:"+k(t)+";font-weight:"+(t.f+"00")+";")}function B(t,n,i,e,o,a){this.g=t;this.j=n;this.a=e;this.c=i;this.f=o||3e3;this.h=a||void 0}B.prototype.start=function(){var t=this.c.m.document,n=this,i=e(),o=new Promise(function(o,a){function s(){e()-i>=n.f?a():t.fonts.load(j(n.a),n.h).then(function(t){1<=t.length?o():setTimeout(s,25)},function(){a()})}s()}),a=new Promise(function(t,i){setTimeout(i,n.f)});Promise.race([a,o]).then(function(){n.g(n.a)},function(){n.j(n.a)})};function O(t,n,i,e,o,a,s){this.v=t;this.B=n;this.c=i;this.a=e;this.s=s||"BESbswy";this.f={};this.w=o||3e3;this.u=a||null;this.o=this.j=this.h=this.g=null;this.g=new F(this.c,this.s);this.h=new F(this.c,this.s);this.j=new F(this.c,this.s);this.o=new F(this.c,this.s);t=new b(this.a.c+",serif",_(this.a));t=P(t);this.g.a.style.cssText=t;t=new b(this.a.c+",sans-serif",_(this.a));t=P(t);this.h.a.style.cssText=t;t=new b("serif",_(this.a));t=P(t);this.j.a.style.cssText=t;t=new b("sans-serif",_(this.a));t=P(t);this.o.a.style.cssText=t;I(this.g);I(this.h);I(this.j);I(this.o)}var L={D:"serif",C:"sans-serif"},D=null;function $(){if(null===D){var t=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent);D=!!t&&(536>parseInt(t[1],10)||536===parseInt(t[1],10)&&11>=parseInt(t[2],10))}return D}O.prototype.start=function(){this.f.serif=this.j.a.offsetWidth;this.f["sans-serif"]=this.o.a.offsetWidth;this.A=e();H(this)};function q(t,n,i){for(var e in L)if(L.hasOwnProperty(e)&&n===t.f[L[e]]&&i===t.f[L[e]])return!0;return!1}function H(t){var n=t.g.a.offsetWidth,i=t.h.a.offsetWidth,o;(o=n===t.f.serif&&i===t.f["sans-serif"])||(o=$()&&q(t,n,i));o?e()-t.A>=t.w?$()&&q(t,n,i)&&(null===t.u||t.u.hasOwnProperty(t.a.c))?z(t,t.v):z(t,t.B):M(t):z(t,t.v)}function M(t){setTimeout(i(function(){H(this)},t),50)}function z(t,n){setTimeout(i(function(){f(this.g.a);f(this.h.a);f(this.j.a);f(this.o.a);n(this.a)},t),0)}function G(t,n,i){this.c=t;this.a=n;this.f=0;this.o=this.j=!1;this.s=i}var K=null;G.prototype.g=function(t){var n=this.a;n.g&&c(n.f,[n.a.c("wf",t.c,_(t).toString(),"active")],[n.a.c("wf",t.c,_(t).toString(),"loading"),n.a.c("wf",t.c,_(t).toString(),"inactive")]);A(n,"fontactive",t);this.o=!0;R(this)};G.prototype.h=function(t){var n=this.a;if(n.g){var i=h(n.f,n.a.c("wf",t.c,_(t).toString(),"active")),e=[],o=[n.a.c("wf",t.c,_(t).toString(),"loading")];i||e.push(n.a.c("wf",t.c,_(t).toString(),"inactive"));c(n.f,e,o)}A(n,"fontinactive",t);R(this)};function R(t){0==--t.f&&t.j&&(t.o?(t=t.a,t.g&&c(t.f,[t.a.c("wf","active")],[t.a.c("wf","loading"),t.a.c("wf","inactive")]),A(t,"active")):N(t.a))}function U(t){this.j=t;this.a=new E;this.h=0;this.f=this.g=!0}U.prototype.load=function(t){this.c=new o(this.j,t.context||this.j);this.g=!1!==t.events;this.f=!1!==t.classes;Q(this,new S(this.c,t),t)};function J(t,n,e,o,a){var s=0==--t.h;(t.f||t.g)&&setTimeout(function(){var t=a||null,r=o||null||{};if(0===e.length&&s)N(n.a);else{n.f+=e.length;s&&(n.j=s);var f,h=[];for(f=0;f<e.length;f++){var l=e[f],u=r[l.c],p=n.a,d=l;p.g&&c(p.f,[p.a.c("wf",d.c,_(d).toString(),"loading")]);A(p,"fontloading",d);p=null;null===K&&(K=window.FontFace?(d=/Gecko.*Firefox\/(\d+)/.exec(window.navigator.userAgent))?42<parseInt(d[1],10):!0:!1);K?p=new B(i(n.g,n),i(n.h,n),n.c,l,n.s,u):p=new O(i(n.g,n),i(n.h,n),n.c,l,n.s,t,u);h.push(p)}for(f=0;f<h.length;f++)h[f].start()}},0)}function Q(t,n,i){var e=[],o=i.timeout;C(n);var e=W(t.a,i,t.c),a=new G(t.c,n,o);t.h=e.length;n=0;for(i=e.length;n<i;n++)e[n].load(function(n,i,e){J(t,a,n,i,e)})}function V(t,n){this.c=t;this.a=n}function X(t,n,i){var e=l(t.c);t=(t.a.api||"fast.fonts.net/jsapi").replace(/^.*http(s?):(\/\/)?/,"");return e+"//"+t+"/"+n+".js"+(i?"?v="+i:"")}V.prototype.load=function(t){function n(){if(a["__mti_fntLst"+e]){var i=a["__mti_fntLst"+e](),o=[],s;if(i)for(var r=0;r<i.length;r++){var f=i[r].fontfamily;void 0!=i[r].fontStyle&&void 0!=i[r].fontWeight?(s=i[r].fontStyle+i[r].fontWeight,o.push(new b(f,s))):o.push(new b(f))}t(o)}else setTimeout(function(){n()},50)}var i=this,e=i.a.projectId,o=i.a.version;if(e){var a=i.c.m;d(this.c,X(i,e,o),function(o){o?t([]):(a["__MonotypeConfiguration__"+e]=function(){return i.a},n())}).id="__MonotypeAPIScript__"+e}else t([])};function Y(t,n){this.c=t;this.a=n}Y.prototype.load=function(t){var n,i,e=this.a.urls||[],o=this.a.families||[],a=this.a.testStrings||{},s=new g;n=0;for(i=e.length;n<i;n++)p(this.c,e[n],v(s));var r=[];n=0;for(i=o.length;n<i;n++)if(e=o[n].split(":"),e[1])for(var f=e[1].split(","),c=0;c<f.length;c+=1)r.push(new b(e[0],f[c]));else r.push(new b(e[0]));m(s,function(){t(r,a)})};function Z(t,n,i){t?this.c=t:this.c=n+tt;this.a=[];this.f=[];this.g=i||""}var tt="//fonts.googleapis.com/css";function nt(t,n){for(var i=n.length,e=0;e<i;e++){var o=n[e].split(":");3==o.length&&t.f.push(o.pop());var a="";2==o.length&&""!=o[1]&&(a=":");t.a.push(o.join(a))}}function it(t){if(0==t.a.length)throw Error("No fonts to load!");if(-1!=t.c.indexOf("kit="))return t.c;for(var n=t.a.length,i=[],e=0;e<n;e++)i.push(t.a[e].replace(/ /g,"+"));n=t.c+"?family="+i.join("%7C");0<t.f.length&&(n+="&subset="+t.f.join(","));0<t.g.length&&(n+="&text="+encodeURIComponent(t.g));return n}function et(t){this.f=t;this.a=[];this.c={}}var ot={latin:"BESbswy","latin-ext":"çöüğş",cyrillic:"йяЖ",greek:"αβΣ",khmer:"កខគ",Hanuman:"កខគ"},at={thin:"1",extralight:"2","extra-light":"2",ultralight:"2","ultra-light":"2",light:"3",regular:"4",book:"4",medium:"5","semi-bold":"6",semibold:"6","demi-bold":"6",demibold:"6",bold:"7","extra-bold":"8",extrabold:"8","ultra-bold":"8",ultrabold:"8",black:"9",heavy:"9",l:"3",r:"4",b:"7"},st={i:"i",italic:"i",n:"n",normal:"n"},rt=/^(thin|(?:(?:extra|ultra)-?)?light|regular|book|medium|(?:(?:semi|demi|extra|ultra)-?)?bold|black|heavy|l|r|b|[1-9]00)?(n|i|normal|italic)?$/;function ft(t){for(var n=t.f.length,i=0;i<n;i++){var e=t.f[i].split(":"),o=e[0].replace(/\+/g," "),a=["n4"];if(2<=e.length){var s;var r=e[1];s=[];if(r)for(var r=r.split(","),f=r.length,c=0;c<f;c++){var h;h=r[c];if(h.match(/^[\w-]+$/)){var l=rt.exec(h.toLowerCase());if(null==l)h="";else{h=l[2];h=null==h||""==h?"n":st[h];l=l[1];if(null==l||""==l)l="4";else var u=at[l],l=u?u:isNaN(l)?"4":l.substr(0,1);h=[h,l].join("")}}else h="";h&&s.push(h)}0<s.length&&(a=s);3==e.length&&(e=e[2],s=[],e=e?e.split(","):s,0<e.length&&(e=ot[e[0]])&&(t.c[o]=e))}t.c[o]||(e=ot[o])&&(t.c[o]=e);for(e=0;e<a.length;e+=1)t.a.push(new b(o,a[e]))}}function ct(t,n){this.c=t;this.a=n}var ht={Arimo:!0,Cousine:!0,Tinos:!0};ct.prototype.load=function(t){var n=new g,i=this.c,e=new Z(this.a.api,l(i),this.a.text),o=this.a.families;nt(e,o);var a=new et(o);ft(a);p(i,it(e),v(n));m(n,function(){t(a.a,a.c,ht)})};function lt(t,n){this.c=t;this.a=n}lt.prototype.load=function(t){var n=this.a.id,i=this.c.m;n?d(this.c,(this.a.api||"https://use.typekit.net")+"/"+n+".js",function(n){if(n)t([]);else if(i.Typekit&&i.Typekit.config&&i.Typekit.config.fn){n=i.Typekit.config.fn;for(var e=[],o=0;o<n.length;o+=2)for(var a=n[o],s=n[o+1],r=0;r<s.length;r++)e.push(new b(a,s[r]));try{i.Typekit.load({events:!1,classes:!1,async:!0})}catch(t){}t(e)}},2e3):t([])};function ut(t,n){this.c=t;this.f=n;this.a=[]}ut.prototype.load=function(t){var n=this.f.id,i=this.c.m,e=this;n?(i.__webfontfontdeckmodule__||(i.__webfontfontdeckmodule__={}),i.__webfontfontdeckmodule__[n]=function(n,i){for(var o=0,a=i.fonts.length;o<a;++o){var s=i.fonts[o];e.a.push(new b(s.name,T("font-weight:"+s.weight+";font-style:"+s.style)))}t(e.a)},d(this.c,l(this.c)+(this.f.api||"//f.fontdeck.com/s/css/js/")+u(this.c)+"/"+n+".js",function(n){n&&t([])})):t([])};var pt=new U(window);pt.a.c.custom=function(t,n){return new Y(n,t)};pt.a.c.fontdeck=function(t,n){return new ut(n,t)};pt.a.c.monotype=function(t,n){return new V(n,t)};pt.a.c.typekit=function(t,n){return new lt(n,t)};pt.a.c.google=function(t,n){return new ct(n,t)};var dt={load:i(pt.load,pt)};"function"===typeof define&&define.amd?define(function(){return dt}):"undefined"!==typeof module&&module.exports?module.exports=dt:(window.WebFont=dt,window.WebFontConfig&&pt.load(window.WebFontConfig))})();
/* End */
;
//# sourceMappingURL=kernel_landing_master.map.js